import{a as h}from"./chunk-WCA5KJBW.js";import{a as G}from"./chunk-UGQGUFR7.js";import{a as A,b as d,c as N,d as T,g as M,h as R,i as q,o as j,q as z}from"./chunk-FQOKV524.js";import{a as O}from"./chunk-VUVQYZVZ.js";import{a as U}from"./chunk-5QPYTDH3.js";import{a as k}from"./chunk-HZWOLOZV.js";import{a as D}from"./chunk-QCJTTT55.js";import"./chunk-DJ4G2GYC.js";import{k as F,m as L,p as P}from"./chunk-AMUWJEPN.js";import{Ab as c,Kb as n,Lb as v,Mb as f,Nb as y,Tb as S,Ua as a,Va as p,Wb as E,Yb as I,Zb as C,ga as x,ib as m,ja as b,kb as s,qb as o,rb as i,sb as g,zb as w}from"./chunk-DRQLPHCS.js";var V=(()=>{class t{transform(e){return h(new Date(e),"dd/MM/yyyy")==="01/01/1970"?"SIN ESPECIFICAR":h(new Date(e),"dd/MM/yyyy")}static{this.\u0275fac=function(u){return new(u||t)}}static{this.\u0275pipe=b({name:"fecha",type:t,pure:!0,standalone:!0})}}return t})();var J=(t,l)=>({"bg-blue-100 text-blue-800":t,"bg-orange-100 text-orange-800":l});function K(t,l){t&1&&(o(0,"div",25)(1,"p",26),n(2,"A"),i()())}function Q(t,l){t&1&&(o(0,"div",27)(1,"p",26),n(2,"E"),i()())}function W(t,l){if(t&1&&(o(0,"div",15)(1,"div",16),m(2,K,3,0,"div",17)(3,Q,3,0,"div",18),o(4,"span",19),n(5),i()(),o(6,"div",20)(7,"div",21)(8,"h3",22),n(9,"Apellido y Nombre"),i(),o(10,"p",23),n(11),i()(),o(12,"div",21)(13,"h3",22),n(14,"DNI"),i(),o(15,"p",24),n(16),i()(),o(17,"div",21)(18,"h3",22),n(19,"Correo electr\xF3nico"),i(),o(20,"p",24),n(21),i()(),o(22,"div",21)(23,"h3",22),n(24,"Fecha de ingreso"),i(),o(25,"p",24),n(26),I(27,"fecha"),i()()()()),t&2){let e=c();a(2),s("ngIf",e.usuarioLogin.role==="ADMIN_ROLE"),a(),s("ngIf",e.usuarioLogin.role==="USER_ROLE"),a(),s("ngClass",E(11,J,e.usuarioLogin.role==="ADMIN_ROLE",e.usuarioLogin.role==="USER_ROLE")),a(),f(" ",e.usuarioLogin.role==="ADMIN_ROLE"?"Usuario administrador":"Usuario est\xE1ndar"," "),a(6),y("",e.usuarioLogin.apellido.toLowerCase()," ",e.usuarioLogin.nombre.toLowerCase(),""),a(5),v(e.usuarioLogin.dni),a(5),v(e.usuarioLogin.email),a(5),v(C(27,9,e.usuarioLogin.createdAt))}}function X(t,l){t&1&&(o(0,"p",28),n(1,"La contrase\xF1a es obligatoria"),i())}function Y(t,l){if(t&1&&(o(0,"p",28),n(1),i()),t&2){let e=c();a(),f("Debe tener como m\xEDnimo ",e.password_actual==null||e.password_actual.errors==null?null:e.password_actual.errors.minlength.requiredLength," caracteres")}}function Z(t,l){t&1&&(o(0,"p",28),n(1,"La contrase\xF1a es obligatoria"),i())}function $(t,l){if(t&1&&(o(0,"p",28),n(1),i()),t&2){let e=c();a(),f("Debe tener como m\xEDnimo ",e.password_nuevo==null||e.password_nuevo.errors==null?null:e.password_nuevo.errors.minlength.requiredLength," caracteres")}}function ee(t,l){t&1&&(o(0,"p",28),n(1,"La contrase\xF1a es obligatoria"),i())}function te(t,l){if(t&1&&(o(0,"p",28),n(1),i()),t&2){let e=c();a(),f("Debe tener como m\xEDnimo ",e.password_nuevo_repetir==null||e.password_nuevo_repetir.errors==null?null:e.password_nuevo_repetir.errors.minlength.requiredLength," caracteres")}}var fe=(()=>{class t{get password_actual(){return this.passwordForm.get("password_actual")}get password_nuevo(){return this.passwordForm.get("password_nuevo")}get password_nuevo_repetir(){return this.passwordForm.get("password_nuevo_repetir")}constructor(e,u,r,_,B){this.authService=e,this.dataService=u,this.fb=r,this.usuariosService=_,this.alertService=B}ngOnInit(){U.from(".gsap-contenido",{y:100,opacity:0,duration:.2}),this.dataService.ubicacionActual="Equinoccio - Perfil",this.getUsuario(),this.passwordForm=this.fb.group({password_actual:["",[d.required,d.minLength(4)]],password_nuevo:["",[d.required,d.minLength(4)]],password_nuevo_repetir:["",[d.required,d.minLength(4)]]})}getUsuario(){this.alertService.loading(),this.usuariosService.getUsuario(this.authService.usuario.userId).subscribe({next:e=>{this.alertService.close(),this.usuarioLogin=e},error:({error:e})=>{this.alertService.errorApi(e.msg)}})}actualizarPassword(){this.passwordForm.valid?(this.alertService.loading(),this.usuariosService.actualizarPasswordPefil(this.authService.usuario.userId,this.passwordForm.value).subscribe({next:()=>{this.passwordForm.reset(),this.alertService.success("Contrase\xF1a actualizada")},error:({error:e})=>{this.passwordForm.reset(),this.alertService.errorApi(e.message)}})):this.passwordForm.markAllAsTouched()}static{this.\u0275fac=function(u){return new(u||t)(p(D),p(k),p(j),p(G),p(O))}}static{this.\u0275cmp=x({type:t,selectors:[["app-perfil"]],standalone:!0,features:[S],decls:33,vars:8,consts:[[1,"p-6","gsap-contenido","w-full","max-w-6xl","mx-auto","md:flex","md:space-x-6"],[1,"bg-white","w-full","md:w-1/2","rounded-lg","shadow-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-800","to-gray-700","px-6","py-4"],[1,"text-xl","font-semibold","text-white","text-center"],["class","p-6",4,"ngIf"],[1,"w-full","md:w-1/2","mt-6","md:mt-0"],[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden"],[1,"p-6",3,"submit","formGroup"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["formControlName","password_actual","type","password","placeholder","Mi contrase\xF1a actual",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition","duration-200"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["formControlName","password_nuevo","type","password","placeholder","Ingresar nueva contrase\xF1a",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition","duration-200"],["formControlName","password_nuevo_repetir","type","password","placeholder","Repite la nueva contrase\xF1a",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition","duration-200"],[1,"w-full","mt-6","px-6","py-3","bg-blue-600","text-white","font-medium","rounded-lg","shadow-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition","duration-200",3,"click"],[1,"p-6"],[1,"flex","flex-col","items-center"],["class","bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center w-28 h-28 shadow-lg",4,"ngIf"],["class","bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center w-28 h-28 shadow-lg",4,"ngIf"],[1,"mt-3","px-4","py-1","text-sm","font-medium","rounded-full",3,"ngClass"],[1,"mt-6","space-y-4"],[1,"text-center"],[1,"text-lg","font-semibold","text-gray-800"],[1,"mt-1","capitalize","text-gray-600"],[1,"mt-1","text-gray-600"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","rounded-full","flex","items-center","justify-center","w-28","h-28","shadow-lg"],[1,"text-5xl","font-bold","text-white"],[1,"bg-gradient-to-br","from-orange-500","to-orange-600","rounded-full","flex","items-center","justify-center","w-28","h-28","shadow-lg"],[1,"mt-1","text-sm","text-red-600"]],template:function(u,r){u&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4,"Datos de usuario"),i()(),m(5,W,28,14,"div",4),i(),o(6,"div",5)(7,"div",6)(8,"div",2)(9,"h1",3),n(10,"Actualizar contrase\xF1a"),i()(),o(11,"form",7),w("submit",function(){return r.actualizarPassword()}),o(12,"div",8)(13,"div")(14,"label",9),n(15,"Contrase\xF1a actual"),i(),g(16,"input",10),m(17,X,2,0,"p",11)(18,Y,2,1,"p",11),i(),o(19,"div")(20,"label",9),n(21,"Nueva contrase\xF1a"),i(),g(22,"input",12),m(23,Z,2,0,"p",11)(24,$,2,1,"p",11),i(),o(25,"div")(26,"label",9),n(27,"Repetir contrase\xF1a"),i(),g(28,"input",13),m(29,ee,2,0,"p",11)(30,te,2,1,"p",11),i()(),o(31,"button",14),w("click",function(){return r.actualizarPassword()}),n(32," Actualizar contrase\xF1a "),i()()()()()),u&2&&(a(5),s("ngIf",r.usuarioLogin),a(6),s("formGroup",r.passwordForm),a(6),s("ngIf",r.password_actual.touched&&(r.password_actual==null||r.password_actual.errors==null?null:r.password_actual.errors.required)),a(),s("ngIf",r.password_actual.touched&&(r.password_actual==null||r.password_actual.errors==null?null:r.password_actual.errors.minlength)),a(5),s("ngIf",r.password_nuevo.touched&&(r.password_nuevo==null||r.password_nuevo.errors==null?null:r.password_nuevo.errors.required)),a(),s("ngIf",r.password_nuevo.touched&&(r.password_nuevo==null||r.password_nuevo.errors==null?null:r.password_nuevo.errors.minlength)),a(5),s("ngIf",r.password_nuevo_repetir.touched&&(r.password_nuevo_repetir==null||r.password_nuevo_repetir.errors==null?null:r.password_nuevo_repetir.errors.required)),a(),s("ngIf",r.password_nuevo_repetir.touched&&(r.password_nuevo_repetir==null||r.password_nuevo_repetir.errors==null?null:r.password_nuevo_repetir.errors.minlength)))},dependencies:[z,M,A,N,T,R,q,P,F,L,V],encapsulation:2})}}return t})();export{fe as default};
