import{a as L}from"./chunk-J3BUK4MO.js";import{a as G}from"./chunk-7ASKJ65C.js";import{a as H}from"./chunk-YESQC6II.js";import{g as V,h as j,k as T}from"./chunk-LIJZX7MQ.js";import{m as M,n as A,p as D}from"./chunk-UHNCRVEK.js";import{$ as b,Bb as a,Db as v,Eb as y,Fb as k,Jb as E,Lb as I,Ob as _,Qb as C,Ua as l,Va as p,cb as u,ga as m,ha as c,hb as g,ib as f,jb as w,kb as e,lb as t,mb as r,ub as S,vb as x}from"./chunk-GYUG5PKY.js";function P(n,d){if(n&1&&(e(0,"p",28),a(1),t()),n&2){let i=x();l(1),y(" ",i.authService.usuario.apellido.toLowerCase(),", ",i.authService.usuario.nombre.toLowerCase()," ")}}var z=(n,d)=>d.id;function Z(n,d){if(n&1&&(e(0,"div",56),m(),e(1,"svg",57),r(2,"path",58),t(),c(),e(3,"span",59),a(4),_(5,"date"),t()()),n&2){let i=x().$implicit;l(4),v("Hasta: ",C(5,1,i.programacionActiva.fechaFin,"dd/MM/yyyy HH:mm"),"")}}function B(n,d){n&1&&(e(0,"div",60),m(),e(1,"svg",57),r(2,"path",61),t(),c(),e(3,"span",59),a(4,"Sin l\xEDmite de tiempo"),t()())}var R=n=>["/public/encuesta",n];function F(n,d){if(n&1&&(e(0,"a",30),r(1,"div",31),e(2,"div",32),r(3,"div",33),e(4,"div",34)(5,"div",35)(6,"div",36),m(),e(7,"svg",37),r(8,"path",38),t()(),c(),e(9,"div",39)(10,"span",40),a(11," ACTIVA "),t()()(),e(12,"div",41)(13,"h3",42),a(14),t(),e(15,"p",43),a(16),t()(),e(17,"div",44)(18,"div",45),m(),e(19,"svg",46),r(20,"path",47),t(),c(),e(21,"span",48),a(22),t()(),g(23,Z,6,4,"div",49)(24,B,5,0,"div",50),e(25,"div",51)(26,"span",52),a(27," Responder ahora "),t(),e(28,"div",53),m(),e(29,"svg",54),r(30,"path",55),t()()()()()()()),n&2){let i=d.$implicit;u("routerLink",I(6,R,i.id)),l(14),v(" ",i.titulo," "),l(2),v(" ",i.descripcion," "),l(6),v("",(i.Preguntas==null?null:i.Preguntas.length)||0," preguntas"),l(1),u("ngIf",i.programacionActiva),l(1),u("ngIf",!i.programacionActiva&&i.estado==="Activa")}}function N(n,d){if(n&1&&(e(0,"div",29),f(1,F,31,8,"a",62,z),t()),n&2){let i=x();l(1),w(i.encuestas)}}function W(n,d){n&1&&(e(0,"div",63)(1,"div",64),r(2,"div",65),e(3,"div",66),m(),e(4,"svg",67),r(5,"path",38),t()()(),c(),e(6,"h3",68),a(7," No hay encuestas disponibles "),t(),e(8,"p",69),a(9," En este momento no tienes encuestas asignadas para responder "),t(),e(10,"div",70),r(11,"div",71),e(12,"span",72),a(13,"Vuelve m\xE1s tarde para nuevas encuestas"),t()()())}var K=(()=>{class n{constructor(i,s,o,h){this.encuestasService=i,this.alertService=s,this.authService=o,this.router=h,this.encuestas=[],this.cargando=!0}ngOnInit(){this.authService.validarToken().subscribe({next:i=>{i?this.cargarEncuestasAsignadas():this.router.navigate(["/login"])},error:()=>{this.router.navigate(["/login"])}})}cargarEncuestasAsignadas(){this.alertService.loading();let i=this.authService.usuario?.userId;if(!i){this.cargando=!1,this.alertService.close(),this.router.navigate(["/login"]);return}this.encuestasService.obtenerEncuestasAsignadas(i).subscribe({next:({encuestas:s})=>{this.encuestas=s.filter(o=>o.encuesta.estado==="Activa").map(o=>o.encuesta),this.cargando=!1,this.alertService.close()},error:({error:s})=>{this.cargando=!1,this.alertService.errorApi(s.message)}})}cerrarSesion(){this.authService.logout()}static{this.\u0275fac=function(s){return new(s||n)(p(L),p(G),p(H),p(V))}}static{this.\u0275cmp=b({type:n,selectors:[["app-encuestas-disponibles"]],standalone:!0,features:[E],decls:34,vars:6,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-teal-900","to-emerald-900","relative","overflow-hidden"],[1,"absolute","inset-0","opacity-10"],[1,"absolute","top-0","left-0","w-96","h-96","bg-sky-400","rounded-full","blur-3xl","animate-pulse"],[1,"absolute","bottom-0","right-0","w-96","h-96","bg-emerald-400","rounded-full","blur-3xl","animate-pulse",2,"animation-delay","1s"],[1,"absolute","inset-0","bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]","opacity-5"],[1,"relative","z-10"],[1,"bg-white/10","backdrop-blur-xl","border-b-2","border-white/20","shadow-xl"],[1,"max-w-7xl","mx-auto","px-4","py-4","md:flex","md:items-center","md:justify-between"],[1,"flex","items-center","gap-4"],[1,"relative","group"],[1,"absolute","inset-0","bg-gradient-to-r","from-sky-400","to-emerald-400","rounded-2xl","blur-lg","opacity-50","group-hover:opacity-75","transition-all","duration-300"],[1,"relative","w-14","h-14","bg-white/10","backdrop-blur-sm","rounded-2xl","flex","items-center","justify-center","border-2","border-white/30"],["src","assets/svg/muni-encuestas-icon.svg","alt","Logo",1,"w-10","h-10","group-hover:scale-110","group-hover:rotate-6","transition-all"],[1,"text-xl","font-bold","bg-gradient-to-r","from-sky-200","to-emerald-200","bg-clip-text","text-transparent"],["class","text-white/70 text-sm capitalize",4,"ngIf"],[1,"flex","items-center","ml-auto","md:ml-0","gap-2","mt-4","md:mt-0","px-4","py-2.5","bg-gradient-to-r","from-red-600","to-rose-600","hover:from-red-700","hover:to-rose-700","text-white","rounded-xl","transition-all","duration-300","shadow-lg","hover:shadow-xl","hover:scale-105","border-2","border-red-500/50","hover:border-red-400",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"],[1,"font-semibold"],[1,"relative","z-10","max-w-7xl","mx-auto","px-4","py-8"],[1,"text-center","mb-12"],[1,"text-3xl","md:text-4xl","font-bold","bg-gradient-to-r","from-sky-200","via-teal-200","to-emerald-200","bg-clip-text","text-transparent","mb-3"],[1,"text-white/70","text-lg"],[1,"inline-flex","items-center","gap-2","mt-4","px-4","py-2","bg-white/10","backdrop-blur-sm","rounded-full","border","border-white/20"],[1,"w-2","h-2","bg-emerald-400","rounded-full","animate-pulse"],[1,"text-white/80","text-sm","font-medium"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center py-20",4,"ngIf"],[1,"text-white/70","text-sm","capitalize"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"group","relative",3,"routerLink"],[1,"absolute","inset-0","bg-gradient-to-r","from-emerald-400","to-teal-500","rounded-2xl","blur-xl","opacity-0","group-hover:opacity-30","transition-all","duration-500"],[1,"relative","h-full","bg-white/10","backdrop-blur-md","rounded-2xl","border-2","border-white/20","p-6","shadow-xl","group-hover:shadow-2xl","group-hover:shadow-emerald-500/30","group-hover:-translate-y-2","group-hover:border-emerald-400/50","transition-all","duration-500","overflow-hidden","cursor-pointer"],[1,"absolute","top-0","right-0","w-32","h-32","bg-gradient-to-br","from-emerald-400/20","to-transparent","rounded-full","blur-2xl"],[1,"relative","flex","flex-col","h-full"],[1,"flex","items-start","gap-4","mb-4"],[1,"w-14","h-14","bg-gradient-to-br","from-emerald-500","to-teal-600","rounded-xl","flex","items-center","justify-center","flex-shrink-0","shadow-lg","group-hover:scale-110","group-hover:rotate-6","transition-all","duration-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2",1,"w-7","h-7","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex-1","flex","justify-end"],[1,"px-3","py-1","bg-emerald-500/20","border","border-emerald-400/50","text-emerald-300","text-xs","font-bold","rounded-full","backdrop-blur-sm"],[1,"flex-1","mb-4"],[1,"text-xl","font-bold","text-white","mb-3","group-hover:text-emerald-200","transition-colors","line-clamp-2"],[1,"text-white/60","text-sm","leading-relaxed","line-clamp-3"],[1,"space-y-3","pt-4","border-t","border-white/10"],[1,"flex","items-center","gap-2","text-white/70"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2",1,"w-4","h-4","text-sky-400"],["stroke-linecap","round","stroke-linejoin","round","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-medium"],["class","flex items-center gap-2 text-orange-300",4,"ngIf"],["class","flex items-center gap-2 text-sky-300",4,"ngIf"],[1,"flex","items-center","justify-between","pt-2"],[1,"text-emerald-300","text-sm","font-semibold","group-hover:text-emerald-200","transition-colors"],[1,"w-8","h-8","bg-emerald-500/20","rounded-full","flex","items-center","justify-center","group-hover:bg-emerald-500/40","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2.5",1,"w-4","h-4","text-emerald-300","group-hover:translate-x-1","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","d","M9 5l7 7-7 7"],[1,"flex","items-center","gap-2","text-orange-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","2",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","font-medium"],[1,"flex","items-center","gap-2","text-sky-300"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["class","group relative",3,"routerLink"],[1,"text-center","py-20"],[1,"relative","inline-block","mb-8"],[1,"absolute","inset-0","bg-gradient-to-r","from-sky-400","to-emerald-400","rounded-full","blur-xl","opacity-30"],[1,"relative","w-32","h-32","bg-white/10","backdrop-blur-sm","rounded-full","flex","items-center","justify-center","border-2","border-white/20"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","stroke-width","1.5",1,"w-16","h-16","text-white/50"],[1,"text-2xl","md:text-3xl","font-bold","text-white","mb-3"],[1,"text-white/60","text-lg","mb-8","max-w-md","mx-auto"],[1,"inline-flex","items-center","gap-2","px-6","py-3","bg-white/10","backdrop-blur-sm","rounded-full","border","border-white/20"],[1,"w-2","h-2","bg-sky-400","rounded-full","animate-pulse"],[1,"text-white/70","text-sm","font-medium"]],template:function(s,o){s&1&&(e(0,"div",0)(1,"div",1),r(2,"div",2)(3,"div",3),t(),r(4,"div",4),e(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),r(10,"div",10),e(11,"div",11),r(12,"img",12),t()(),e(13,"div")(14,"h1",13),a(15," Encuestas Disponibles "),t(),g(16,P,2,2,"p",14),t()(),e(17,"button",15),S("click",function(){return o.cerrarSesion()}),m(),e(18,"svg",16),r(19,"path",17),t(),c(),e(20,"span",18),a(21,"Cerrar sesi\xF3n"),t()()()()(),e(22,"div",19)(23,"div",20)(24,"h2",21),a(25," Selecciona una encuesta "),t(),e(26,"p",22),a(27,"Elige la encuesta que deseas completar"),t(),e(28,"div",23),r(29,"div",24),e(30,"span",25),a(31),t()()(),g(32,N,3,0,"div",26)(33,W,14,0,"div",27),t()()),s&2&&(l(16),u("ngIf",o.authService.usuario),l(15),k("",o.encuestas.length," encuesta",o.encuestas.length!==1?"s":""," disponible",o.encuestas.length!==1?"s":"",""),l(1),u("ngIf",o.encuestas.length>0),l(1),u("ngIf",!o.cargando&&o.encuestas.length===0))},dependencies:[D,M,A,T,j],encapsulation:2})}}return n})();export{K as default};
