import{a as Gt}from"./chunk-INFHP37E.js";import{a as Ht}from"./chunk-D43TIK6X.js";import{a as Ne}from"./chunk-DTMQF6TE.js";import{a as Wt}from"./chunk-OJWUDPLJ.js";import{a as Ut}from"./chunk-TIL2E3OS.js";import{a as Vt,b as Ae,d as Fe,g as Me,k as jt,l as zt,m as Bt,q as Oe}from"./chunk-FMNQVWW6.js";import{a as Le}from"./chunk-VUVQYZVZ.js";import{a as Re}from"./chunk-JTVQZKZI.js";import{e as Mt,g as Ot,h as Lt,k as Nt}from"./chunk-LRQMHJK3.js";import{d as j,k as kt,l as Ce,m as Rt,n as At,p as Te,r as Ft,v as Pe,x as ke}from"./chunk-PL2ZQQHO.js";import{$a as q,A as wt,Ab as m,B as xt,C as fe,D as yt,Da as Dt,E as Ke,Eb as It,J as qe,Kb as h,Lb as he,Mb as P,Nb as ye,Ob as Ct,Pb as B,Q as ve,Qb as H,R as Ye,Rb as W,S as J,Sb as ne,T as St,Tb as Y,Ua as d,Va as _,Vb as Se,X as M,Y as ee,Yb as Ee,_ as z,_b as De,aa as I,ba as ce,bb as Qe,eb as le,ec as Tt,f as $,fa as D,ga as Z,h as ae,ha as te,hc as Ie,ia as ie,ib as k,jb as de,k as S,kb as g,kc as se,l as ft,lc as Pt,m as Ze,mb as be,na as Et,ob as we,p as vt,pa as Xe,pb as xe,qa as x,qb as a,ra as y,rb as c,sa as v,sb as f,t as bt,ta as E,vb as C,ya as K,za as R,zb as w}from"./chunk-DRQLPHCS.js";var V=ke.base_url+"/preguntas",Ve=(()=>{class s{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(e){this.http=e,this.abmPregunta={show:!1,estado:"crear",form:{descripcion:"",multiplesRespuestas:!1,respuestas:[{descripcion:""},{descripcion:""}]},preguntaSeleccionada:null,encuestaSeleccionada:null},this.preguntas=[],this.total=0}abrirAbm(e,t=null,i=null){this.abmPregunta.estado=e,this.abmPregunta.preguntaSeleccionada=t,this.abmPregunta.encuestaSeleccionada=i,this.abmPregunta.show=!0,e==="editar"?(this.abmPregunta.form={descripcion:t.descripcion,multiplesRespuestas:t.multiplesRespuestas||!1,respuestas:[]},this.abmPregunta.form.respuestas=t.Respuestas.map(r=>({descripcion:r.descripcion,id:r.id}))):this.abmPregunta.form={descripcion:"",multiplesRespuestas:!1,respuestas:[{descripcion:""},{descripcion:""}]}}obtenerPregunta(e){return this.http.get(`${V}/${e}`,{headers:this.getToken})}listarPreguntas({direccion:e="desc",columna:t="id",parametro:i="",pagina:r=1,itemsPorPagina:o=1e6,activo:l="true"}){return this.http.get(V,{params:{direccion:String(e),columna:t,parametro:i,pagina:r,itemsPorPagina:o,activo:l},headers:this.getToken})}nuevaPregunta(e){return this.http.post(V,e,{headers:this.getToken})}actualizarPregunta(e,t){return this.http.patch(`${V}/${e}`,t,{headers:this.getToken})}eliminarPregunta(e){return this.http.delete(`${V}/${e}`,{headers:this.getToken})}activarPregunta(e){return this.http.patch(`${V}/${e}/activar`,{},{headers:this.getToken})}activarRespuesta(e){return this.http.patch(`${V}/respuesta/${e}/activar`,{},{headers:this.getToken})}desactivarRespuesta(e){return this.http.patch(`${V}/respuesta/${e}/desactivar`,{},{headers:this.getToken})}reordenarPregunta(e,t){return this.http.patch(`${V}/${e}/reordenar`,{direccion:t},{headers:this.getToken})}reordenarRespuesta(e,t){return this.http.patch(`${V}/respuesta/${e}/reordenar`,{direccion:t},{headers:this.getToken})}static{this.\u0275fac=function(t){return new(t||s)(I(Pe))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function Oi(s,n){if(s&1){let e=C();a(0,"div",17)(1,"div",18)(2,"input",19),W("ngModelChange",function(i){let r=x(e).$implicit;return H(r.descripcion,i)||(r.descripcion=i),y(i)}),c(),a(3,"button",20),w("click",function(){let i=x(e).index,r=m();return y(r.eliminarRespuesta(i))}),v(),a(4,"svg",21),f(5,"path",22),c()()()()}if(s&2){let e=n.$implicit;d(2),B("ngModel",e.descripcion)}}var Zt=(()=>{class s{constructor(e,t,i,r){this.authService=e,this.alertService=t,this.toastr=i,this.preguntasService=r,this.insertEvent=new R,this.updateEvent=new R}ngOnInit(){}crearPregunta(){let e=this.verificacionFormulario();if(e.trim()!==""){this.alertService.info(e);return}this.alertService.question({msg:"Creando pregunta",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{if(t){this.alertService.loading();let i={descripcion:this.preguntasService.abmPregunta.form.descripcion,multiplesRespuestas:this.preguntasService.abmPregunta.form.multiplesRespuestas,encuestaId:this.preguntasService.abmPregunta.encuestaSeleccionada.id,respuestas:this.preguntasService.abmPregunta.form.respuestas,creatorUserId:this.authService.usuario.userId};this.preguntasService.nuevaPregunta(i).subscribe({next:({pregunta:r})=>{this.insertEvent.emit(r),this.preguntasService.abmPregunta.show=!1,this.toastr.success("Creada correctamente","Pregunta"),this.alertService.close()},error:({error:r})=>this.alertService.errorApi(r.message)})}})}actualizarPregunta(){let e=this.verificacionFormulario();if(e.trim()!==""){this.alertService.info(e);return}this.alertService.question({msg:"Actualizando pregunta",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{if(t){this.alertService.loading();let i={encuestaId:this.preguntasService.abmPregunta.encuestaSeleccionada.id,descripcion:this.preguntasService.abmPregunta.form.descripcion,multiplesRespuestas:this.preguntasService.abmPregunta.form.multiplesRespuestas,respuestas:this.preguntasService.abmPregunta.form.respuestas,creatorUserId:this.authService.usuario.userId};this.preguntasService.actualizarPregunta(this.preguntasService.abmPregunta.preguntaSeleccionada.id,i).subscribe({next:({pregunta:r})=>{this.updateEvent.emit(r),this.preguntasService.abmPregunta.show=!1,this.toastr.success("Actualizada correctamente","Pregunta"),this.alertService.close()},error:({error:r})=>this.alertService.errorApi(r.message)})}})}verificacionFormulario(){let{descripcion:e}=this.preguntasService.abmPregunta.form;return e.trim()===""?"La descripci\xF3n es requerida":this.preguntasService.abmPregunta.form.respuestas.length<2?"Debe tener al menos 2 respuestas":this.preguntasService.abmPregunta.form.respuestas.some(t=>t.descripcion.trim()==="")?"No puede tener respuestas vacias":""}agregarRespuestas(){this.preguntasService.abmPregunta.form.respuestas.push({descripcion:""})}eliminarRespuesta(e){this.preguntasService.abmPregunta.form.respuestas.splice(e,1)}static{this.\u0275fac=function(t){return new(t||s)(_(Re),_(Le),_(Ne),_(Ve))}}static{this.\u0275cmp=Z({type:s,selectors:[["app-abm-preguntas"]],outputs:{insertEvent:"insertEvent",updateEvent:"updateEvent"},standalone:!0,features:[Y],decls:27,vars:10,consts:[[3,"closeModal","crear","actualizar","showModal","titulo","urlIcono","estadoFormulario","textoCrear","textoActualizar","showFooter"],[1,"bg-white","rounded-lg","shadow-xl"],[1,"p-6","max-h-96","overflow-y-auto"],["for","descripcion",1,"label-generico"],[1,"text-red-500"],["type","text","id","descripcion","placeholder","Ingrese aqui su pregunta",1,"input-generico","mt-2",3,"ngModelChange","ngModel"],[1,"mt-4","p-3","bg-purple-50","border","border-purple-200","rounded-lg"],[1,"flex","items-center","gap-3","cursor-pointer"],["type","checkbox",1,"w-4","h-4","text-purple-600","border-gray-300","rounded","focus:ring-purple-500","focus:ring-2",3,"ngModelChange","ngModel"],[1,"flex-1"],[1,"text-sm","font-semibold","text-gray-800","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","text-gray-600","mt-1"],[1,"mt-3"],["class","mb-1",4,"ngFor","ngForOf"],[1,"text-xs","p-2","bg-gray-50","hover:bg-gray-100","border","border-gray-300","rounded-lg","mt-2",3,"click"],[1,"mb-1"],[1,"flex","items-center","gap-2"],["type","text","placeholder","Ingrese aqui su respuesta",1,"border-b","border-gray-200","text-sm","w-full","p-2","mt-2",3,"ngModelChange","ngModel"],["type","button",1,"bg-red-500","text-white","rounded-full","p-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-4"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18 18 6M6 6l12 12"]],template:function(t,i){t&1&&(a(0,"app-modal",0),w("closeModal",function(){return i.preguntasService.abmPregunta.show=!1})("crear",function(){return i.crearPregunta()})("actualizar",function(){return i.actualizarPregunta()}),a(1,"div",1)(2,"div",2)(3,"div")(4,"label",3),h(5," Pregunta "),a(6,"span",4),h(7,"*"),c()(),a(8,"input",5),W("ngModelChange",function(o){return H(i.preguntasService.abmPregunta.form.descripcion,o)||(i.preguntasService.abmPregunta.form.descripcion=o),o}),c()(),a(9,"div",6)(10,"label",7)(11,"input",8),W("ngModelChange",function(o){return H(i.preguntasService.abmPregunta.form.multiplesRespuestas,o)||(i.preguntasService.abmPregunta.form.multiplesRespuestas=o),o}),c(),a(12,"div",9)(13,"span",10),v(),a(14,"svg",11),f(15,"path",12),c(),h(16," Permitir m\xFAltiples respuestas "),c(),E(),a(17,"p",13),h(18,"Los usuarios podr\xE1n seleccionar m\xE1s de una opci\xF3n"),c()()()(),a(19,"div",14)(20,"p",3),h(21," Respuestas "),a(22,"span",4),h(23,"*"),c()(),k(24,Oi,6,1,"div",15),a(25,"button",16),w("click",function(){return i.agregarRespuestas()}),h(26," Agregar respuesta "),c()()()()()),t&2&&(g("showModal",i.preguntasService.abmPregunta.show)("titulo",i.preguntasService.abmPregunta.estado=="crear"?"Creando pregunta":"Editando pregunta")("urlIcono","assets/svg/preguntas.svg")("estadoFormulario",i.preguntasService.abmPregunta.estado)("textoCrear","Crear pregunta")("textoActualizar","Actualizar pregunta")("showFooter",!0),d(8),B("ngModel",i.preguntasService.abmPregunta.form.descripcion),d(3),B("ngModel",i.preguntasService.abmPregunta.form.multiplesRespuestas),d(13),g("ngForOf",i.preguntasService.abmPregunta.form.respuestas))},dependencies:[Te,Ce,Oe,Ae,Vt,Fe,Me,Wt],encapsulation:2})}}return s})();function je(s,n=0){return Li(s)?Number(s):n}function Li(s){return!isNaN(parseFloat(s))&&!isNaN(Number(s))}function Kt(s){return Array.isArray(s)?s:[s]}function A(s){return s instanceof K?s.nativeElement:s}var et;try{et=typeof Intl<"u"&&Intl.v8BreakIterator}catch{et=!1}var tt=(()=>{class s{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ft(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||et)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(t){return new(t||s)(I(Dt))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var ue;function Ni(){if(ue==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ue=!0}))}finally{ue=ue||!1}return ue}function pe(s){return Ni()?s:!!s.capture}var Je;function Vi(){if(Je==null){let s=typeof document<"u"?document.head:null;Je=!!(s&&(s.createShadowRoot||s.attachShadow))}return Je}function it(s){if(Vi()){let n=s.getRootNode?s.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function me(s){return s.composedPath?s.composedPath()[0]:s.target}var zi=new z("cdk-dir-doc",{providedIn:"root",factory:Bi});function Bi(){return ce(j)}var Hi=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Wi(s){let n=s?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?Hi.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var nt=(()=>{class s{constructor(e){if(this.value="ltr",this.change=new R,e){let t=e.body?e.body.dir:null,i=e.documentElement?e.documentElement.dir:null;this.value=Wi(t||i||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(t){return new(t||s)(I(zi,8))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var $i=20,qt=(()=>{class s{constructor(e,t,i){this._ngZone=e,this._platform=t,this._scrolled=new S,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=$i){return this._platform.isBrowser?new ae(t=>{this._globalSubscription||this._addGlobalListener();let i=e>0?this._scrolled.pipe(Ke(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):vt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(yt(r=>!r||i.indexOf(r)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((i,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let i=A(t),r=e.getElementRef().nativeElement;do if(i==r)return!0;while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return wt(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(t){return new(t||s)(I(q),I(tt),I(j,8))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Zi=20,Yt=(()=>{class s{constructor(e,t,i){this._platform=e,this._change=new S,this._changeListener=r=>{this._change.next(r)},this._document=i,t.runOutsideAngular(()=>{if(e.isBrowser){let r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),i=e.documentElement,r=i.getBoundingClientRect(),o=-r.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,l=-r.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0;return{top:o,left:l}}change(e=Zi){return e>0?this._change.pipe(Ke(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(t){return new(t||s)(I(tt),I(q),I(j,8))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Xt=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=te({type:s})}static{this.\u0275inj=ee({})}}return s})();function Qt(s){return s.buttons===0||s.detail===0}function Jt(s){let n=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}function ht(s,n,e){for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];i?s.setProperty(t,i,e?.has(t)?"important":""):s.removeProperty(t)}return s}function re(s,n){let e=n?"":"none";ht(s.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function ei(s,n,e){ht(s.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},e)}function We(s,n){return n&&n!="none"?s+" "+n:s}function ti(s,n){s.style.width=`${n.width}px`,s.style.height=`${n.height}px`,s.style.transform=Ue(n.left,n.top)}function Ue(s,n){return`translate3d(${Math.round(s)}px, ${Math.round(n)}px, 0)`}function ut(s){let n=s.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function rt(s,n,e){let{top:t,bottom:i,left:r,right:o}=s;return e>=t&&e<=i&&n>=r&&n<=o}function _e(s,n,e){s.top+=n,s.bottom=s.top+s.height,s.left+=e,s.right=s.left+s.width}function ii(s,n,e,t){let{top:i,right:r,bottom:o,left:l,width:u,height:p}=s,b=u*n,T=p*n;return t>i-T&&t<o+T&&e>l-b&&e<r+b}var Ge=class{constructor(n){this._document=n,this.positions=new Map}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:ut(e)})})}handleScroll(n){let e=me(n),t=this.positions.get(e);if(!t)return null;let i=t.scrollPosition,r,o;if(e===this._document){let p=this.getViewportScrollPosition();r=p.top,o=p.left}else r=e.scrollTop,o=e.scrollLeft;let l=i.top-r,u=i.left-o;return this.positions.forEach((p,b)=>{p.clientRect&&e!==b&&e.contains(b)&&_e(p.clientRect,l,u)}),i.top=r,i.left=o,{top:l,left:u}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function gi(s){let n=s.cloneNode(!0),e=n.querySelectorAll("[id]"),t=s.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<e.length;i++)e[i].removeAttribute("id");return t==="canvas"?ri(s,n):(t==="input"||t==="select"||t==="textarea")&&si(s,n),ni("canvas",s,n,ri),ni("input, textarea, select",s,n,si),n}function ni(s,n,e,t){let i=n.querySelectorAll(s);if(i.length){let r=e.querySelectorAll(s);for(let o=0;o<i.length;o++)t(i[o],r[o])}}var qi=0;function si(s,n){n.type!=="file"&&(n.value=s.value),n.type==="radio"&&n.name&&(n.name=`mat-clone-${n.name}-${qi++}`)}function ri(s,n){let e=n.getContext("2d");if(e)try{e.drawImage(s,0,0)}catch{}}function _i(s,n){let e=s.rootNodes;if(e.length===1&&e[0].nodeType===n.ELEMENT_NODE)return e[0];let t=n.createElement("div");return e.forEach(i=>t.appendChild(i)),t}function oi(s){let n=s.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(s)*n}function Yi(s){let n=getComputedStyle(s),e=st(n,"transition-property"),t=e.find(l=>l==="transform"||l==="all");if(!t)return 0;let i=e.indexOf(t),r=st(n,"transition-duration"),o=st(n,"transition-delay");return oi(r[i])+oi(o[i])}function st(s,n){return s.getPropertyValue(n).split(",").map(t=>t.trim())}var Xi=new Set(["position"]),ot=class{constructor(n,e,t,i,r,o,l,u,p){this._document=n,this._rootElement=e,this._direction=t,this._initialDomRect=i,this._previewTemplate=r,this._previewClass=o,this._pickupPositionOnPage=l,this._initialTransform=u,this._zIndex=p}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),"showPopover"in this._preview&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return Yi(this._preview)}addEventListener(n,e){this._preview.addEventListener(n,e)}removeEventListener(n,e){this._preview.removeEventListener(n,e)}_createPreview(){let n=this._previewTemplate,e=this._previewClass,t=n?n.template:null,i;if(t&&n){let r=n.matchSize?this._initialDomRect:null,o=n.viewContainer.createEmbeddedView(t,n.context);o.detectChanges(),i=_i(o,this._document),this._previewEmbeddedView=o,n.matchSize?ti(i,r):i.style.transform=Ue(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=gi(this._rootElement),ti(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return ht(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Xi),re(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>i.classList.add(r)):i.classList.add(e)),i}},ai=pe({passive:!0}),ze=pe({passive:!1}),ci=pe({passive:!1,capture:!0}),Qi=800,li=new Set(["position"]),at=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(e=>re(e,n)))}constructor(n,e,t,i,r,o){this._config=e,this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new S,this._pointerMoveSubscription=$.EMPTY,this._pointerUpSubscription=$.EMPTY,this._scrollSubscription=$.EMPTY,this._resizeSubscription=$.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new S,this.started=new S,this.released=new S,this.ended=new S,this.entered=new S,this.exited=new S,this.dropped=new S,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){let u=this._getTargetHandle(l);u&&!this._disabledHandles.has(u)&&!this.disabled&&this._initializeDragSequence(u,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{let u=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){let b=Math.abs(u.x-this._pickupPositionOnPage.x),T=Math.abs(u.y-this._pickupPositionOnPage.y);if(b+T>=this._config.dragStartThreshold){let U=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),G=this._dropContainer;if(!U){this._endDragSequence(l);return}(!G||!G.isDragging()&&!G.isReceiving())&&(l.cancelable&&l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.cancelable&&l.preventDefault();let p=this._getConstrainedPointerPosition(u);if(this._hasMoved=!0,this._lastKnownPointerPosition=u,this._updatePointerDirectionDelta(p),this._dropContainer)this._updateActiveDropContainer(p,u);else{let b=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,T=this._activeTransform;T.x=p.x-b.x+this._passiveTransform.x,T.y=p.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(T.x,T.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:p,event:l,distance:this._getDragDistance(p),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){let u=this._getTargetHandle(l);u&&!this._disabledHandles.has(u)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(n).withParent(e.parentDragRef||null),this._parentPositions=new Ge(t),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(t=>A(t)),this._handles.forEach(t=>re(t,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){let e=A(n);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ze),e.addEventListener("touchstart",this._pointerDown,ai),e.addEventListener("dragstart",this._nativeDragStart,ze)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?A(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),re(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),re(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){let n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){let n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",hi,ci)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){ge(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),t=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{e.addEventListener("selectstart",hi,ci)}),t){let i=this._rootElement,r=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment("");r.insertBefore(l,i),this._initialTransform=i.style.transform||"",this._preview=new ot(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(r,e)),ei(i,!1,li),this._document.body.appendChild(r.replaceChild(o,i)),this.started.next({source:this,event:n}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(n,e){this._parentDragRef&&e.stopPropagation();let t=this.isDragging(),i=ge(e),r=!i&&e.button!==0,o=this._rootElement,l=me(e),u=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+Qi>Date.now(),p=i?Jt(e):Qt(e);if(l&&l.draggable&&e.type==="mousedown"&&e.preventDefault(),t||r||u||p)return;if(this._handles.length){let O=o.style;this._rootElementTapHighlight=O.webkitTapHighlightColor||"",O.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(O=>this._updateOnScroll(O)),this._boundaryElement&&(this._boundaryRect=ut(this._boundaryElement));let b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,e);let T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(n){ei(this._rootElement,!0,li),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,t=e.getItemIndex(this),i=this._getPointerPositionOnPage(n),r=this._getDragDistance(i),o=e._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:r,dropPoint:i,event:n}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:r,dropPoint:i,event:n}),e.drop(this,t,this._initialIndex,this._initialContainer,o,r,i,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:e},{x:t,y:i}){let r=this._initialContainer._getSiblingContainerFromPosition(this,n,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,n,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,i),this._dropContainer._sortItem(this,n,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,e):this._applyPreviewTransform(n-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let i=o=>{(!o||me(o)===this._preview&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",i),t(),clearTimeout(r))},r=setTimeout(i,e*1.5);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let n=this._placeholderTemplate,e=n?n.template:null,t;return e?(this._placeholderRef=n.viewContainer.createEmbeddedView(e,n.context),this._placeholderRef.detectChanges(),t=_i(this._placeholderRef,this._document)):t=gi(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(n,e,t){let i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,o=ge(t)?t.targetTouches[0]:t,l=this._getViewportScrollPosition(),u=o.pageX-r.left-l.left,p=o.pageY-r.top-l.top;return{x:r.left-n.left+u,y:r.top-n.top+p}}_getPointerPositionOnPage(n){let e=this._getViewportScrollPosition(),t=ge(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,i=t.pageX-e.left,r=t.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let l=this._ownerSVGElement.createSVGPoint();return l.x=i,l.y=r,l.matrixTransform(o.inverse())}}return{x:i,y:r}}_getConstrainedPointerPosition(n){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:i}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if(this.lockAxis==="x"||e==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:u,height:p}=this._getPreviewRect(),b=l.top+o,T=l.bottom-(p-o),O=l.left+r,U=l.right-(u-r);t=di(t,O,U),i=di(i,b,T)}return{x:t,y:i}}_updatePointerDirectionDelta(n){let{x:e,y:t}=n,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-r.x),l=Math.abs(t-r.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=e>r.x?1:-1,r.x=e),l>this._config.pointerDirectionChangeThreshold&&(i.y=t>r.y?1:-1,r.y=t),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,re(this._rootElement,n))}_removeRootElementListeners(n){n.removeEventListener("mousedown",this._pointerDown,ze),n.removeEventListener("touchstart",this._pointerDown,ai),n.removeEventListener("dragstart",this._nativeDragStart,ze)}_applyRootElementTransform(n,e){let t=Ue(n,e),i=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=i.transform&&i.transform!="none"?i.transform:""),i.transform=We(t,this._initialTransform)}_applyPreviewTransform(n,e){let t=this._previewTemplate?.template?void 0:this._initialTransform,i=Ue(n,e);this._preview.setTransform(We(i,t))}_getDragDistance(n){let e=this._pickupPositionOnPage;return e?{x:n.x-e.x,y:n.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:e}=this._passiveTransform;if(n===0&&e===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||t.width===0&&t.height===0)return;let r=i.left-t.left,o=t.right-i.right,l=i.top-t.top,u=t.bottom-i.bottom;i.width>t.width?(r>0&&(n+=r),o>0&&(n-=o)):n=0,i.height>t.height?(l>0&&(e+=l),u>0&&(e-=u)):e=0,(n!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:n})}_getDragStartDelay(n){let e=this.dragStartDelay;return typeof e=="number"?e:ge(n)?e.touch:e?e.mouse:0}_updateOnScroll(n){let e=this._parentPositions.handleScroll(n);if(e){let t=me(n);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&_e(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=it(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,e){let t=this._previewContainer||"global";if(t==="parent")return n;if(t==="global"){let i=this._document;return e||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return A(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(n){return this._handles.find(e=>n.target&&(n.target===e||e.contains(n.target)))}};function di(s,n,e){return Math.max(n,Math.min(e,s))}function ge(s){return s.type[0]==="t"}function hi(s){s.preventDefault()}function Ji(s,n,e){let t=ui(n,s.length-1),i=ui(e,s.length-1);if(t===i)return;let r=s[t],o=i<t?-1:1;for(let l=t;l!==i;l+=o)s[l]=s[l+o];s[i]=r}function ui(s,n){return Math.max(0,Math.min(n,s))}var ct=class{constructor(n,e){this._element=n,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(n){this.withItems(n)}sort(n,e,t,i){let r=this._itemPositions,o=this._getItemIndexFromPointerPosition(n,e,t,i);if(o===-1&&r.length>0)return null;let l=this.orientation==="horizontal",u=r.findIndex(L=>L.drag===n),p=r[o],b=r[u].clientRect,T=p.clientRect,O=u>o?1:-1,U=this._getItemOffsetPx(b,T,O),G=this._getSiblingOffsetPx(u,r,O),Q=r.slice();return Ji(r,u,o),r.forEach((L,Ti)=>{if(Q[Ti]===L)return;let gt=L.drag===n,$e=gt?U:G,_t=gt?n.getPlaceholderElement():L.drag.getRootElement();L.offset+=$e,l?(_t.style.transform=We(`translate3d(${Math.round(L.offset)}px, 0, 0)`,L.initialTransform),_e(L.clientRect,0,$e)):(_t.style.transform=We(`translate3d(0, ${Math.round(L.offset)}px, 0)`,L.initialTransform),_e(L.clientRect,$e,0))}),this._previousSwap.overlaps=rt(T,e,t),this._previousSwap.drag=p.drag,this._previousSwap.delta=l?i.x:i.y,{previousIndex:u,currentIndex:o}}enter(n,e,t,i){let r=i==null||i<0?this._getItemIndexFromPointerPosition(n,e,t):i,o=this._activeDraggables,l=o.indexOf(n),u=n.getPlaceholderElement(),p=o[r];if(p===n&&(p=o[r+1]),!p&&(r==null||r===-1||r<o.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(p=o[0]),l>-1&&o.splice(l,1),p&&!this._dragDropRegistry.isDragging(p)){let b=p.getRootElement();b.parentElement.insertBefore(u,b),o.splice(r,0,n)}else A(this._element).appendChild(u),o.push(n);u.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables.forEach(n=>{let e=n.getRootElement();if(e){let t=this._itemPositions.find(i=>i.drag===n)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===n)}updateOnScroll(n,e){this._itemPositions.forEach(({clientRect:t})=>{_e(t,n,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}_cacheItemPositions(){let n=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:ut(t)}}).sort((e,t)=>n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getItemOffsetPx(n,e,t){let i=this.orientation==="horizontal",r=i?e.left-n.left:e.top-n.top;return t===-1&&(r+=i?e.width-n.width:e.height-n.height),r}_getSiblingOffsetPx(n,e,t){let i=this.orientation==="horizontal",r=e[n].clientRect,o=e[n+t*-1],l=r[i?"width":"height"]*t;if(o){let u=i?"left":"top",p=i?"right":"bottom";t===-1?l-=o.clientRect[u]-r[p]:l+=r[u]-o.clientRect[p]}return l}_shouldEnterAsFirstChild(n,e){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,i=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let o=t[t.length-1].clientRect;return i?n>=o.right:e>=o.bottom}else{let o=t[0].clientRect;return i?n<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(n,e,t,i){let r=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:l,clientRect:u})=>{if(l===n)return!1;if(i){let p=r?i.x:i.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&p===this._previousSwap.delta)return!1}return r?e>=Math.floor(u.left)&&e<Math.floor(u.right):t>=Math.floor(u.top)&&t<Math.floor(u.bottom)});return o===-1||!this._sortPredicate(o,n)?-1:o}},pi=.05,fi=.05,N=function(s){return s[s.NONE=0]="NONE",s[s.UP=1]="UP",s[s.DOWN=2]="DOWN",s}(N||{}),F=function(s){return s[s.NONE=0]="NONE",s[s.LEFT=1]="LEFT",s[s.RIGHT=2]="RIGHT",s}(F||{}),lt=class{constructor(n,e,t,i,r){this._dragDropRegistry=e,this._ngZone=i,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new S,this.entered=new S,this.exited=new S,this.dropped=new S,this.sorted=new S,this.receivingStarted=new S,this.receivingStopped=new S,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=$.EMPTY,this._verticalScrollDirection=N.NONE,this._horizontalScrollDirection=F.NONE,this._stopScrollTimers=new S,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),xt(0,Ze).pipe(J(this._stopScrollTimers)).subscribe(()=>{let o=this._scrollNode,l=this.autoScrollStep;this._verticalScrollDirection===N.UP?o.scrollBy(0,-l):this._verticalScrollDirection===N.DOWN&&o.scrollBy(0,l),this._horizontalScrollDirection===F.LEFT?o.scrollBy(-l,0):this._horizontalScrollDirection===F.RIGHT&&o.scrollBy(l,0)})},this.element=A(n),this._document=t,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Ge(t),this._sortStrategy=new ct(this.element,e),this._sortStrategy.withSortPredicate((o,l)=>this.sortPredicate(o,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,e,t,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(n)),this._sortStrategy.enter(n,e,t,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,e,t,i,r,o,l,u={}){this._reset(),this.dropped.next({item:n,currentIndex:e,previousIndex:t,container:this,previousContainer:i,isPointerOverContainer:r,distance:o,dropPoint:l,event:u})}withItems(n){let e=this._draggables;return this._draggables=n,n.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(i=>i.isDragging()).every(i=>n.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._sortStrategy.direction=n,this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){return this._sortStrategy.orientation=n,this}withScrollableParents(n){let e=A(this.element);return this._scrollableElements=n.indexOf(e)===-1?[e,...n]:n.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,e,t,i){if(this.sortingDisabled||!this._domRect||!ii(this._domRect,pi,e,t))return;let r=this._sortStrategy.sort(n,e,t,i);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,e){if(this.autoScrollDisabled)return;let t,i=N.NONE,r=F.NONE;if(this._parentPositions.positions.forEach((o,l)=>{l===this._document||!o.clientRect||t||ii(o.clientRect,pi,n,e)&&([i,r]=en(l,o.clientRect,this._sortStrategy.direction,n,e),(i||r)&&(t=l))}),!i&&!r){let{width:o,height:l}=this._viewportRuler.getViewportSize(),u={width:o,height:l,top:0,right:o,bottom:l,left:0};i=vi(u,e),r=bi(u,n),t=window}t&&(i!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=t,(i||r)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let n=A(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let n=A(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(n).clientRect}_reset(){this._isDragging=!1;let n=A(this.element).style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(n,e){return this._domRect!=null&&rt(this._domRect,n,e)}_getSiblingContainerFromPosition(n,e,t){return this._siblings.find(i=>i._canReceive(n,e,t))}_canReceive(n,e,t){if(!this._domRect||!rt(this._domRect,e,t)||!this.enterPredicate(n,this))return!1;let i=this._getShadowRoot().elementFromPoint(e,t);if(!i)return!1;let r=A(this.element);return i===r||r.contains(i)}_startReceiving(n,e){let t=this._activeSiblings;!t.has(n)&&e.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(t.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:e}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(n);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let n=it(A(this.element));this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let n=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,n))}};function vi(s,n){let{top:e,bottom:t,height:i}=s,r=i*fi;return n>=e-r&&n<=e+r?N.UP:n>=t-r&&n<=t+r?N.DOWN:N.NONE}function bi(s,n){let{left:e,right:t,width:i}=s,r=i*fi;return n>=e-r&&n<=e+r?F.LEFT:n>=t-r&&n<=t+r?F.RIGHT:F.NONE}function en(s,n,e,t,i){let r=vi(n,i),o=bi(n,t),l=N.NONE,u=F.NONE;if(r){let p=s.scrollTop;r===N.UP?p>0&&(l=N.UP):s.scrollHeight-p>s.clientHeight&&(l=N.DOWN)}if(o){let p=s.scrollLeft;e==="rtl"?o===F.RIGHT?p<0&&(u=F.RIGHT):s.scrollWidth+p>s.clientWidth&&(u=F.LEFT):o===F.LEFT?p>0&&(u=F.LEFT):s.scrollWidth-p>s.clientWidth&&(u=F.RIGHT)}return[l,u]}var Be=pe({passive:!1,capture:!0}),He=new Set,tn=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=Z({type:s,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[Y],decls:0,vars:0,template:function(t,i){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}"],encapsulation:2,changeDetection:0})}}return s})(),nn=(()=>{class s{constructor(e,t){this._ngZone=e,this._appRef=ce(Tt),this._environmentInjector=ce(Et),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new S,this.pointerUp=new S,this.scroll=new S,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Be)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Be)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._loadResets(),this._activeDragInstances.push(e),this._activeDragInstances.length===1)){let i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:r=>this.pointerUp.next(r),options:!0}).set("scroll",{handler:r=>this.scroll.next(r),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Be}),i||this._globalListeners.set("mousemove",{handler:r=>this.pointerMove.next(r),options:Be}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((r,o)=>{this._document.addEventListener(o,r.handler,r.options)})})}}stopDragging(e){let t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){let t=[this.scroll];return e&&e!==this._document&&t.push(new ae(i=>this._ngZone.runOutsideAngular(()=>{let o=l=>{this._activeDragInstances.length&&i.next(l)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),fe(...t)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}_loadResets(){if(!He.has(this._appRef)){He.add(this._appRef);let e=Pt(tn,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{He.delete(this._appRef),He.size===0&&e.destroy()})}}static{this.\u0275fac=function(t){return new(t||s)(I(q),I(j))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),sn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},pt=(()=>{class s{constructor(e,t,i,r){this._document=e,this._ngZone=t,this._viewportRuler=i,this._dragDropRegistry=r}createDrag(e,t=sn){return new at(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new lt(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(t){return new(t||s)(I(j),I(q),I(Yt),I(nn))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),dt=new z("CDK_DRAG_PARENT");var wi=new z("CdkDragHandle"),xi=(()=>{class s{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}constructor(e,t){this.element=e,this._parentDrag=t,this._stateChanges=new S,this._disabled=!1,t?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(t){return new(t||s)(_(K),_(dt,12))}}static{this.\u0275dir=ie({type:s,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[D.HasDecoratorInputTransform,"cdkDragHandleDisabled","disabled",se]},standalone:!0,features:[ne([{provide:wi,useExisting:s}]),le]})}}return s})(),yi=new z("CDK_DRAG_CONFIG"),rn="cdk-drag",Si=new z("CdkDropList"),Ei=(()=>{class s{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,t,i,r,o,l,u,p,b,T,O){this.element=e,this.dropContainer=t,this._ngZone=r,this._viewContainerRef=o,this._dir=u,this._changeDetectorRef=b,this._selfHandle=T,this._parentDrag=O,this._destroyed=new S,this._handles=new ft([]),this.started=new R,this.released=new R,this.ended=new R,this.entered=new R,this.exited=new R,this.dropped=new R,this.moved=new ae(U=>{let G=this._dragRef.moved.pipe(bt(Q=>({source:this,pointerPosition:Q.pointerPosition,event:Q.event,delta:Q.delta,distance:Q.distance}))).subscribe(U);return()=>{G.unsubscribe()}}),this._dragRef=p.createDrag(e,{dragStartThreshold:l&&l.dragStartThreshold!=null?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&l.pointerDirectionChangeThreshold!=null?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,s._dragInstances.push(this),l&&this._assignDefaults(l),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(qe(1),J(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){let t=e.rootElementSelector,i=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let e=s._dragInstances.indexOf(this);e>-1&&s._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let t=this._handles.getValue();t.push(e),this._handles.next(t)}_removeHandle(e){let t=this._handles.getValue(),i=t.indexOf(e);i>-1&&(t.splice(i,1),this._handles.next(t))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,t=e;this.rootElementSelector&&(t=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):A(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let t=this._dir,i=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay=typeof i=="object"&&i?i:je(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(qe(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){if(t.classList.contains(rn)){e.withParent(s._dragInstances.find(i=>i.element.nativeElement===t)?._dragRef||null);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){let{lockAxis:t,dragStartDelay:i,constrainPosition:r,previewClass:o,boundaryElement:l,draggingDisabled:u,rootElementSelector:p,previewContainer:b}=e;this.disabled=u??!1,this.dragStartDelay=i||0,t&&(this.lockAxis=t),r&&(this.constrainPosition=r),o&&(this.previewClass=o),l&&(this.boundaryElement=l),p&&(this.rootElementSelector=p),b&&(this.previewContainer=b)}_setupHandlesListener(){this._handles.pipe(St(e=>{let t=e.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),Ye(e=>fe(...e.map(t=>t._stateChanges.pipe(ve(t))))),J(this._destroyed)).subscribe(e=>{let t=this._dragRef,i=e.element.nativeElement;e.disabled?t.disableHandle(i):t.enableHandle(i)})}static{this.\u0275fac=function(t){return new(t||s)(_(K),_(Si,12),_(j),_(q),_(Qe),_(yi,8),_(nt,8),_(pt),_(Ie),_(wi,10),_(dt,12))}}static{this.\u0275dir=ie({type:s,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){t&2&&be("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[D.None,"cdkDragData","data"],lockAxis:[D.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[D.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[D.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[D.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[D.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[D.HasDecoratorInputTransform,"cdkDragDisabled","disabled",se],constrainPosition:[D.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[D.None,"cdkDragPreviewClass","previewClass"],previewContainer:[D.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[ne([{provide:dt,useExisting:s}]),le,Xe]})}}return s})(),mi=new z("CdkDropListGroup");var on=0,Di=(()=>{class s{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,t,i,r,o,l,u){this.element=e,this._changeDetectorRef=i,this._scrollDispatcher=r,this._dir=o,this._group=l,this._destroyed=new S,this.connectedTo=[],this.id=`cdk-drop-list-${on++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new R,this.entered=new R,this.exited=new R,this.sorted=new R,this._unsortedItems=new Set,this._dropListRef=t.createDropList(e),this._dropListRef.data=this,u&&this._assignDefaults(u),this._dropListRef.enterPredicate=(p,b)=>this.enterPredicate(p.data,b.data),this._dropListRef.sortPredicate=(p,b,T)=>this.sortPredicate(p,b.data,T.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),s._dropLists.push(this),l&&l._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=s._dropLists.indexOf(this);e>-1&&s._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(ve(this._dir.value),J(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{let t=Kt(this.connectedTo).map(i=>{if(typeof i=="string"){let r=s._dropLists.find(o=>o.id===i);return r}return i});if(this._group&&this._group._items.forEach(i=>{t.indexOf(i)===-1&&t.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=je(this.autoScrollStep,2),e.connectedTo(t.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),fe(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:t,draggingDisabled:i,sortingDisabled:r,listAutoScrollDisabled:o,listOrientation:l}=e;this.disabled=i??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=o??!1,this.orientation=l||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static{this.\u0275fac=function(t){return new(t||s)(_(K),_(pt),_(Ie),_(qt),_(nt,8),_(mi,12),_(yi,8))}}static{this.\u0275dir=ie({type:s,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){t&2&&(de("id",i.id),be("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[D.None,"cdkDropListConnectedTo","connectedTo"],data:[D.None,"cdkDropListData","data"],orientation:[D.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[D.None,"cdkDropListLockAxis","lockAxis"],disabled:[D.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",se],sortingDisabled:[D.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",se],enterPredicate:[D.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[D.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[D.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",se],autoScrollStep:[D.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[ne([{provide:mi,useValue:void 0},{provide:Si,useExisting:s}]),le]})}}return s})();var Ii=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=te({type:s})}static{this.\u0275inj=ee({providers:[pt],imports:[Xt]})}}return s})();var oe=ke.base_url+"/encuestas-activacion",Ci=(()=>{class s{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(e){this.http=e}obtenerPorEncuesta(e){return this.http.get(`${oe}/encuesta/${e}`,{headers:this.getToken})}obtenerProgramacion(e){return this.http.get(`${oe}/${e}`,{headers:this.getToken})}nuevaProgramacion(e){return this.http.post(oe,e,{headers:this.getToken})}actualizarProgramacion(e,t){return this.http.patch(`${oe}/${e}`,t,{headers:this.getToken})}eliminarProgramacion(e){return this.http.delete(`${oe}/${e}`,{headers:this.getToken})}verificarAhora(){return this.http.post(`${oe}/verificar`,{},{headers:this.getToken})}static{this.\u0275fac=function(t){return new(t||s)(I(Pe))}}static{this.\u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var mt=(s,n)=>n.id,ln=s=>["/dashboard/reportes/generales",s],dn=s=>({"opacity-60":s}),hn=s=>({"opacity-50":s});function un(s,n){if(s&1&&(a(0,"a",38),v(),a(1,"svg",16),f(2,"path",39)(3,"path",40),c(),E(),a(4,"span",18),h(5,"Ver encuesta"),c()()),s&2){let e=m();It("routerLink","/public/encuesta/",e.idEncuesta,"")}}function pn(s,n){if(s&1){let e=C();a(0,"button",41),w("click",function(){x(e);let i=m();return y(i.encuestasService.abrirAbm("editar",i.encuesta))}),v(),a(1,"svg",16),f(2,"path",42),c(),E(),a(3,"span",18),h(4,"Editar encuesta"),c()()}}function mn(s,n){if(s&1){let e=C();a(0,"button",43),w("click",function(){x(e);let i=m();return y(i.activarDesactivarEncuesta())}),v(),a(1,"svg",16),f(2,"path",44),c(),h(3),c()}if(s&2){let e=m();g("ngClass",(e.encuesta==null?null:e.encuesta.estado)==="Activa"?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"),d(2),de("d",(e.encuesta==null?null:e.encuesta.estado)==="Activa"?"M6 18L18 6M6 6l12 12":"M5 13l4 4L19 7"),d(),P(" ",(e.encuesta==null?null:e.encuesta.estado)==="Activa"?"Desactivar":"Activar"," encuesta ")}}function gn(s,n){if(s&1){let e=C();a(0,"div",57)(1,"h3",58),h(2),c(),a(3,"div",59)(4,"div")(5,"label",60),h(6,"Fecha y hora de inicio"),c(),a(7,"input",61),W("ngModelChange",function(i){x(e);let r=m(2);return H(r.programacionForm.fechaInicio,i)||(r.programacionForm.fechaInicio=i),y(i)}),c()(),a(8,"div")(9,"label",60),h(10,"Fecha y hora de fin"),c(),a(11,"input",61),W("ngModelChange",function(i){x(e);let r=m(2);return H(r.programacionForm.fechaFin,i)||(r.programacionForm.fechaFin=i),y(i)}),c()()(),a(12,"div",62)(13,"button",63),w("click",function(){x(e);let i=m(2);return y(i.guardarProgramacion())}),h(14),c(),a(15,"button",64),w("click",function(){x(e);let i=m(2);return y(i.cerrarFormProgramacion())}),h(16," Cancelar "),c()()()}if(s&2){let e=m(2);d(2),P(" ",e.editandoProgramacion?"Editar programaci\xF3n":"Nueva programaci\xF3n"," "),d(5),B("ngModel",e.programacionForm.fechaInicio),d(4),B("ngModel",e.programacionForm.fechaFin),d(3),P(" ",e.editandoProgramacion?"Actualizar":"Guardar"," ")}}function _n(s,n){if(s&1){let e=C();a(0,"div",66)(1,"div",67)(2,"div",68)(3,"div",69),v(),a(4,"svg",70),f(5,"path",27),c(),E(),a(6,"span",71),h(7,"Programaci\xF3n autom\xE1tica"),c()(),a(8,"div",72)(9,"div")(10,"span",7),h(11,"Inicio:"),c(),h(12),Ee(13,"date"),c(),a(14,"div")(15,"span",7),h(16,"Fin:"),c(),h(17),Ee(18,"date"),c()()(),a(19,"div",73)(20,"button",74),w("click",function(){let i=x(e).$implicit,r=m(3);return y(r.editarProgramacion(i))}),v(),a(21,"svg",16),f(22,"path",42),c()(),E(),a(23,"button",75),w("click",function(){let i=x(e).$implicit,r=m(3);return y(r.eliminarProgramacion(i))}),v(),a(24,"svg",16),f(25,"path",76),c()()()()()}if(s&2){let e=n.$implicit;d(12),P(" ",De(13,2,e.fechaInicio,"dd/MM/yyyy HH:mm")," "),d(5),P(" ",De(18,5,e.fechaFin,"dd/MM/yyyy HH:mm")," ")}}function fn(s,n){if(s&1&&(a(0,"div",65),we(1,_n,26,8,"div",66,mt),c()),s&2){let e=m(2);d(),xe(e.programaciones)}}function vn(s,n){if(s&1){let e=C();a(0,"div",77)(1,"div",78),v(),a(2,"svg",79),f(3,"path",48),c()(),E(),a(4,"p",80),h(5,"No hay programaciones"),c(),a(6,"p",81),h(7,"La encuesta se activar\xE1/desactivar\xE1 manualmente"),c(),a(8,"button",82),w("click",function(){x(e);let i=m(2);return y(i.abrirFormProgramacion())}),v(),a(9,"svg",16),f(10,"path",53),c(),E(),a(11,"span"),h(12,"Crear primera programaci\xF3n"),c()()()}}function bn(s,n){if(s&1){let e=C();a(0,"div",20)(1,"div",45)(2,"h2",46),v(),a(3,"svg",47),f(4,"path",48),c(),E(),a(5,"span",49),h(6,"Programaciones "),a(7,"span",50),h(8,"Autom\xE1ticas"),c(),a(9,"span",51),h(10),c()()(),a(11,"button",52),w("click",function(){x(e);let i=m();return y(i.abrirFormProgramacion())}),v(),a(12,"svg",16),f(13,"path",53),c(),E(),a(14,"span"),h(15,"Nueva programaci\xF3n"),c()()(),k(16,gn,17,4,"div",54)(17,fn,3,0,"div",55)(18,vn,13,0,"div",56),c()}if(s&2){let e=m();d(10),P("(",e.programaciones.length,")"),d(6),g("ngIf",e.mostrarFormProgramacion),d(),g("ngIf",e.programaciones.length>0),d(),g("ngIf",e.programaciones.length===0&&!e.mostrarFormProgramacion)}}function wn(s,n){if(s&1&&(a(0,"option",91),h(1),c()),s&2){let e=n.$implicit;g("value",e.id),d(),Ct(" ",e.apellido,", ",e.nombre," (",e.usuario,") ")}}function xn(s,n){if(s&1){let e=C();a(0,"div",88)(1,"h3",58),h(2,"Asignar usuario a la encuesta"),c(),a(3,"div",89)(4,"label",60),h(5,"Seleccionar usuario"),c(),a(6,"select",90),W("ngModelChange",function(i){x(e);let r=m(2);return H(r.usuarioSeleccionado,i)||(r.usuarioSeleccionado=i),y(i)}),a(7,"option",91),h(8,"-- Seleccionar usuario --"),c(),k(9,wn,2,4,"option",92),c()(),a(10,"div",62)(11,"button",93),w("click",function(){x(e);let i=m(2);return y(i.asignarUsuario())}),h(12," Asignar "),c(),a(13,"button",64),w("click",function(){x(e);let i=m(2);return y(i.cerrarFormAsignacion())}),h(14," Cancelar "),c()()()}if(s&2){let e=m(2);d(6),B("ngModel",e.usuarioSeleccionado),d(),g("value",null),d(2),g("ngForOf",e.usuariosDisponibles)}}function yn(s,n){if(s&1){let e=C();a(0,"div",96)(1,"div",97)(2,"div",98)(3,"div",99),h(4),c(),a(5,"div",100)(6,"p",101),h(7),c(),a(8,"p",102),h(9),c()()(),a(10,"button",103),w("click",function(){let i=x(e).$implicit,r=m(3);return y(r.removerUsuario(i))}),v(),a(11,"svg",16),f(12,"path",104),c()()()()}if(s&2){let e=n.$implicit;d(4),ye(" ",e.usuario.apellido.charAt(0),"",e.usuario.nombre.charAt(0)," "),d(3),ye("",e.usuario.apellido,", ",e.usuario.nombre," "),d(2),P("DNI: ",e.dni,"")}}function Sn(s,n){if(s&1&&(a(0,"div",94),k(1,yn,13,5,"div",95),c()),s&2){let e=m(2);d(),g("ngForOf",e.usuariosAsignados)}}function En(s,n){if(s&1){let e=C();a(0,"div",77)(1,"div",105),v(),a(2,"svg",106),f(3,"path",84),c()(),E(),a(4,"p",80),h(5,"No hay usuarios asignados"),c(),a(6,"p",81),h(7,"Los usuarios asignados podr\xE1n visualizar esta encuesta"),c(),a(8,"button",107),w("click",function(){x(e);let i=m(2);return y(i.abrirFormAsignacion())}),v(),a(9,"svg",16),f(10,"path",53),c(),E(),a(11,"span"),h(12,"Asignar primer usuario"),c()()()}}function Dn(s,n){if(s&1){let e=C();a(0,"div",20)(1,"div",45)(2,"h2",46),v(),a(3,"svg",83),f(4,"path",84),c(),E(),a(5,"span",49),h(6,"Usuarios "),a(7,"span",50),h(8,"Asignados"),c(),a(9,"span",51),h(10),c()()(),a(11,"button",85),w("click",function(){x(e);let i=m();return y(i.abrirFormAsignacion())}),v(),a(12,"svg",16),f(13,"path",53),c(),E(),a(14,"span"),h(15,"Asignar usuario"),c()()(),k(16,xn,15,3,"div",86)(17,Sn,2,1,"div",87)(18,En,13,0,"div",56),c()}if(s&2){let e=m();d(10),P("(",e.usuariosAsignados.length,")"),d(6),g("ngIf",e.mostrarFormAsignacion),d(),g("ngIf",e.usuariosAsignados.length>0),d(),g("ngIf",e.usuariosAsignados.length===0&&!e.mostrarFormAsignacion)}}function In(s,n){if(s&1){let e=C();a(0,"div",45)(1,"h2",46),f(2,"img",108),a(3,"span",49),h(4,"Preguntas "),a(5,"span",51),h(6),c()()(),a(7,"button",109),w("click",function(){x(e);let i=m();return y(i.preguntasService.abrirAbm("crear",null,i.encuesta))}),v(),a(8,"svg",16),f(9,"path",53),c(),E(),a(10,"span"),h(11,"Nueva pregunta"),c()()()}if(s&2){let e=m();d(6),P("(",e.encuesta==null?null:e.encuesta.Preguntas.length,")")}}function Cn(s,n){s&1&&(a(0,"span",125),v(),a(1,"svg",126),f(2,"path",127),c(),E(),a(3,"span",50),h(4,"M\xFAltiples respuestas"),c(),a(5,"span",128),h(6,"M\xFAltiple"),c()())}function Tn(s,n){if(s&1){let e=C();a(0,"button",133),w("click",function(){x(e);let i=m(2).$implicit,r=m(2);return y(r.eliminarPregunta(i))}),v(),a(1,"svg",16),f(2,"path",104),c()()}}function Pn(s,n){if(s&1){let e=C();a(0,"button",134),w("click",function(){x(e);let i=m(2).$implicit,r=m(2);return y(r.activarPregunta(i))}),v(),a(1,"svg",16),f(2,"path",135),c()()}}function kn(s,n){if(s&1){let e=C();a(0,"div",129)(1,"button",130),w("click",function(){x(e);let i=m().$implicit,r=m(2);return y(r.preguntasService.abrirAbm("editar",i,r.encuesta))}),v(),a(2,"svg",16),f(3,"path",42),c()(),k(4,Tn,3,0,"button",131)(5,Pn,3,0,"button",132),c()}if(s&2){let e=m().$implicit;d(4),g("ngIf",e.activo),d(),g("ngIf",!e.activo)}}function Rn(s,n){if(s&1){let e=C();a(0,"button",144),w("click",function(){x(e);let i=m(2).$implicit,r=m(3);return y(r.cambiarEstadoRespuesta(i,!1))}),v(),a(1,"svg",145),f(2,"path",104),c()()}}function An(s,n){if(s&1){let e=C();a(0,"button",146),w("click",function(){x(e);let i=m(2).$implicit,r=m(3);return y(r.cambiarEstadoRespuesta(i,!0))}),v(),a(1,"svg",145),f(2,"path",135),c()()}}function Fn(s,n){if(s&1&&(a(0,"div",141),k(1,Rn,3,0,"button",142)(2,An,3,0,"button",143),c()),s&2){let e=m().$implicit;d(),g("ngIf",e.activo),d(),g("ngIf",!e.activo)}}function Mn(s,n){if(s&1&&(a(0,"div",124)(1,"div",98)(2,"div",114),v(),a(3,"svg",136),f(4,"path",116),c(),E(),a(5,"span",137),h(6),c()(),a(7,"p",138),h(8),c(),a(9,"span",139),h(10),c()(),k(11,Fn,3,2,"div",140),c()),s&2){let e=n.$implicit,t=m(3);g("ngClass",Se(6,hn,!e.activo)),d(6),P(" ",e.orden," "),d(2),he(e.descripcion),d(),g("ngClass",e.activo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),d(),P(" ",e.activo?"Activa":"Inactiva"," "),d(),g("ngIf",t.authService.isAdmin)}}function On(s,n){if(s&1){let e=C();a(0,"div",111)(1,"div",112)(2,"div",113)(3,"div",114),v(),a(4,"svg",115),f(5,"path",116),c(),E(),a(6,"span",117),h(7),c()(),a(8,"h3",118),h(9),c()(),a(10,"div",119)(11,"span",120),h(12),c(),k(13,Cn,7,0,"span",121),c(),k(14,kn,6,2,"div",122),c(),a(15,"div",123),w("cdkDropListDropped",function(i){let r=x(e).$implicit,o=m(2);return y(o.dropRespuesta(i,r))}),we(16,Mn,12,8,"div",124,mt),c()()}if(s&2){let e=n.$implicit,t=m(2);g("ngClass",Se(7,dn,!e.activo)),d(7),P(" ",e.orden," "),d(2),he(e.descripcion),d(2),g("ngClass",e.activo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),d(),P(" ",e.activo?"Activa":"Inactiva"," "),d(),g("ngIf",e.multiplesRespuestas),d(),g("ngIf",t.authService.isAdmin),d(2),xe(e.Respuestas)}}function Ln(s,n){if(s&1){let e=C();a(0,"div",110),w("cdkDropListDropped",function(i){x(e);let r=m();return y(r.dropPregunta(i))}),we(1,On,18,9,"div",111,mt),c()}if(s&2){let e=m();d(),xe(e.preguntasFiltradas)}}function Nn(s,n){if(s&1){let e=C();a(0,"button",151),w("click",function(){x(e);let i=m(2);return y(i.preguntasService.abrirAbm("crear",null,i.encuesta))}),v(),a(1,"svg",16),f(2,"path",53),c(),E(),a(3,"span"),h(4,"Agregar primera pregunta"),c()()}}function Vn(s,n){if(s&1&&(a(0,"div",147)(1,"div",148),f(2,"img",149),c(),a(3,"p",80),h(4,"No hay preguntas"),c(),a(5,"p",81),h(6,"Comienza agregando la primera pregunta a esta encuesta"),c(),k(7,Nn,5,0,"button",150),c()),s&2){let e=m();d(7),g("ngIf",e.authService.isAdmin)}}function jn(s,n){if(s&1&&(a(0,"div",147)(1,"div",148),v(),a(2,"svg",152),f(3,"path",153),c()(),E(),a(4,"p",80),h(5),c(),a(6,"p",154),h(7,"Prueba cambiando el filtro para ver otras preguntas"),c()()),s&2){let e=m();d(5),P("No hay preguntas ",e.filtroActivo==="true"?"activas":"inactivas","")}}var or=(()=>{class s{constructor(e,t,i,r,o,l,u,p,b){this.authService=e,this.activatedRoute=t,this.encuestasService=i,this.preguntasService=r,this.encuestasActivacionService=o,this.usuariosService=l,this.alertService=u,this.toastr=p,this.router=b,this.filtroActivo="all",this.programaciones=[],this.mostrarFormProgramacion=!1,this.programacionForm={fechaInicio:"",fechaFin:""},this.editandoProgramacion=null,this.usuariosAsignados=[],this.usuariosDisponibles=[],this.mostrarFormAsignacion=!1,this.usuarioSeleccionado=null}ngOnInit(){this.alertService.loading(),this.activatedRoute.params.subscribe({next:({id:e})=>{this.idEncuesta=e,this.obtenerEncuesta()},error:({error:e})=>{this.alertService.errorApi(e.message)}})}get preguntasFiltradas(){return this.encuesta?.Preguntas?this.filtroActivo==="all"?this.encuesta.Preguntas:this.filtroActivo==="true"?this.encuesta.Preguntas.filter(e=>!!e.activo):this.encuesta.Preguntas.filter(e=>!e.activo):[]}get cantidadPreguntasActivas(){return this.encuesta?.Preguntas?this.encuesta.Preguntas.filter(e=>!!e.activo).length:0}get cantidadPreguntasInactivas(){return this.encuesta?.Preguntas?this.encuesta.Preguntas.filter(e=>!e.activo).length:0}obtenerEncuesta(){this.encuestasService.obtenerEncuesta(this.idEncuesta).subscribe({next:({encuesta:e})=>{this.encuesta=e,this.ordenarPreguntas(),console.log(this.encuesta),this.cargarProgramaciones(),this.cargarUsuariosAsignados(),this.alertService.close()},error:({error:e})=>{this.alertService.errorApi(e.message)}})}ordenarPreguntas(){this.encuesta&&this.encuesta.Preguntas&&(this.encuesta.Preguntas.sort((e,t)=>e.orden-t.orden),this.encuesta.Preguntas.forEach(e=>{e.Respuestas&&e.Respuestas.sort((t,i)=>t.orden-i.orden)}))}cargarProgramaciones(){this.encuestasActivacionService.obtenerPorEncuesta(this.idEncuesta).subscribe({next:({programaciones:e})=>{this.programaciones=e},error:({error:e})=>{this.alertService.errorApi(e.message)}})}abrirFormProgramacion(){this.mostrarFormProgramacion=!0,this.programacionForm={fechaInicio:"",fechaFin:""},this.editandoProgramacion=null}cerrarFormProgramacion(){this.mostrarFormProgramacion=!1,this.programacionForm={fechaInicio:"",fechaFin:""},this.editandoProgramacion=null}guardarProgramacion(){if(!this.programacionForm.fechaInicio||!this.programacionForm.fechaFin){this.toastr.error("Completa todos los campos","Error");return}let e={encuestaId:Number(this.idEncuesta),fechaInicio:new Date(this.programacionForm.fechaInicio).toISOString(),fechaFin:new Date(this.programacionForm.fechaFin).toISOString(),creatorUserId:this.encuesta.creatorUserId};this.editandoProgramacion?this.encuestasActivacionService.actualizarProgramacion(this.editandoProgramacion.id.toString(),e).subscribe({next:()=>{this.toastr.success("Programaci\xF3n actualizada","\xC9xito"),this.cargarProgramaciones(),this.cerrarFormProgramacion()},error:({error:t})=>{this.alertService.errorApi(t.message)}}):this.encuestasActivacionService.nuevaProgramacion(e).subscribe({next:()=>{this.toastr.success("Programaci\xF3n creada","\xC9xito"),this.cargarProgramaciones(),this.cerrarFormProgramacion()},error:({error:t})=>{this.alertService.errorApi(t.message)}})}editarProgramacion(e){this.editandoProgramacion=e,this.programacionForm={fechaInicio:new Date(e.fechaInicio).toISOString().slice(0,16),fechaFin:new Date(e.fechaFin).toISOString().slice(0,16)},this.mostrarFormProgramacion=!0}eliminarProgramacion(e){this.alertService.question({msg:"Eliminando programaci\xF3n",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{t&&(this.alertService.loading(),this.encuestasActivacionService.eliminarProgramacion(e.id.toString()).subscribe({next:()=>{this.toastr.success("Programaci\xF3n eliminada","\xC9xito"),this.cargarProgramaciones(),this.alertService.close()},error:({error:i})=>{this.alertService.errorApi(i.message)}}))})}activarDesactivarEncuesta(){this.alertService.question({msg:`${this.encuesta.estado==="Activa"?"Desactivando":"Activando"} la encuesta`,buttonText:"Aceptar"}).then(({isConfirmed:e})=>{if(e){this.alertService.loading();let t=this.encuesta.estado==="Activa"?"Inactiva":"Activa";this.encuestasService.actualizarEncuesta(this.idEncuesta,{estado:t}).subscribe({next:()=>{this.alertService.close(),this.encuesta.estado=t,this.toastr.success("Actualizada correctamente","Encuesta")},error:({error:i})=>this.alertService.errorApi(i.message)})}})}actualizarEncuesta(e){this.encuesta=e,this.ordenarPreguntas()}agregarPregunta(e){this.encuesta.Preguntas.push(e),this.ordenarPreguntas()}actualizarPregunta(e){this.encuesta.Preguntas=this.encuesta.Preguntas.map(t=>t.id===e.id?e:t),this.ordenarPreguntas(),console.log(this.encuesta)}eliminarPregunta(e){let t=e.activo?"Dando de baja pregunta":"Pregunta ya est\xE1 inactiva";this.alertService.question({msg:t,buttonText:"Aceptar"}).then(({isConfirmed:i})=>{i&&e.activo&&(this.alertService.loading(),this.preguntasService.eliminarPregunta(e.id).subscribe({next:()=>{this.toastr.success("Dada de baja correctamente","Pregunta"),this.obtenerEncuesta()},error:({error:r})=>this.alertService.errorApi(r.message)}))})}activarPregunta(e){this.alertService.question({msg:"Activando pregunta",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{t&&(this.alertService.loading(),this.preguntasService.activarPregunta(e.id).subscribe({next:()=>{this.toastr.success("Activada correctamente","Pregunta"),this.obtenerEncuesta()},error:({error:i})=>this.alertService.errorApi(i.message)}))})}cambiarEstadoRespuesta(e,t){let i=t?"Activando":"Desactivando";this.alertService.question({msg:`${i} respuesta`,buttonText:"Aceptar"}).then(({isConfirmed:r})=>{r&&(this.alertService.loading(),(t?this.preguntasService.activarRespuesta(e.id):this.preguntasService.desactivarRespuesta(e.id)).subscribe({next:()=>{this.toastr.success(`${i} correctamente`,"Respuesta"),this.obtenerEncuesta()},error:({error:l})=>this.alertService.errorApi(l.message)}))})}eliminarEncuesta(){this.alertService.question({msg:"Eliminando encuesta",buttonText:"Aceptar"}).then(({isConfirmed:e})=>{e&&(this.alertService.loading(),this.encuestasService.eliminarEncuesta(this.idEncuesta).subscribe({next:()=>{this.toastr.success("Eliminada correctamente","Encuesta"),this.alertService.close(),this.router.navigate(["/dashboard/encuestas"])},error:({error:t})=>this.alertService.errorApi(t.message)}))})}reordenarPregunta(e,t){this.alertService.loading(),this.preguntasService.reordenarPregunta(e.id,t).subscribe({next:()=>{this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Pregunta")},error:({error:i})=>this.alertService.errorApi(i.message)})}reordenarRespuesta(e,t){this.alertService.loading(),this.preguntasService.reordenarRespuesta(e.id,t).subscribe({next:()=>{this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Respuesta")},error:({error:i})=>this.alertService.errorApi(i.message)})}cargarUsuariosAsignados(){this.encuestasService.obtenerUsuariosAsignados(this.idEncuesta).subscribe({next:({usuarios:e})=>{this.usuariosAsignados=e},error:({error:e})=>{this.alertService.errorApi(e.message)}})}cargarUsuariosDisponibles(){this.usuariosService.listarUsuarios(1,"apellido").subscribe({next:({usuarios:e})=>{let t=this.usuariosAsignados.map(i=>i.usuario.id);this.usuariosDisponibles=e.filter(i=>!t.includes(i.id)&&i.activo)},error:({error:e})=>{this.alertService.errorApi(e.message)}})}abrirFormAsignacion(){this.cargarUsuariosDisponibles(),this.mostrarFormAsignacion=!0,this.usuarioSeleccionado=null}cerrarFormAsignacion(){this.mostrarFormAsignacion=!1,this.usuarioSeleccionado=null}asignarUsuario(){if(!this.usuarioSeleccionado){this.toastr.error("Selecciona un usuario","Error");return}this.alertService.loading(),this.encuestasService.asignarUsuario(this.idEncuesta,this.usuarioSeleccionado).subscribe({next:()=>{this.toastr.success("Usuario asignado correctamente","\xC9xito"),this.cargarUsuariosAsignados(),this.cerrarFormAsignacion(),this.alertService.close()},error:({error:e})=>{this.alertService.errorApi(e.message)}})}removerUsuario(e){this.alertService.question({msg:`\xBFRemover a ${e.usuario.apellido}, ${e.usuario.nombre} de esta encuesta?`,buttonText:"Aceptar"}).then(({isConfirmed:t})=>{t&&(this.alertService.loading(),this.encuestasService.removerUsuario(this.idEncuesta,e.usuario.id).subscribe({next:()=>{this.toastr.success("Usuario removido correctamente","\xC9xito"),this.cargarUsuariosAsignados(),this.alertService.close()},error:({error:i})=>{this.alertService.errorApi(i.message)}}))})}dropPregunta(e){if(e.previousIndex===e.currentIndex)return;let t=this.preguntasFiltradas[e.previousIndex],i=this.preguntasFiltradas[e.currentIndex],r=t.orden,o=i.orden,l=o<r?"arriba":"abajo",u=Math.abs(o-r);console.log("Moviendo pregunta:",{pregunta:t.descripcion,ordenOrigen:r,ordenDestino:o,direccion:l,steps:u,previousIndex:e.previousIndex,currentIndex:e.currentIndex}),this.alertService.loading(),this.ejecutarReordenamientoPreguntas(t.id,l,u,0)}ejecutarReordenamientoPreguntas(e,t,i,r){if(r>=i){this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Pregunta");return}this.preguntasService.reordenarPregunta(e,t).subscribe({next:()=>{this.ejecutarReordenamientoPreguntas(e,t,i,r+1)},error:({error:o})=>{this.alertService.errorApi(o.message)}})}dropRespuesta(e,t){if(e.previousIndex===e.currentIndex)return;let i=t.Respuestas[e.previousIndex],r=t.Respuestas[e.currentIndex],o=i.orden,l=r.orden,u=l<o?"arriba":"abajo",p=Math.abs(l-o);console.log("Moviendo respuesta:",{respuesta:i.descripcion,ordenOrigen:o,ordenDestino:l,direccion:u,steps:p,previousIndex:e.previousIndex,currentIndex:e.currentIndex}),this.alertService.loading(),this.ejecutarReordenamientoRespuestas(i.id,u,p,0)}ejecutarReordenamientoRespuestas(e,t,i,r){if(r>=i){this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Respuesta");return}this.preguntasService.reordenarRespuesta(e,t).subscribe({next:()=>{this.ejecutarReordenamientoRespuestas(e,t,i,r+1)},error:({error:o})=>{this.alertService.errorApi(o.message)}})}static{this.\u0275fac=function(t){return new(t||s)(_(Re),_(Mt),_(Ht),_(Ve),_(Ci),_(Ut),_(Le),_(Ne),_(Ot))}}static{this.\u0275cmp=Z({type:s,selectors:[["app-detalles-encuestas"]],standalone:!0,features:[Y],decls:61,vars:28,consts:[[3,"updateEvent"],[3,"insertEvent","updateEvent"],[1,"container","mx-auto","px-3","sm:px-4","py-4","sm:py-6"],[1,"mb-4","sm:mb-6"],["routerLink","/dashboard/encuestas",1,"flex","items-center","gap-2","px-3","sm:px-4","py-2","bg-gray-100","hover:bg-gray-200","text-gray-700","rounded-lg","transition-colors","border","border-gray-300","duration-200","text-sm","sm:text-base"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"],[1,"font-medium"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200","p-4","sm:p-6","md:p-8","mb-4","sm:mb-6"],[1,"text-center","mb-4","sm:mb-6"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-800","mb-2"],[1,"text-sm","sm:text-base","text-gray-600","mb-3","sm:mb-4","px-2"],[1,"inline-flex","items-center","px-3","sm:px-4","py-1","sm:py-1.5","rounded-full","text-xs","sm:text-sm","font-semibold",3,"ngClass"],[1,"flex","flex-col","gap-2","sm:gap-3","pt-4","sm:pt-6","border-t","border-gray-200"],["class","flex items-center justify-center gap-2 px-4 sm:px-5 py-2.5 sm:py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all duration-200 shadow hover:shadow-lg text-sm sm:text-base",3,"routerLink",4,"ngIf"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-5","py-2.5","sm:py-3","bg-purple-500","hover:bg-purple-600","text-white","rounded-lg","transition-all","duration-200","shadow","hover:shadow-lg","text-sm","sm:text-base",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"font-semibold"],["class","flex items-center justify-center gap-2 px-4 sm:px-5 py-2.5 sm:py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-all duration-200 shadow hover:shadow-lg text-sm sm:text-base",3,"click",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200","p-4","sm:p-6","mb-4","sm:mb-6"],[1,"flex","flex-col","gap-4","sm:gap-6"],[1,"space-y-2","sm:space-y-3","text-xs","sm:text-sm"],[1,"flex","items-center","gap-2","sm:gap-3","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","text-blue-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"break-words"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["class","flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 text-white font-medium rounded-lg shadow-sm hover:shadow transition-all duration-200 text-sm sm:text-base w-full sm:w-auto",3,"ngClass","click",4,"ngIf"],["class","bg-white rounded-lg shadow border border-gray-200 p-4 sm:p-6 mb-4 sm:mb-6",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200","p-4","sm:p-6"],["class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 pb-4 sm:pb-5 mb-4 sm:mb-6 border-b border-gray-200",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-2","sm:gap-3","mb-4","sm:mb-6","pb-4","sm:pb-5","border-b","border-gray-200"],[1,"text-xs","sm:text-sm","font-medium","text-gray-700"],[1,"flex","gap-2","overflow-x-auto"],[1,"px-3","sm:px-4","py-1.5","sm:py-2","rounded-lg","font-medium","text-xs","sm:text-sm","transition-all","duration-200","whitespace-nowrap",3,"click","ngClass"],["cdkDropList","","class","space-y-3 sm:space-y-4",3,"cdkDropListDropped",4,"ngIf"],["class","text-center py-12 sm:py-16",4,"ngIf"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-5","py-2.5","sm:py-3","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-all","duration-200","shadow","hover:shadow-lg","text-sm","sm:text-base",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-5","py-2.5","sm:py-3","bg-orange-500","hover:bg-orange-600","text-white","rounded-lg","transition-all","duration-200","shadow","hover:shadow-lg","text-sm","sm:text-base",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-6","py-2","sm:py-2.5","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base","w-full","sm:w-auto",3,"click","ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3","sm:gap-4","pb-4","sm:pb-5","mb-4","sm:mb-6","border-b","border-gray-200"],[1,"text-lg","sm:text-xl","md:text-2xl","font-bold","text-gray-800","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-teal-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-base","sm:text-lg","md:text-2xl"],[1,"hidden","sm:inline"],[1,"text-gray-500","font-normal","text-sm","sm:text-base"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-5","py-2","sm:py-2.5","bg-teal-500","hover:bg-teal-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base","w-full","sm:w-auto",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","bg-teal-50 rounded-lg border border-teal-200 p-4 sm:p-6 mb-4 sm:mb-6",4,"ngIf"],["class","space-y-3 sm:space-y-4",4,"ngIf"],["class","text-center py-8 sm:py-12",4,"ngIf"],[1,"bg-teal-50","rounded-lg","border","border-teal-200","p-4","sm:p-6","mb-4","sm:mb-6"],[1,"text-base","sm:text-lg","font-semibold","text-gray-800","mb-3","sm:mb-4"],[1,"grid","grid-cols-1","gap-3","sm:gap-4","mb-4"],[1,"block","text-xs","sm:text-sm","font-medium","text-gray-700","mb-1.5","sm:mb-2"],["type","datetime-local",1,"w-full","px-3","sm:px-4","py-2","sm:py-2.5","text-sm","sm:text-base","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-teal-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3"],[1,"px-4","sm:px-6","py-2","sm:py-2.5","bg-teal-500","hover:bg-teal-600","text-white","rounded-lg","transition-colors","duration-200","font-medium","text-sm","sm:text-base",3,"click"],[1,"px-4","sm:px-6","py-2","sm:py-2.5","bg-gray-500","hover:bg-gray-600","text-white","rounded-lg","transition-colors","duration-200","font-medium","text-sm","sm:text-base",3,"click"],[1,"space-y-3","sm:space-y-4"],[1,"bg-gradient-to-r","from-teal-50","to-white","rounded-lg","border","border-teal-200","p-3","sm:p-4","md:p-5"],[1,"flex","flex-col","gap-3","sm:gap-4"],[1,"flex-1"],[1,"flex","items-center","gap-2","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:w-5","sm:h-5","text-teal-600"],[1,"font-semibold","text-gray-800","text-sm","sm:text-base"],[1,"grid","grid-cols-1","gap-1.5","sm:gap-2","text-xs","sm:text-sm","text-gray-700","ml-6"],[1,"flex","gap-2","justify-end"],["title","Editar programaci\xF3n",1,"p-2","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["title","Eliminar programaci\xF3n",1,"p-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-center","py-8","sm:py-12"],[1,"w-16","h-16","sm:w-20","sm:h-20","mx-auto","mb-3","sm:mb-4","bg-teal-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","sm:w-10","sm:h-10","text-teal-500"],[1,"text-gray-600","text-base","sm:text-lg","font-semibold","mb-1"],[1,"text-gray-500","text-xs","sm:text-sm","mb-4","sm:mb-6","px-4"],[1,"inline-flex","items-center","gap-2","px-4","sm:px-6","py-2.5","sm:py-3","bg-teal-500","hover:bg-teal-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","sm:w-6","sm:h-6","text-indigo-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-5","py-2","sm:py-2.5","bg-indigo-500","hover:bg-indigo-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base","w-full","sm:w-auto",3,"click"],["class","bg-indigo-50 rounded-lg border border-indigo-200 p-4 sm:p-6 mb-4 sm:mb-6",4,"ngIf"],["class","space-y-2 sm:space-y-3",4,"ngIf"],[1,"bg-indigo-50","rounded-lg","border","border-indigo-200","p-4","sm:p-6","mb-4","sm:mb-6"],[1,"mb-4"],[1,"w-full","px-3","sm:px-4","py-2","sm:py-2.5","text-sm","sm:text-base","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-transparent",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"px-4","sm:px-6","py-2","sm:py-2.5","bg-indigo-500","hover:bg-indigo-600","text-white","rounded-lg","transition-colors","duration-200","font-medium","text-sm","sm:text-base",3,"click"],[1,"space-y-2","sm:space-y-3"],["class","bg-gradient-to-r from-indigo-50 to-white rounded-lg border border-indigo-200 p-3 sm:p-4",4,"ngFor","ngForOf"],[1,"bg-gradient-to-r","from-indigo-50","to-white","rounded-lg","border","border-indigo-200","p-3","sm:p-4"],[1,"flex","items-center","justify-between","gap-2"],[1,"flex","items-center","gap-2","sm:gap-3","flex-1","min-w-0"],[1,"w-8","h-8","sm:w-10","sm:h-10","bg-indigo-500","rounded-full","flex","items-center","justify-center","text-white","font-bold","text-xs","sm:text-sm","flex-shrink-0"],[1,"min-w-0"],[1,"font-semibold","text-gray-800","text-sm","sm:text-base","truncate"],[1,"text-xs","sm:text-sm","text-gray-600"],["title","Remover usuario",1,"p-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg","transition-colors","duration-200","flex-shrink-0",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"w-16","h-16","sm:w-20","sm:h-20","mx-auto","mb-3","sm:mb-4","bg-indigo-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","sm:w-10","sm:h-10","text-indigo-500"],[1,"inline-flex","items-center","gap-2","px-4","sm:px-6","py-2.5","sm:py-3","bg-indigo-500","hover:bg-indigo-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base",3,"click"],["src","assets/svg/preguntas.svg","alt","Preguntas",1,"w-5","h-5","sm:w-6","sm:h-6"],[1,"flex","items-center","justify-center","gap-2","px-4","sm:px-5","py-2","sm:py-2.5","bg-green-500","hover:bg-green-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base","w-full","sm:w-auto",3,"click"],["cdkDropList","",1,"space-y-3","sm:space-y-4",3,"cdkDropListDropped"],["cdkDrag","",1,"bg-gradient-to-br","from-gray-50","to-white","rounded-lg","border","border-gray-200","p-3","sm:p-4","md:p-5","hover:shadow-md","transition-shadow","duration-200",3,"ngClass"],[1,"flex","flex-col","gap-3","mb-3","sm:mb-4"],[1,"flex","items-start","gap-2","sm:gap-3"],["cdkDragHandle","",1,"flex","items-center","gap-1.5","sm:gap-2","cursor-move","flex-shrink-0","touch-manipulation"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","sm:w-6","sm:h-6","text-gray-400","hover:text-gray-600"],["d","M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"],[1,"flex","items-center","justify-center","w-7","h-7","sm:w-8","sm:h-8","bg-blue-500","text-white","text-xs","sm:text-sm","font-bold","rounded-full"],[1,"text-sm","sm:text-base","md:text-lg","font-semibold","text-gray-800","flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","gap-1.5","sm:gap-2","ml-8","sm:ml-10"],[1,"px-2","sm:px-3","py-0.5","sm:py-1","rounded-full","text-[10px]","sm:text-xs","font-semibold","whitespace-nowrap",3,"ngClass"],["class","px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-semibold bg-purple-100 text-purple-700 flex items-center gap-0.5 sm:gap-1","title","Permite seleccionar m\xFAltiples respuestas",4,"ngIf"],["class","flex gap-1.5 sm:gap-2 ml-8 sm:ml-10",4,"ngIf"],["cdkDropList","",1,"ml-0","sm:ml-8","md:ml-11","space-y-1.5","sm:space-y-2",3,"cdkDropListDropped"],["cdkDrag","",1,"flex","flex-col","sm:flex-row","sm:items-center","gap-2","sm:gap-3","p-2","sm:p-3","bg-white","rounded-lg","border","border-gray-200",3,"ngClass"],["title","Permite seleccionar m\xFAltiples respuestas",1,"px-2","sm:px-3","py-0.5","sm:py-1","rounded-full","text-[10px]","sm:text-xs","font-semibold","bg-purple-100","text-purple-700","flex","items-center","gap-0.5","sm:gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-2.5","h-2.5","sm:w-3","sm:h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"sm:hidden"],[1,"flex","gap-1.5","sm:gap-2","ml-8","sm:ml-10"],["title","Editar pregunta",1,"p-1.5","sm:p-2","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-colors","duration-200","touch-manipulation",3,"click"],["title","Desactivar pregunta","class","p-1.5 sm:p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200 touch-manipulation",3,"click",4,"ngIf"],["title","Activar pregunta","class","p-1.5 sm:p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors duration-200 touch-manipulation",3,"click",4,"ngIf"],["title","Desactivar pregunta",1,"p-1.5","sm:p-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg","transition-colors","duration-200","touch-manipulation",3,"click"],["title","Activar pregunta",1,"p-1.5","sm:p-2","bg-green-500","hover:bg-green-600","text-white","rounded-lg","transition-colors","duration-200","touch-manipulation",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3.5","h-3.5","sm:w-4","sm:h-4","text-gray-400","hover:text-gray-600"],[1,"flex","items-center","justify-center","w-5","h-5","sm:w-6","sm:h-6","bg-gray-200","text-gray-700","text-[10px]","sm:text-xs","font-semibold","rounded-full"],[1,"text-xs","sm:text-sm","text-gray-700","flex-1","min-w-0"],[1,"px-2","py-0.5","rounded-full","text-[10px]","sm:text-xs","font-semibold","flex-shrink-0","whitespace-nowrap",3,"ngClass"],["class","flex gap-1 sm:gap-1 justify-end sm:justify-start",4,"ngIf"],[1,"flex","gap-1","sm:gap-1","justify-end","sm:justify-start"],["title","Desactivar respuesta","class","p-1 sm:p-1 bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 touch-manipulation",3,"click",4,"ngIf"],["title","Activar respuesta","class","p-1 sm:p-1 bg-green-500 hover:bg-green-600 text-white rounded transition-colors duration-200 touch-manipulation",3,"click",4,"ngIf"],["title","Desactivar respuesta",1,"p-1","sm:p-1","bg-red-500","hover:bg-red-600","text-white","rounded","transition-colors","duration-200","touch-manipulation",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","sm:w-4","sm:h-4"],["title","Activar respuesta",1,"p-1","sm:p-1","bg-green-500","hover:bg-green-600","text-white","rounded","transition-colors","duration-200","touch-manipulation",3,"click"],[1,"text-center","py-12","sm:py-16"],[1,"w-16","h-16","sm:w-20","sm:h-20","mx-auto","mb-3","sm:mb-4","bg-gray-100","rounded-full","flex","items-center","justify-center"],["src","assets/svg/preguntas.svg","alt","Preguntas",1,"w-8","h-8","sm:w-10","sm:h-10","opacity-40"],["class","inline-flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg shadow-sm hover:shadow transition-all duration-200 text-sm sm:text-base",3,"click",4,"ngIf"],[1,"inline-flex","items-center","gap-2","px-4","sm:px-6","py-2.5","sm:py-3","bg-green-500","hover:bg-green-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200","text-sm","sm:text-base",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","sm:w-10","sm:h-10","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-gray-500","text-xs","sm:text-sm","px-4"]],template:function(t,i){t&1&&(a(0,"app-abm-encuestas",0),w("updateEvent",function(o){return i.actualizarEncuesta(o)}),c(),a(1,"app-abm-preguntas",1),w("insertEvent",function(o){return i.agregarPregunta(o)})("updateEvent",function(o){return i.actualizarPregunta(o)}),c(),a(2,"div",2)(3,"div",3)(4,"button",4),v(),a(5,"svg",5),f(6,"path",6),c(),E(),a(7,"span",7),h(8,"Regresar"),c()()(),a(9,"div",8)(10,"div",9)(11,"h1",10),h(12),c(),a(13,"p",11),h(14),c(),a(15,"span",12),h(16),c()(),a(17,"div",13),k(18,un,6,2,"a",14),a(19,"a",15),v(),a(20,"svg",16),f(21,"path",17),c(),E(),a(22,"span",18),h(23,"Reportes"),c()(),k(24,pn,5,0,"button",19),c()(),a(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23),v(),a(29,"svg",24),f(30,"path",25),c(),E(),a(31,"span",26)(32,"span",18),h(33,"Creado por:"),c(),h(34),c()(),a(35,"div",23),v(),a(36,"svg",24),f(37,"path",27),c(),E(),a(38,"span")(39,"span",18),h(40,"Fecha:"),c(),h(41),Ee(42,"date"),c()()(),k(43,mn,4,3,"button",28),c()(),k(44,bn,19,4,"div",29)(45,Dn,19,4,"div",29),a(46,"div",30),k(47,In,12,1,"div",31),a(48,"div",32)(49,"span",33),h(50,"Filtrar preguntas:"),c(),a(51,"div",34)(52,"button",35),w("click",function(){return i.filtroActivo="all"}),h(53),c(),a(54,"button",35),w("click",function(){return i.filtroActivo="true"}),h(55),c(),a(56,"button",35),w("click",function(){return i.filtroActivo="false"}),h(57),c()()(),k(58,Ln,3,0,"div",36)(59,Vn,8,1,"div",37)(60,jn,8,1,"div",37),c()()),t&2&&(d(12),he(i.encuesta==null?null:i.encuesta.titulo),d(2),he(i.encuesta==null?null:i.encuesta.descripcion),d(),g("ngClass",(i.encuesta==null?null:i.encuesta.estado)==="Activa"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),d(),P(" ",i.encuesta==null?null:i.encuesta.estado," "),d(2),g("ngIf",i.authService.isAdmin),d(),g("routerLink",Se(26,ln,i.idEncuesta)),d(5),g("ngIf",i.authService.isAdmin),d(10),ye(" ",i.encuesta==null||i.encuesta.creatorUser==null?null:i.encuesta.creatorUser.apellido,", ",i.encuesta==null||i.encuesta.creatorUser==null?null:i.encuesta.creatorUser.nombre,""),d(7),P(" ",De(42,23,i.encuesta==null?null:i.encuesta.createdAt,"dd/MM/yyyy"),""),d(2),g("ngIf",i.authService.isAdmin),d(),g("ngIf",i.authService.isAdmin),d(),g("ngIf",i.authService.isAdmin),d(2),g("ngIf",i.authService.isAdmin),d(5),g("ngClass",i.filtroActivo==="all"?"bg-blue-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"),d(),P(" Todas (",(i.encuesta==null?null:i.encuesta.Preguntas.length)||0,") "),d(),g("ngClass",i.filtroActivo==="true"?"bg-green-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"),d(),P(" Activas (",i.cantidadPreguntasActivas,") "),d(),g("ngClass",i.filtroActivo==="false"?"bg-red-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"),d(),P(" Inactivas (",i.cantidadPreguntasInactivas,") "),d(),g("ngIf",i.preguntasFiltradas.length>0),d(),g("ngIf",(i.encuesta==null?null:i.encuesta.Preguntas.length)===0),d(),g("ngIf",(i.encuesta==null?null:i.encuesta.Preguntas.length)>0&&i.preguntasFiltradas.length===0))},dependencies:[Te,kt,Ce,Rt,At,Nt,Lt,Oe,zt,Bt,Ae,jt,Fe,Me,Gt,Zt,Ii,Di,Ei,xi],styles:[".cdk-drop-list[_ngcontent-%COMP%]{display:block}.cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1);cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 15px #0000004d;opacity:.9;border-radius:.5rem}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.4;background:#f3f4f6;border:2px dashed #9ca3af;border-radius:.5rem}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}@media (max-width: 640px){.cdk-drag-handle[_ngcontent-%COMP%]{padding:.25rem;margin:-.25rem}.cdk-drag-preview[_ngcontent-%COMP%]{max-width:calc(100vw - 2rem)}button[_ngcontent-%COMP%]{min-height:36px;min-width:36px}input[type=datetime-local][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:16px}}"]})}}return s})();export{or as default};
