import{a as J}from"./chunk-TIL2E3OS.js";import{a as A,b as d,c as R,d as j,g as L,h as k,i as q,j as D,k as M,l as O,o as z,q as V}from"./chunk-3IXDAJZQ.js";import{a as B}from"./chunk-VUVQYZVZ.js";import{a as G}from"./chunk-5QPYTDH3.js";import{a as H}from"./chunk-HZWOLOZV.js";import{e as F,g as U,h as T,k as N}from"./chunk-LRQMHJK3.js";import{m as w,p as I}from"./chunk-PL2ZQQHO.js";import{Ab as g,Kb as o,Mb as v,Nb as y,Tb as C,Ua as l,Va as p,ga as h,ib as m,kb as a,qb as r,rb as e,sa as x,sb as c,ta as S,zb as E}from"./chunk-DRQLPHCS.js";function Q(i,u){i&1&&(r(0,"p",27),o(1," Campo obligatorio "),e())}function W(i,u){if(i&1&&(r(0,"p",27),o(1),e()),i&2){let n=g();l(),v(" M\xEDnimo ",n.nombre_usuario==null||n.nombre_usuario.errors==null?null:n.nombre_usuario.errors.minlength.requiredLength," caracteres ")}}function X(i,u){i&1&&(r(0,"p",27),o(1," Campo obligatorio "),e())}function Y(i,u){i&1&&(r(0,"p",27),o(1," Debe colocar un email v\xE1lido "),e())}function Z(i,u){i&1&&(r(0,"p",27),o(1," Campo obligatorio "),e())}function $(i,u){i&1&&(r(0,"p",27),o(1," Campo obligatorio "),e())}function ee(i,u){i&1&&(r(0,"p",27),o(1," Campo obligatorio "),e())}function te(i,u){i&1&&(r(0,"div",39)(1,"p",40),o(2,"A"),e()())}function ie(i,u){i&1&&(r(0,"div",41)(1,"p",40),o(2,"E"),e()())}function re(i,u){i&1&&(r(0,"div",42)(1,"p",40),o(2,"En"),e()())}function oe(i,u){if(i&1&&(r(0,"p"),o(1),e()),i&2){let n=g(2);l(),v(" ",n.usuarioForm.value.usuario," ")}}function ne(i,u){i&1&&(r(0,"p",43),o(1," Nombre de usuario "),e())}function le(i,u){if(i&1&&(r(0,"p",44),o(1),e()),i&2){let n=g(2);l(),y(" ",n.usuarioForm.value.nombre.toLowerCase()," ",n.usuarioForm.value.apellido.toLowerCase()," ")}}function ae(i,u){i&1&&(r(0,"p",43),o(1," Apellido y Nombre "),e())}function ue(i,u){if(i&1&&(r(0,"p"),o(1),e()),i&2){let n=g(2);l(),v(" ",n.usuarioForm.value.email.toLowerCase()," ")}}function me(i,u){i&1&&(r(0,"p"),o(1," Correo electr\xF3nico "),e())}function de(i,u){if(i&1&&(r(0,"div",28),m(1,te,3,0,"div",29)(2,ie,3,0,"div",30)(3,re,3,0,"div",31),r(4,"div",32)(5,"div",33),m(6,oe,2,1,"p",34)(7,ne,2,0,"p",35),e(),r(8,"div",36),m(9,le,2,2,"p",37)(10,ae,2,0,"p",35),e(),r(11,"div",38),m(12,ue,2,1,"p",34)(13,me,2,0,"p",34),e()()()),i&2){let n=g();l(),a("ngIf",n.usuarioForm.value.role==="ADMIN_ROLE"),l(),a("ngIf",n.usuarioForm.value.role==="USER_ROLE"),l(),a("ngIf",n.usuarioForm.value.role==="ENCUESTADOR_ROLE"),l(3),a("ngIf",n.usuarioForm.value.usuario.trim()!==""),l(),a("ngIf",n.usuarioForm.value.usuario.trim()===""),l(2),a("ngIf",n.usuarioForm.value.nombre.trim()||n.usuarioForm.value.apellido.trim()),l(),a("ngIf",n.usuarioForm.value.nombre.trim()===""&&n.usuarioForm.value.apellido.trim()===""),l(2),a("ngIf",n.usuarioForm.value.email.trim()!==""),l(),a("ngIf",n.usuarioForm.value.email.trim()==="")}}var Se=(()=>{class i{get nombre_usuario(){return this.usuarioForm.get("usuario")}get apellido(){return this.usuarioForm.get("apellido")}get nombre(){return this.usuarioForm.get("nombre")}get dni(){return this.usuarioForm.get("dni")}get email(){return this.usuarioForm.get("email")}get password(){return this.usuarioForm.get("password")}get repetir(){return this.usuarioForm.get("repetir")}get role(){return this.usuarioForm.get("role")}constructor(n,s,t,f,b,_){this.router=n,this.fb=s,this.activatedRoute=t,this.usuariosService=f,this.alertService=b,this.dataService=_}ngOnInit(){G.from(".gsap-contenido",{y:100,opacity:0,duration:.2}),this.dataService.ubicacionActual="Dashboard - Editando usuario",this.usuarioForm=this.fb.group({usuario:["",[d.required,d.minLength(4)]],apellido:["",d.required],nombre:["",d.required],dni:["",d.required],email:["",[d.required,d.email]],role:["USER_ROLE",[d.required,d.minLength(4)]],activo:["true",d.required]}),this.getUsuario()}getUsuario(){this.alertService.loading(),this.activatedRoute.params.subscribe(({id:n})=>{this.id=n}),this.usuariosService.getUsuario(this.id).subscribe({next:n=>{this.usuario=n;let{usuario:s,apellido:t,nombre:f,dni:b,email:_,role:K,activo:P}=this.usuario;this.usuarioForm.patchValue({usuario:s,apellido:t,nombre:f,dni:b,email:_,role:K,activo:String(P)}),this.alertService.close()},error:({error:n})=>this.alertService.errorApi(n.message)})}editarUsuario(){if(this.usuarioForm.valid){let n=this.usuarioForm.value;this.alertService.question({msg:"Actualizando usuario",buttonText:"Aceptar"}).then(({isConfirmed:s})=>{s&&(this.alertService.loading(),this.usuariosService.actualizarUsuario(this.id,n).subscribe({next:()=>{this.alertService.close(),this.router.navigateByUrl("dashboard/usuarios")},error:({error:t})=>this.alertService.errorApi(t.message)}))})}else this.usuarioForm.markAllAsTouched()}regresar(){this.router.navigateByUrl("/dashboard/usuarios")}static{this.\u0275fac=function(s){return new(s||i)(p(U),p(z),p(F),p(J),p(B),p(H))}}static{this.\u0275cmp=h({type:i,selectors:[["app-editar-usuario"]],standalone:!0,features:[C],decls:74,vars:11,consts:[[1,"lg:flex","p-4","max-w-5xl","mx-auto","gsap-contenido"],[1,"w-full","lg:w-1/2","bg-white","mr-2","shadow-lg","rounded-lg","border","border-gray-200"],[1,"flex","items-center","p-3","bg-gradient-to-r","from-gray-800","to-gray-700","rounded-t-lg"],["title","Regresar","routerLink","/dashboard/usuarios",1,"bg-white/10","hover:bg-white/20","text-white","rounded-full","p-3","transition-all","duration-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"],[1,"ml-3","text-xl","font-semibold","text-white"],[1,"px-6","py-4",3,"keydown.enter","formGroup"],[1,"grid","lg:grid-cols-2","gap-4"],[1,"block","font-medium","text-gray-700","mb-1"],[1,"text-red-500"],["placeholder","Ej. lmoreno","formControlName","usuario",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["type","email","placeholder","Ej. lucasmoreno@gmail.com","formControlName","email",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["placeholder","Ej. Moreno","formControlName","apellido",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["placeholder","Ej. Lucas","formControlName","nombre",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["placeholder","Ej. 34060398","formControlName","dni",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["formControlName","role",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["value","USER_ROLE"],["value","ADMIN_ROLE"],["value","ENCUESTADOR_ROLE"],["formControlName","activo",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[3,"value"],[1,"w-full","mt-6","px-4","py-2","bg-blue-500","text-white","font-medium","rounded-lg","hover:bg-blue-600","focus:ring-4","focus:ring-blue-200","transition-colors","duration-200",3,"click"],[1,"w-full","lg:w-1/2","mt-4","lg:mt-0","lg:ml-4"],[1,"bg-white","rounded-lg","shadow-lg","border","border-gray-200","p-6"],["class","flex items-start",4,"ngIf"],[1,"mt-1","text-sm","text-red-600"],[1,"flex","items-start"],["class","bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center w-32 h-32 rounded-full shadow-lg",4,"ngIf"],["class","bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center w-32 h-32 rounded-full shadow-lg",4,"ngIf"],["class","bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center w-32 h-32 rounded-full shadow-lg",4,"ngIf"],[1,"ml-6","flex-1"],[1,"text-2xl","lg:text-3xl","font-semibold","text-gray-900"],[4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"text-xl","lg:text-2xl","mt-2","text-gray-700"],["class","capitalize",4,"ngIf"],[1,"text-lg","mt-1","text-gray-500"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","flex","items-center","justify-center","w-32","h-32","rounded-full","shadow-lg"],[1,"text-6xl","font-bold","text-white"],[1,"bg-gradient-to-br","from-orange-500","to-orange-600","flex","items-center","justify-center","w-32","h-32","rounded-full","shadow-lg"],[1,"bg-gradient-to-br","from-green-500","to-green-600","flex","items-center","justify-center","w-32","h-32","rounded-full","shadow-lg"],[1,"text-gray-400"],[1,"capitalize"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x(),r(4,"svg",4),c(5,"path",5),e()(),S(),r(6,"h1",6),o(7,"Actualizando usuario"),e()(),r(8,"form",7),E("keydown.enter",function(b){return b.preventDefault()}),r(9,"div",8)(10,"div")(11,"label",9)(12,"span",10),o(13,"*"),e(),o(14," Nombre de usuario "),e(),c(15,"input",11),m(16,Q,2,0,"p",12)(17,W,2,1,"p",12),e(),r(18,"div")(19,"label",9)(20,"span",10),o(21,"*"),e(),o(22," Email "),e(),c(23,"input",13),m(24,X,2,0,"p",12)(25,Y,2,0,"p",12),e(),r(26,"div")(27,"label",9)(28,"span",10),o(29,"*"),e(),o(30," Apellido "),e(),c(31,"input",14),m(32,Z,2,0,"p",12),e(),r(33,"div")(34,"label",9)(35,"span",10),o(36,"*"),e(),o(37," Nombre "),e(),c(38,"input",15),m(39,$,2,0,"p",12),e(),r(40,"div")(41,"label",9)(42,"span",10),o(43,"*"),e(),o(44," DNI "),e(),c(45,"input",16),m(46,ee,2,0,"p",12),e(),r(47,"div")(48,"label",9)(49,"span",10),o(50,"*"),e(),o(51," Rol "),e(),r(52,"select",17)(53,"option",18),o(54,"Usuario est\xE1ndar"),e(),r(55,"option",19),o(56,"Administrador"),e(),r(57,"option",20),o(58,"Encuestador"),e()()(),r(59,"div")(60,"label",9)(61,"span",10),o(62,"*"),e(),o(63," Estado "),e(),r(64,"select",21)(65,"option",22),o(66,"Activo"),e(),r(67,"option",22),o(68,"Inactivo"),e()()()(),r(69,"button",23),E("click",function(){return t.editarUsuario()}),o(70," Actualizar usuario "),e()()(),r(71,"div",24)(72,"div",25),m(73,de,14,9,"div",26),e()()()),s&2&&(l(8),a("formGroup",t.usuarioForm),l(8),a("ngIf",(t.nombre_usuario==null?null:t.nombre_usuario.touched)&&(t.nombre_usuario==null||t.nombre_usuario.errors==null?null:t.nombre_usuario.errors.required)),l(),a("ngIf",(t.nombre_usuario==null?null:t.nombre_usuario.touched)&&(t.nombre_usuario==null||t.nombre_usuario.errors==null?null:t.nombre_usuario.errors.minlength)),l(7),a("ngIf",(t.email==null?null:t.email.touched)&&(t.email==null||t.email.errors==null?null:t.email.errors.required)),l(),a("ngIf",(t.email==null?null:t.email.touched)&&(t.email==null||t.email.errors==null?null:t.email.errors.email)),l(7),a("ngIf",(t.apellido==null?null:t.apellido.touched)&&(t.apellido==null||t.apellido.errors==null?null:t.apellido.errors.required)),l(7),a("ngIf",(t.nombre==null?null:t.nombre.touched)&&(t.nombre==null||t.nombre.errors==null?null:t.nombre.errors.required)),l(7),a("ngIf",(t.dni==null?null:t.dni.touched)&&(t.dni==null||t.dni.errors==null?null:t.dni.errors.required)),l(19),a("value",!0),l(2),a("value",!1),l(6),a("ngIf",t.usuario))},dependencies:[N,T,V,L,M,O,A,D,R,j,k,q,I,w],encapsulation:2})}}return i})();export{Se as default};
