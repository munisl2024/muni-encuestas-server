import{a as Gt}from"./chunk-INFHP37E.js";import{a as Ht}from"./chunk-D43TIK6X.js";import{a as Ne}from"./chunk-DTMQF6TE.js";import{a as Wt}from"./chunk-OJWUDPLJ.js";import{a as Ut}from"./chunk-TIL2E3OS.js";import{a as Vt,b as Ae,d as Fe,g as Me,k as jt,l as zt,m as Bt,q as Le}from"./chunk-FMNQVWW6.js";import{a as Oe}from"./chunk-VUVQYZVZ.js";import{a as Re}from"./chunk-JTVQZKZI.js";import{e as Mt,g as Lt,h as Ot,k as Nt}from"./chunk-LRQMHJK3.js";import{d as j,k as kt,l as Ce,m as Rt,n as At,p as Te,r as Ft,v as Pe,x as ke}from"./chunk-PL2ZQQHO.js";import{$a as q,A as wt,Ab as g,B as St,C as fe,D as yt,Da as Dt,E as Ke,Eb as It,J as qe,Kb as u,Lb as he,Mb as P,Nb as ye,Ob as Ct,Pb as B,Q as ve,Qb as H,R as Ye,Rb as W,S as J,Sb as ne,T as xt,Tb as Y,Ua as d,Va as _,Vb as xe,X as M,Y as ee,Yb as Ee,_ as z,_b as De,aa as I,ba as ce,bb as Qe,eb as le,ec as Tt,f as $,fa as D,ga as Z,h as ae,ha as te,hc as Ie,ia as ie,ib as k,jb as de,k as x,kb as m,kc as re,l as ft,lc as Pt,m as Ze,mb as be,na as Et,ob as we,p as vt,pa as Xe,pb as Se,qa as S,qb as a,ra as y,rb as l,sa as v,sb as f,t as bt,ta as E,vb as C,ya as K,za as R,zb as w}from"./chunk-DRQLPHCS.js";var V=ke.base_url+"/preguntas",Ve=(()=>{class r{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(e){this.http=e,this.abmPregunta={show:!1,estado:"crear",form:{descripcion:"",multiplesRespuestas:!1,respuestas:[{descripcion:""},{descripcion:""}]},preguntaSeleccionada:null,encuestaSeleccionada:null},this.preguntas=[],this.total=0}abrirAbm(e,t=null,i=null){this.abmPregunta.estado=e,this.abmPregunta.preguntaSeleccionada=t,this.abmPregunta.encuestaSeleccionada=i,this.abmPregunta.show=!0,e==="editar"?(this.abmPregunta.form={descripcion:t.descripcion,multiplesRespuestas:t.multiplesRespuestas||!1,respuestas:[]},this.abmPregunta.form.respuestas=t.Respuestas.map(s=>({descripcion:s.descripcion,id:s.id}))):this.abmPregunta.form={descripcion:"",multiplesRespuestas:!1,respuestas:[{descripcion:""},{descripcion:""}]}}obtenerPregunta(e){return this.http.get(`${V}/${e}`,{headers:this.getToken})}listarPreguntas({direccion:e="desc",columna:t="id",parametro:i="",pagina:s=1,itemsPorPagina:o=1e6,activo:c="true"}){return this.http.get(V,{params:{direccion:String(e),columna:t,parametro:i,pagina:s,itemsPorPagina:o,activo:c},headers:this.getToken})}nuevaPregunta(e){return this.http.post(V,e,{headers:this.getToken})}actualizarPregunta(e,t){return this.http.patch(`${V}/${e}`,t,{headers:this.getToken})}eliminarPregunta(e){return this.http.delete(`${V}/${e}`,{headers:this.getToken})}activarPregunta(e){return this.http.patch(`${V}/${e}/activar`,{},{headers:this.getToken})}activarRespuesta(e){return this.http.patch(`${V}/respuesta/${e}/activar`,{},{headers:this.getToken})}desactivarRespuesta(e){return this.http.patch(`${V}/respuesta/${e}/desactivar`,{},{headers:this.getToken})}reordenarPregunta(e,t){return this.http.patch(`${V}/${e}/reordenar`,{direccion:t},{headers:this.getToken})}reordenarRespuesta(e,t){return this.http.patch(`${V}/respuesta/${e}/reordenar`,{direccion:t},{headers:this.getToken})}static{this.\u0275fac=function(t){return new(t||r)(I(Pe))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Li(r,n){if(r&1){let e=C();a(0,"div",17)(1,"div",18)(2,"input",19),W("ngModelChange",function(i){let s=S(e).$implicit;return H(s.descripcion,i)||(s.descripcion=i),y(i)}),l(),a(3,"button",20),w("click",function(){let i=S(e).index,s=g();return y(s.eliminarRespuesta(i))}),v(),a(4,"svg",21),f(5,"path",22),l()()()()}if(r&2){let e=n.$implicit;d(2),B("ngModel",e.descripcion)}}var Zt=(()=>{class r{constructor(e,t,i,s){this.authService=e,this.alertService=t,this.toastr=i,this.preguntasService=s,this.insertEvent=new R,this.updateEvent=new R}ngOnInit(){}crearPregunta(){let e=this.verificacionFormulario();if(e.trim()!==""){this.alertService.info(e);return}this.alertService.question({msg:"Creando pregunta",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{if(t){this.alertService.loading();let i={descripcion:this.preguntasService.abmPregunta.form.descripcion,multiplesRespuestas:this.preguntasService.abmPregunta.form.multiplesRespuestas,encuestaId:this.preguntasService.abmPregunta.encuestaSeleccionada.id,respuestas:this.preguntasService.abmPregunta.form.respuestas,creatorUserId:this.authService.usuario.userId};this.preguntasService.nuevaPregunta(i).subscribe({next:({pregunta:s})=>{this.insertEvent.emit(s),this.preguntasService.abmPregunta.show=!1,this.toastr.success("Creada correctamente","Pregunta"),this.alertService.close()},error:({error:s})=>this.alertService.errorApi(s.message)})}})}actualizarPregunta(){let e=this.verificacionFormulario();if(e.trim()!==""){this.alertService.info(e);return}this.alertService.question({msg:"Actualizando pregunta",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{if(t){this.alertService.loading();let i={encuestaId:this.preguntasService.abmPregunta.encuestaSeleccionada.id,descripcion:this.preguntasService.abmPregunta.form.descripcion,multiplesRespuestas:this.preguntasService.abmPregunta.form.multiplesRespuestas,respuestas:this.preguntasService.abmPregunta.form.respuestas,creatorUserId:this.authService.usuario.userId};this.preguntasService.actualizarPregunta(this.preguntasService.abmPregunta.preguntaSeleccionada.id,i).subscribe({next:({pregunta:s})=>{this.updateEvent.emit(s),this.preguntasService.abmPregunta.show=!1,this.toastr.success("Actualizada correctamente","Pregunta"),this.alertService.close()},error:({error:s})=>this.alertService.errorApi(s.message)})}})}verificacionFormulario(){let{descripcion:e}=this.preguntasService.abmPregunta.form;return e.trim()===""?"La descripci\xF3n es requerida":this.preguntasService.abmPregunta.form.respuestas.length<2?"Debe tener al menos 2 respuestas":this.preguntasService.abmPregunta.form.respuestas.some(t=>t.descripcion.trim()==="")?"No puede tener respuestas vacias":""}agregarRespuestas(){this.preguntasService.abmPregunta.form.respuestas.push({descripcion:""})}eliminarRespuesta(e){this.preguntasService.abmPregunta.form.respuestas.splice(e,1)}static{this.\u0275fac=function(t){return new(t||r)(_(Re),_(Oe),_(Ne),_(Ve))}}static{this.\u0275cmp=Z({type:r,selectors:[["app-abm-preguntas"]],outputs:{insertEvent:"insertEvent",updateEvent:"updateEvent"},standalone:!0,features:[Y],decls:27,vars:10,consts:[[3,"closeModal","crear","actualizar","showModal","titulo","urlIcono","estadoFormulario","textoCrear","textoActualizar","showFooter"],[1,"bg-white","rounded-lg","shadow-xl"],[1,"p-6","max-h-96","overflow-y-auto"],["for","descripcion",1,"label-generico"],[1,"text-red-500"],["type","text","id","descripcion","placeholder","Ingrese aqui su pregunta",1,"input-generico","mt-2",3,"ngModelChange","ngModel"],[1,"mt-4","p-3","bg-purple-50","border","border-purple-200","rounded-lg"],[1,"flex","items-center","gap-3","cursor-pointer"],["type","checkbox",1,"w-4","h-4","text-purple-600","border-gray-300","rounded","focus:ring-purple-500","focus:ring-2",3,"ngModelChange","ngModel"],[1,"flex-1"],[1,"text-sm","font-semibold","text-gray-800","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","text-gray-600","mt-1"],[1,"mt-3"],["class","mb-1",4,"ngFor","ngForOf"],[1,"text-xs","p-2","bg-gray-50","hover:bg-gray-100","border","border-gray-300","rounded-lg","mt-2",3,"click"],[1,"mb-1"],[1,"flex","items-center","gap-2"],["type","text","placeholder","Ingrese aqui su respuesta",1,"border-b","border-gray-200","text-sm","w-full","p-2","mt-2",3,"ngModelChange","ngModel"],["type","button",1,"bg-red-500","text-white","rounded-full","p-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-4"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18 18 6M6 6l12 12"]],template:function(t,i){t&1&&(a(0,"app-modal",0),w("closeModal",function(){return i.preguntasService.abmPregunta.show=!1})("crear",function(){return i.crearPregunta()})("actualizar",function(){return i.actualizarPregunta()}),a(1,"div",1)(2,"div",2)(3,"div")(4,"label",3),u(5," Pregunta "),a(6,"span",4),u(7,"*"),l()(),a(8,"input",5),W("ngModelChange",function(o){return H(i.preguntasService.abmPregunta.form.descripcion,o)||(i.preguntasService.abmPregunta.form.descripcion=o),o}),l()(),a(9,"div",6)(10,"label",7)(11,"input",8),W("ngModelChange",function(o){return H(i.preguntasService.abmPregunta.form.multiplesRespuestas,o)||(i.preguntasService.abmPregunta.form.multiplesRespuestas=o),o}),l(),a(12,"div",9)(13,"span",10),v(),a(14,"svg",11),f(15,"path",12),l(),u(16," Permitir m\xFAltiples respuestas "),l(),E(),a(17,"p",13),u(18,"Los usuarios podr\xE1n seleccionar m\xE1s de una opci\xF3n"),l()()()(),a(19,"div",14)(20,"p",3),u(21," Respuestas "),a(22,"span",4),u(23,"*"),l()(),k(24,Li,6,1,"div",15),a(25,"button",16),w("click",function(){return i.agregarRespuestas()}),u(26," Agregar respuesta "),l()()()()()),t&2&&(m("showModal",i.preguntasService.abmPregunta.show)("titulo",i.preguntasService.abmPregunta.estado=="crear"?"Creando pregunta":"Editando pregunta")("urlIcono","assets/svg/preguntas.svg")("estadoFormulario",i.preguntasService.abmPregunta.estado)("textoCrear","Crear pregunta")("textoActualizar","Actualizar pregunta")("showFooter",!0),d(8),B("ngModel",i.preguntasService.abmPregunta.form.descripcion),d(3),B("ngModel",i.preguntasService.abmPregunta.form.multiplesRespuestas),d(13),m("ngForOf",i.preguntasService.abmPregunta.form.respuestas))},dependencies:[Te,Ce,Le,Ae,Vt,Fe,Me,Wt],encapsulation:2})}}return r})();function je(r,n=0){return Oi(r)?Number(r):n}function Oi(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function Kt(r){return Array.isArray(r)?r:[r]}function A(r){return r instanceof K?r.nativeElement:r}var et;try{et=typeof Intl<"u"&&Intl.v8BreakIterator}catch{et=!1}var tt=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Ft(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||et)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(t){return new(t||r)(I(Dt))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var ue;function Ni(){if(ue==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ue=!0}))}finally{ue=ue||!1}return ue}function pe(r){return Ni()?r:!!r.capture}var Je;function Vi(){if(Je==null){let r=typeof document<"u"?document.head:null;Je=!!(r&&(r.createShadowRoot||r.attachShadow))}return Je}function it(r){if(Vi()){let n=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function ge(r){return r.composedPath?r.composedPath()[0]:r.target}var zi=new z("cdk-dir-doc",{providedIn:"root",factory:Bi});function Bi(){return ce(j)}var Hi=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Wi(r){let n=r?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?Hi.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var nt=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new R,e){let t=e.body?e.body.dir:null,i=e.documentElement?e.documentElement.dir:null;this.value=Wi(t||i||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(t){return new(t||r)(I(zi,8))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var $i=20,qt=(()=>{class r{constructor(e,t,i){this._ngZone=e,this._platform=t,this._scrolled=new x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=$i){return this._platform.isBrowser?new ae(t=>{this._globalSubscription||this._addGlobalListener();let i=e>0?this._scrolled.pipe(Ke(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):vt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(yt(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,e)&&t.push(s)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let i=A(t),s=e.getElementRef().nativeElement;do if(i==s)return!0;while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return wt(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(t){return new(t||r)(I(q),I(tt),I(j,8))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Zi=20,Yt=(()=>{class r{constructor(e,t,i){this._platform=e,this._change=new x,this._changeListener=s=>{this._change.next(s)},this._document=i,t.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),i=e.documentElement,s=i.getBoundingClientRect(),o=-s.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,c=-s.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0;return{top:o,left:c}}change(e=Zi){return e>0?this._change.pipe(Ke(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(t){return new(t||r)(I(tt),I(q),I(j,8))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Xt=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=te({type:r})}static{this.\u0275inj=ee({})}}return r})();function Qt(r){return r.buttons===0||r.detail===0}function Jt(r){let n=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}function ht(r,n,e){for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];i?r.setProperty(t,i,e?.has(t)?"important":""):r.removeProperty(t)}return r}function se(r,n){let e=n?"":"none";ht(r.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function ei(r,n,e){ht(r.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},e)}function We(r,n){return n&&n!="none"?r+" "+n:r}function ti(r,n){r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,r.style.transform=Ue(n.left,n.top)}function Ue(r,n){return`translate3d(${Math.round(r)}px, ${Math.round(n)}px, 0)`}function ut(r){let n=r.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function st(r,n,e){let{top:t,bottom:i,left:s,right:o}=r;return e>=t&&e<=i&&n>=s&&n<=o}function _e(r,n,e){r.top+=n,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function ii(r,n,e,t){let{top:i,right:s,bottom:o,left:c,width:h,height:p}=r,b=h*n,T=p*n;return t>i-T&&t<o+T&&e>c-b&&e<s+b}var Ge=class{constructor(n){this._document=n,this.positions=new Map}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:ut(e)})})}handleScroll(n){let e=ge(n),t=this.positions.get(e);if(!t)return null;let i=t.scrollPosition,s,o;if(e===this._document){let p=this.getViewportScrollPosition();s=p.top,o=p.left}else s=e.scrollTop,o=e.scrollLeft;let c=i.top-s,h=i.left-o;return this.positions.forEach((p,b)=>{p.clientRect&&e!==b&&e.contains(b)&&_e(p.clientRect,c,h)}),i.top=s,i.left=o,{top:c,left:h}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function mi(r){let n=r.cloneNode(!0),e=n.querySelectorAll("[id]"),t=r.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<e.length;i++)e[i].removeAttribute("id");return t==="canvas"?si(r,n):(t==="input"||t==="select"||t==="textarea")&&ri(r,n),ni("canvas",r,n,si),ni("input, textarea, select",r,n,ri),n}function ni(r,n,e,t){let i=n.querySelectorAll(r);if(i.length){let s=e.querySelectorAll(r);for(let o=0;o<i.length;o++)t(i[o],s[o])}}var qi=0;function ri(r,n){n.type!=="file"&&(n.value=r.value),n.type==="radio"&&n.name&&(n.name=`mat-clone-${n.name}-${qi++}`)}function si(r,n){let e=n.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function _i(r,n){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===n.ELEMENT_NODE)return e[0];let t=n.createElement("div");return e.forEach(i=>t.appendChild(i)),t}function oi(r){let n=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*n}function Yi(r){let n=getComputedStyle(r),e=rt(n,"transition-property"),t=e.find(c=>c==="transform"||c==="all");if(!t)return 0;let i=e.indexOf(t),s=rt(n,"transition-duration"),o=rt(n,"transition-delay");return oi(s[i])+oi(o[i])}function rt(r,n){return r.getPropertyValue(n).split(",").map(t=>t.trim())}var Xi=new Set(["position"]),ot=class{constructor(n,e,t,i,s,o,c,h,p){this._document=n,this._rootElement=e,this._direction=t,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=c,this._initialTransform=h,this._zIndex=p}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),"showPopover"in this._preview&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return Yi(this._preview)}addEventListener(n,e){this._preview.addEventListener(n,e)}removeEventListener(n,e){this._preview.removeEventListener(n,e)}_createPreview(){let n=this._previewTemplate,e=this._previewClass,t=n?n.template:null,i;if(t&&n){let s=n.matchSize?this._initialDomRect:null,o=n.viewContainer.createEmbeddedView(t,n.context);o.detectChanges(),i=_i(o,this._document),this._previewEmbeddedView=o,n.matchSize?ti(i,s):i.style.transform=Ue(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=mi(this._rootElement),ti(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return ht(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Xi),se(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>i.classList.add(s)):i.classList.add(e)),i}},ai=pe({passive:!0}),ze=pe({passive:!1}),ci=pe({passive:!1,capture:!0}),Qi=800,li=new Set(["position"]),at=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(e=>se(e,n)))}constructor(n,e,t,i,s,o){this._config=e,this._document=t,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new x,this._pointerMoveSubscription=$.EMPTY,this._pointerUpSubscription=$.EMPTY,this._scrollSubscription=$.EMPTY,this._resizeSubscription=$.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new x,this.started=new x,this.released=new x,this.ended=new x,this.entered=new x,this.exited=new x,this.dropped=new x,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){let h=this._getTargetHandle(c);h&&!this._disabledHandles.has(h)&&!this.disabled&&this._initializeDragSequence(h,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{let h=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){let b=Math.abs(h.x-this._pickupPositionOnPage.x),T=Math.abs(h.y-this._pickupPositionOnPage.y);if(b+T>=this._config.dragStartThreshold){let U=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),G=this._dropContainer;if(!U){this._endDragSequence(c);return}(!G||!G.isDragging()&&!G.isReceiving())&&(c.cancelable&&c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.cancelable&&c.preventDefault();let p=this._getConstrainedPointerPosition(h);if(this._hasMoved=!0,this._lastKnownPointerPosition=h,this._updatePointerDirectionDelta(p),this._dropContainer)this._updateActiveDropContainer(p,h);else{let b=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,T=this._activeTransform;T.x=p.x-b.x+this._passiveTransform.x,T.y=p.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(T.x,T.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:p,event:c,distance:this._getDragDistance(p),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){let h=this._getTargetHandle(c);h&&!this._disabledHandles.has(h)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(n).withParent(e.parentDragRef||null),this._parentPositions=new Ge(t),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(t=>A(t)),this._handles.forEach(t=>se(t,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){let e=A(n);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ze),e.addEventListener("touchstart",this._pointerDown,ai),e.addEventListener("dragstart",this._nativeDragStart,ze)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?A(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),se(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),se(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){let n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){let n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",hi,ci)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){me(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),t=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{e.addEventListener("selectstart",hi,ci)}),t){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),c=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(c,i),this._initialTransform=i.style.transform||"",this._preview=new ot(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,e)),ei(i,!1,li),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:n}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(n,e){this._parentDragRef&&e.stopPropagation();let t=this.isDragging(),i=me(e),s=!i&&e.button!==0,o=this._rootElement,c=ge(e),h=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+Qi>Date.now(),p=i?Jt(e):Qt(e);if(c&&c.draggable&&e.type==="mousedown"&&e.preventDefault(),t||s||h||p)return;if(this._handles.length){let L=o.style;this._rootElementTapHighlight=L.webkitTapHighlightColor||"",L.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(L=>this._updateOnScroll(L)),this._boundaryElement&&(this._boundaryRect=ut(this._boundaryElement));let b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,e);let T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(n){ei(this._rootElement,!0,li),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,t=e.getItemIndex(this),i=this._getPointerPositionOnPage(n),s=this._getDragDistance(i),o=e._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:n}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:n}),e.drop(this,t,this._initialIndex,this._initialContainer,o,s,i,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:e},{x:t,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,n,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,n,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,i),this._dropContainer._sortItem(this,n,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,e):this._applyPreviewTransform(n-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let i=o=>{(!o||ge(o)===this._preview&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",i),t(),clearTimeout(s))},s=setTimeout(i,e*1.5);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let n=this._placeholderTemplate,e=n?n.template:null,t;return e?(this._placeholderRef=n.viewContainer.createEmbeddedView(e,n.context),this._placeholderRef.detectChanges(),t=_i(this._placeholderRef,this._document)):t=mi(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(n,e,t){let i=e===this._rootElement?null:e,s=i?i.getBoundingClientRect():n,o=me(t)?t.targetTouches[0]:t,c=this._getViewportScrollPosition(),h=o.pageX-s.left-c.left,p=o.pageY-s.top-c.top;return{x:s.left-n.left+h,y:s.top-n.top+p}}_getPointerPositionOnPage(n){let e=this._getViewportScrollPosition(),t=me(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,i=t.pageX-e.left,s=t.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let c=this._ownerSVGElement.createSVGPoint();return c.x=i,c.y=s,c.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(n){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:i}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if(this.lockAxis==="x"||e==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:h,height:p}=this._getPreviewRect(),b=c.top+o,T=c.bottom-(p-o),L=c.left+s,U=c.right-(h-s);t=di(t,L,U),i=di(i,b,T)}return{x:t,y:i}}_updatePointerDirectionDelta(n){let{x:e,y:t}=n,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),c=Math.abs(t-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=e>s.x?1:-1,s.x=e),c>this._config.pointerDirectionChangeThreshold&&(i.y=t>s.y?1:-1,s.y=t),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,se(this._rootElement,n))}_removeRootElementListeners(n){n.removeEventListener("mousedown",this._pointerDown,ze),n.removeEventListener("touchstart",this._pointerDown,ai),n.removeEventListener("dragstart",this._nativeDragStart,ze)}_applyRootElementTransform(n,e){let t=Ue(n,e),i=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=i.transform&&i.transform!="none"?i.transform:""),i.transform=We(t,this._initialTransform)}_applyPreviewTransform(n,e){let t=this._previewTemplate?.template?void 0:this._initialTransform,i=Ue(n,e);this._preview.setTransform(We(i,t))}_getDragDistance(n){let e=this._pickupPositionOnPage;return e?{x:n.x-e.x,y:n.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:e}=this._passiveTransform;if(n===0&&e===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||t.width===0&&t.height===0)return;let s=i.left-t.left,o=t.right-i.right,c=i.top-t.top,h=t.bottom-i.bottom;i.width>t.width?(s>0&&(n+=s),o>0&&(n-=o)):n=0,i.height>t.height?(c>0&&(e+=c),h>0&&(e-=h)):e=0,(n!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:n})}_getDragStartDelay(n){let e=this.dragStartDelay;return typeof e=="number"?e:me(n)?e.touch:e?e.mouse:0}_updateOnScroll(n){let e=this._parentPositions.handleScroll(n);if(e){let t=ge(n);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&_e(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=it(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,e){let t=this._previewContainer||"global";if(t==="parent")return n;if(t==="global"){let i=this._document;return e||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return A(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(n){return this._handles.find(e=>n.target&&(n.target===e||e.contains(n.target)))}};function di(r,n,e){return Math.max(n,Math.min(e,r))}function me(r){return r.type[0]==="t"}function hi(r){r.preventDefault()}function Ji(r,n,e){let t=ui(n,r.length-1),i=ui(e,r.length-1);if(t===i)return;let s=r[t],o=i<t?-1:1;for(let c=t;c!==i;c+=o)r[c]=r[c+o];r[i]=s}function ui(r,n){return Math.max(0,Math.min(n,r))}var ct=class{constructor(n,e){this._element=n,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(n){this.withItems(n)}sort(n,e,t,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(n,e,t,i);if(o===-1&&s.length>0)return null;let c=this.orientation==="horizontal",h=s.findIndex(O=>O.drag===n),p=s[o],b=s[h].clientRect,T=p.clientRect,L=h>o?1:-1,U=this._getItemOffsetPx(b,T,L),G=this._getSiblingOffsetPx(h,s,L),Q=s.slice();return Ji(s,h,o),s.forEach((O,Ti)=>{if(Q[Ti]===O)return;let mt=O.drag===n,$e=mt?U:G,_t=mt?n.getPlaceholderElement():O.drag.getRootElement();O.offset+=$e,c?(_t.style.transform=We(`translate3d(${Math.round(O.offset)}px, 0, 0)`,O.initialTransform),_e(O.clientRect,0,$e)):(_t.style.transform=We(`translate3d(0, ${Math.round(O.offset)}px, 0)`,O.initialTransform),_e(O.clientRect,$e,0))}),this._previousSwap.overlaps=st(T,e,t),this._previousSwap.drag=p.drag,this._previousSwap.delta=c?i.x:i.y,{previousIndex:h,currentIndex:o}}enter(n,e,t,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(n,e,t):i,o=this._activeDraggables,c=o.indexOf(n),h=n.getPlaceholderElement(),p=o[s];if(p===n&&(p=o[s+1]),!p&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(p=o[0]),c>-1&&o.splice(c,1),p&&!this._dragDropRegistry.isDragging(p)){let b=p.getRootElement();b.parentElement.insertBefore(h,b),o.splice(s,0,n)}else A(this._element).appendChild(h),o.push(n);h.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables.forEach(n=>{let e=n.getRootElement();if(e){let t=this._itemPositions.find(i=>i.drag===n)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===n)}updateOnScroll(n,e){this._itemPositions.forEach(({clientRect:t})=>{_e(t,n,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}_cacheItemPositions(){let n=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:ut(t)}}).sort((e,t)=>n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getItemOffsetPx(n,e,t){let i=this.orientation==="horizontal",s=i?e.left-n.left:e.top-n.top;return t===-1&&(s+=i?e.width-n.width:e.height-n.height),s}_getSiblingOffsetPx(n,e,t){let i=this.orientation==="horizontal",s=e[n].clientRect,o=e[n+t*-1],c=s[i?"width":"height"]*t;if(o){let h=i?"left":"top",p=i?"right":"bottom";t===-1?c-=o.clientRect[h]-s[p]:c+=s[h]-o.clientRect[p]}return c}_shouldEnterAsFirstChild(n,e){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,i=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let o=t[t.length-1].clientRect;return i?n>=o.right:e>=o.bottom}else{let o=t[0].clientRect;return i?n<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(n,e,t,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:c,clientRect:h})=>{if(c===n)return!1;if(i){let p=s?i.x:i.y;if(c===this._previousSwap.drag&&this._previousSwap.overlaps&&p===this._previousSwap.delta)return!1}return s?e>=Math.floor(h.left)&&e<Math.floor(h.right):t>=Math.floor(h.top)&&t<Math.floor(h.bottom)});return o===-1||!this._sortPredicate(o,n)?-1:o}},pi=.05,fi=.05,N=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(N||{}),F=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(F||{}),lt=class{constructor(n,e,t,i,s){this._dragDropRegistry=e,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new x,this.entered=new x,this.exited=new x,this.dropped=new x,this.sorted=new x,this.receivingStarted=new x,this.receivingStopped=new x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=$.EMPTY,this._verticalScrollDirection=N.NONE,this._horizontalScrollDirection=F.NONE,this._stopScrollTimers=new x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),St(0,Ze).pipe(J(this._stopScrollTimers)).subscribe(()=>{let o=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===N.UP?o.scrollBy(0,-c):this._verticalScrollDirection===N.DOWN&&o.scrollBy(0,c),this._horizontalScrollDirection===F.LEFT?o.scrollBy(-c,0):this._horizontalScrollDirection===F.RIGHT&&o.scrollBy(c,0)})},this.element=A(n),this._document=t,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Ge(t),this._sortStrategy=new ct(this.element,e),this._sortStrategy.withSortPredicate((o,c)=>this.sortPredicate(o,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,e,t,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(n)),this._sortStrategy.enter(n,e,t,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,e,t,i,s,o,c,h={}){this._reset(),this.dropped.next({item:n,currentIndex:e,previousIndex:t,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:c,event:h})}withItems(n){let e=this._draggables;return this._draggables=n,n.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(i=>i.isDragging()).every(i=>n.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._sortStrategy.direction=n,this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){return this._sortStrategy.orientation=n,this}withScrollableParents(n){let e=A(this.element);return this._scrollableElements=n.indexOf(e)===-1?[e,...n]:n.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,e,t,i){if(this.sortingDisabled||!this._domRect||!ii(this._domRect,pi,e,t))return;let s=this._sortStrategy.sort(n,e,t,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,e){if(this.autoScrollDisabled)return;let t,i=N.NONE,s=F.NONE;if(this._parentPositions.positions.forEach((o,c)=>{c===this._document||!o.clientRect||t||ii(o.clientRect,pi,n,e)&&([i,s]=en(c,o.clientRect,this._sortStrategy.direction,n,e),(i||s)&&(t=c))}),!i&&!s){let{width:o,height:c}=this._viewportRuler.getViewportSize(),h={width:o,height:c,top:0,right:o,bottom:c,left:0};i=vi(h,e),s=bi(h,n),t=window}t&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=t,(i||s)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let n=A(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){let n=A(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(n).clientRect}_reset(){this._isDragging=!1;let n=A(this.element).style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(n,e){return this._domRect!=null&&st(this._domRect,n,e)}_getSiblingContainerFromPosition(n,e,t){return this._siblings.find(i=>i._canReceive(n,e,t))}_canReceive(n,e,t){if(!this._domRect||!st(this._domRect,e,t)||!this.enterPredicate(n,this))return!1;let i=this._getShadowRoot().elementFromPoint(e,t);if(!i)return!1;let s=A(this.element);return i===s||s.contains(i)}_startReceiving(n,e){let t=this._activeSiblings;!t.has(n)&&e.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(t.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:e}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(n);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let n=it(A(this.element));this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let n=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,n))}};function vi(r,n){let{top:e,bottom:t,height:i}=r,s=i*fi;return n>=e-s&&n<=e+s?N.UP:n>=t-s&&n<=t+s?N.DOWN:N.NONE}function bi(r,n){let{left:e,right:t,width:i}=r,s=i*fi;return n>=e-s&&n<=e+s?F.LEFT:n>=t-s&&n<=t+s?F.RIGHT:F.NONE}function en(r,n,e,t,i){let s=vi(n,i),o=bi(n,t),c=N.NONE,h=F.NONE;if(s){let p=r.scrollTop;s===N.UP?p>0&&(c=N.UP):r.scrollHeight-p>r.clientHeight&&(c=N.DOWN)}if(o){let p=r.scrollLeft;e==="rtl"?o===F.RIGHT?p<0&&(h=F.RIGHT):r.scrollWidth+p>r.clientWidth&&(h=F.LEFT):o===F.LEFT?p>0&&(h=F.LEFT):r.scrollWidth-p>r.clientWidth&&(h=F.RIGHT)}return[c,h]}var Be=pe({passive:!1,capture:!0}),He=new Set,tn=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=Z({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[Y],decls:0,vars:0,template:function(t,i){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}"],encapsulation:2,changeDetection:0})}}return r})(),nn=(()=>{class r{constructor(e,t){this._ngZone=e,this._appRef=ce(Tt),this._environmentInjector=ce(Et),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new x,this.pointerUp=new x,this.scroll=new x,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Be)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Be)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._loadResets(),this._activeDragInstances.push(e),this._activeDragInstances.length===1)){let i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Be}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Be}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){let t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),this._activeDragInstances.length===0&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){let t=[this.scroll];return e&&e!==this._document&&t.push(new ae(i=>this._ngZone.runOutsideAngular(()=>{let o=c=>{this._activeDragInstances.length&&i.next(c)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),fe(...t)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}_loadResets(){if(!He.has(this._appRef)){He.add(this._appRef);let e=Pt(tn,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{He.delete(this._appRef),He.size===0&&e.destroy()})}}static{this.\u0275fac=function(t){return new(t||r)(I(q),I(j))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),rn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},pt=(()=>{class r{constructor(e,t,i,s){this._document=e,this._ngZone=t,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(e,t=rn){return new at(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new lt(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(t){return new(t||r)(I(j),I(q),I(Yt),I(nn))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),dt=new z("CDK_DRAG_PARENT");var wi=new z("CdkDragHandle"),Si=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}constructor(e,t){this.element=e,this._parentDrag=t,this._stateChanges=new x,this._disabled=!1,t?._addHandle(this)}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static{this.\u0275fac=function(t){return new(t||r)(_(K),_(dt,12))}}static{this.\u0275dir=ie({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[D.HasDecoratorInputTransform,"cdkDragHandleDisabled","disabled",re]},standalone:!0,features:[ne([{provide:wi,useExisting:r}]),le]})}}return r})(),yi=new z("CDK_DRAG_CONFIG"),sn="cdk-drag",xi=new z("CdkDropList"),Ei=(()=>{class r{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,t,i,s,o,c,h,p,b,T,L){this.element=e,this.dropContainer=t,this._ngZone=s,this._viewContainerRef=o,this._dir=h,this._changeDetectorRef=b,this._selfHandle=T,this._parentDrag=L,this._destroyed=new x,this._handles=new ft([]),this.started=new R,this.released=new R,this.ended=new R,this.entered=new R,this.exited=new R,this.dropped=new R,this.moved=new ae(U=>{let G=this._dragRef.moved.pipe(bt(Q=>({source:this,pointerPosition:Q.pointerPosition,event:Q.event,delta:Q.delta,distance:Q.distance}))).subscribe(U);return()=>{G.unsubscribe()}}),this._dragRef=p.createDrag(e,{dragStartThreshold:c&&c.dragStartThreshold!=null?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&c.pointerDirectionChangeThreshold!=null?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),c&&this._assignDefaults(c),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(qe(1),J(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){let t=e.rootElementSelector,i=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let e=r._dragInstances.indexOf(this);e>-1&&r._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let t=this._handles.getValue();t.push(e),this._handles.next(t)}_removeHandle(e){let t=this._handles.getValue(),i=t.indexOf(e);i>-1&&(t.splice(i,1),this._handles.next(t))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,t=e;this.rootElementSelector&&(t=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):A(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let t=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay=typeof i=="object"&&i?i:je(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(qe(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){if(t.classList.contains(sn)){e.withParent(r._dragInstances.find(i=>i.element.nativeElement===t)?._dragRef||null);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){let{lockAxis:t,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:c,draggingDisabled:h,rootElementSelector:p,previewContainer:b}=e;this.disabled=h??!1,this.dragStartDelay=i||0,t&&(this.lockAxis=t),s&&(this.constrainPosition=s),o&&(this.previewClass=o),c&&(this.boundaryElement=c),p&&(this.rootElementSelector=p),b&&(this.previewContainer=b)}_setupHandlesListener(){this._handles.pipe(xt(e=>{let t=e.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),Ye(e=>fe(...e.map(t=>t._stateChanges.pipe(ve(t))))),J(this._destroyed)).subscribe(e=>{let t=this._dragRef,i=e.element.nativeElement;e.disabled?t.disableHandle(i):t.enableHandle(i)})}static{this.\u0275fac=function(t){return new(t||r)(_(K),_(xi,12),_(j),_(q),_(Qe),_(yi,8),_(nt,8),_(pt),_(Ie),_(wi,10),_(dt,12))}}static{this.\u0275dir=ie({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){t&2&&be("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[D.None,"cdkDragData","data"],lockAxis:[D.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[D.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[D.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[D.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[D.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[D.HasDecoratorInputTransform,"cdkDragDisabled","disabled",re],constrainPosition:[D.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[D.None,"cdkDragPreviewClass","previewClass"],previewContainer:[D.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[ne([{provide:dt,useExisting:r}]),le,Xe]})}}return r})(),gi=new z("CdkDropListGroup");var on=0,Di=(()=>{class r{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,t,i,s,o,c,h){this.element=e,this._changeDetectorRef=i,this._scrollDispatcher=s,this._dir=o,this._group=c,this._destroyed=new x,this.connectedTo=[],this.id=`cdk-drop-list-${on++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new R,this.entered=new R,this.exited=new R,this.sorted=new R,this._unsortedItems=new Set,this._dropListRef=t.createDropList(e),this._dropListRef.data=this,h&&this._assignDefaults(h),this._dropListRef.enterPredicate=(p,b)=>this.enterPredicate(p.data,b.data),this._dropListRef.sortPredicate=(p,b,T)=>this.sortPredicate(p,b.data,T.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),c&&c._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=r._dropLists.indexOf(this);e>-1&&r._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(ve(this._dir.value),J(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{let t=Kt(this.connectedTo).map(i=>{if(typeof i=="string"){let s=r._dropLists.find(o=>o.id===i);return s}return i});if(this._group&&this._group._items.forEach(i=>{t.indexOf(i)===-1&&t.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=je(this.autoScrollStep,2),e.connectedTo(t.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),fe(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:t,draggingDisabled:i,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:c}=e;this.disabled=i??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=c||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static{this.\u0275fac=function(t){return new(t||r)(_(K),_(pt),_(Ie),_(qt),_(nt,8),_(gi,12),_(yi,8))}}static{this.\u0275dir=ie({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){t&2&&(de("id",i.id),be("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[D.None,"cdkDropListConnectedTo","connectedTo"],data:[D.None,"cdkDropListData","data"],orientation:[D.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[D.None,"cdkDropListLockAxis","lockAxis"],disabled:[D.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",re],sortingDisabled:[D.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",re],enterPredicate:[D.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[D.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[D.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",re],autoScrollStep:[D.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[ne([{provide:gi,useValue:void 0},{provide:xi,useExisting:r}]),le]})}}return r})();var Ii=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=te({type:r})}static{this.\u0275inj=ee({providers:[pt],imports:[Xt]})}}return r})();var oe=ke.base_url+"/encuestas-activacion",Ci=(()=>{class r{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(e){this.http=e}obtenerPorEncuesta(e){return this.http.get(`${oe}/encuesta/${e}`,{headers:this.getToken})}obtenerProgramacion(e){return this.http.get(`${oe}/${e}`,{headers:this.getToken})}nuevaProgramacion(e){return this.http.post(oe,e,{headers:this.getToken})}actualizarProgramacion(e,t){return this.http.patch(`${oe}/${e}`,t,{headers:this.getToken})}eliminarProgramacion(e){return this.http.delete(`${oe}/${e}`,{headers:this.getToken})}verificarAhora(){return this.http.post(`${oe}/verificar`,{},{headers:this.getToken})}static{this.\u0275fac=function(t){return new(t||r)(I(Pe))}}static{this.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var gt=(r,n)=>n.id,ln=r=>["/dashboard/reportes/encuesta",r],dn=r=>({"opacity-60":r}),hn=r=>({"opacity-50":r});function un(r,n){if(r&1&&(a(0,"a",37),v(),a(1,"svg",16),f(2,"path",38)(3,"path",39),l(),E(),a(4,"span",18),u(5,"Ver encuesta"),l()()),r&2){let e=g();It("routerLink","/public/encuesta/",e.idEncuesta,"")}}function pn(r,n){if(r&1){let e=C();a(0,"button",40),w("click",function(){S(e);let i=g();return y(i.encuestasService.abrirAbm("editar",i.encuesta))}),v(),a(1,"svg",16),f(2,"path",41),l(),E(),a(3,"span",18),u(4,"Editar encuesta"),l()()}}function gn(r,n){if(r&1){let e=C();a(0,"button",42),w("click",function(){S(e);let i=g();return y(i.activarDesactivarEncuesta())}),v(),a(1,"svg",16),f(2,"path",43),l(),u(3),l()}if(r&2){let e=g();m("ngClass",(e.encuesta==null?null:e.encuesta.estado)==="Activa"?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"),d(2),de("d",(e.encuesta==null?null:e.encuesta.estado)==="Activa"?"M6 18L18 6M6 6l12 12":"M5 13l4 4L19 7"),d(),P(" ",(e.encuesta==null?null:e.encuesta.estado)==="Activa"?"Desactivar":"Activar"," encuesta ")}}function mn(r,n){if(r&1){let e=C();a(0,"div",54)(1,"h3",55),u(2),l(),a(3,"div",56)(4,"div")(5,"label",57),u(6,"Fecha y hora de inicio"),l(),a(7,"input",58),W("ngModelChange",function(i){S(e);let s=g(2);return H(s.programacionForm.fechaInicio,i)||(s.programacionForm.fechaInicio=i),y(i)}),l()(),a(8,"div")(9,"label",57),u(10,"Fecha y hora de fin"),l(),a(11,"input",58),W("ngModelChange",function(i){S(e);let s=g(2);return H(s.programacionForm.fechaFin,i)||(s.programacionForm.fechaFin=i),y(i)}),l()()(),a(12,"div",59)(13,"button",60),w("click",function(){S(e);let i=g(2);return y(i.guardarProgramacion())}),u(14),l(),a(15,"button",61),w("click",function(){S(e);let i=g(2);return y(i.cerrarFormProgramacion())}),u(16," Cancelar "),l()()()}if(r&2){let e=g(2);d(2),P(" ",e.editandoProgramacion?"Editar programaci\xF3n":"Nueva programaci\xF3n"," "),d(5),B("ngModel",e.programacionForm.fechaInicio),d(4),B("ngModel",e.programacionForm.fechaFin),d(3),P(" ",e.editandoProgramacion?"Actualizar":"Guardar"," ")}}function _n(r,n){if(r&1){let e=C();a(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66),v(),a(4,"svg",67),f(5,"path",26),l(),E(),a(6,"span",68),u(7,"Programaci\xF3n autom\xE1tica"),l()(),a(8,"div",69)(9,"div")(10,"span",7),u(11,"Inicio:"),l(),u(12),Ee(13,"date"),l(),a(14,"div")(15,"span",7),u(16,"Fin:"),l(),u(17),Ee(18,"date"),l()()(),a(19,"div",33)(20,"button",70),w("click",function(){let i=S(e).$implicit,s=g(3);return y(s.editarProgramacion(i))}),v(),a(21,"svg",16),f(22,"path",41),l()(),E(),a(23,"button",71),w("click",function(){let i=S(e).$implicit,s=g(3);return y(s.eliminarProgramacion(i))}),v(),a(24,"svg",16),f(25,"path",72),l()()()()()}if(r&2){let e=n.$implicit;d(12),P(" ",De(13,2,e.fechaInicio,"dd/MM/yyyy HH:mm")," "),d(5),P(" ",De(18,5,e.fechaFin,"dd/MM/yyyy HH:mm")," ")}}function fn(r,n){if(r&1&&(a(0,"div",62),we(1,_n,26,8,"div",63,gt),l()),r&2){let e=g(2);d(),Se(e.programaciones)}}function vn(r,n){if(r&1){let e=C();a(0,"div",73)(1,"div",74),v(),a(2,"svg",75),f(3,"path",47),l()(),E(),a(4,"p",76),u(5,"No hay programaciones"),l(),a(6,"p",77),u(7,"La encuesta se activar\xE1/desactivar\xE1 manualmente"),l(),a(8,"button",78),w("click",function(){S(e);let i=g(2);return y(i.abrirFormProgramacion())}),v(),a(9,"svg",16),f(10,"path",50),l(),E(),a(11,"span"),u(12,"Crear primera programaci\xF3n"),l()()()}}function bn(r,n){if(r&1){let e=C();a(0,"div",20)(1,"div",44)(2,"h2",45),v(),a(3,"svg",46),f(4,"path",47),l(),E(),a(5,"span"),u(6,"Programaciones Autom\xE1ticas "),a(7,"span",48),u(8),l()()(),a(9,"button",49),w("click",function(){S(e);let i=g();return y(i.abrirFormProgramacion())}),v(),a(10,"svg",16),f(11,"path",50),l(),E(),a(12,"span"),u(13,"Nueva programaci\xF3n"),l()()(),k(14,mn,17,4,"div",51)(15,fn,3,0,"div",52)(16,vn,13,0,"div",53),l()}if(r&2){let e=g();d(8),P("(",e.programaciones.length,")"),d(6),m("ngIf",e.mostrarFormProgramacion),d(),m("ngIf",e.programaciones.length>0),d(),m("ngIf",e.programaciones.length===0&&!e.mostrarFormProgramacion)}}function wn(r,n){if(r&1&&(a(0,"option",87),u(1),l()),r&2){let e=n.$implicit;m("value",e.id),d(),Ct(" ",e.apellido,", ",e.nombre," (",e.usuario,") ")}}function Sn(r,n){if(r&1){let e=C();a(0,"div",84)(1,"h3",55),u(2,"Asignar usuario a la encuesta"),l(),a(3,"div",85)(4,"label",57),u(5,"Seleccionar usuario"),l(),a(6,"select",86),W("ngModelChange",function(i){S(e);let s=g(2);return H(s.usuarioSeleccionado,i)||(s.usuarioSeleccionado=i),y(i)}),a(7,"option",87),u(8,"-- Seleccionar usuario --"),l(),k(9,wn,2,4,"option",88),l()(),a(10,"div",59)(11,"button",89),w("click",function(){S(e);let i=g(2);return y(i.asignarUsuario())}),u(12," Asignar "),l(),a(13,"button",61),w("click",function(){S(e);let i=g(2);return y(i.cerrarFormAsignacion())}),u(14," Cancelar "),l()()()}if(r&2){let e=g(2);d(6),B("ngModel",e.usuarioSeleccionado),d(),m("value",null),d(2),m("ngForOf",e.usuariosDisponibles)}}function yn(r,n){if(r&1){let e=C();a(0,"div",92)(1,"div",93)(2,"div",94)(3,"div",95),u(4),l(),a(5,"div")(6,"p",68),u(7),l(),a(8,"p",96),u(9),l()()(),a(10,"button",97),w("click",function(){let i=S(e).$implicit,s=g(3);return y(s.removerUsuario(i))}),v(),a(11,"svg",16),f(12,"path",98),l()()()()}if(r&2){let e=n.$implicit;d(4),ye(" ",e.usuario.apellido.charAt(0),"",e.usuario.nombre.charAt(0)," "),d(3),ye("",e.usuario.apellido,", ",e.usuario.nombre," "),d(2),P(" DNI: ",e.dni,"")}}function xn(r,n){if(r&1&&(a(0,"div",90),k(1,yn,13,5,"div",91),l()),r&2){let e=g(2);d(),m("ngForOf",e.usuariosAsignados)}}function En(r,n){if(r&1){let e=C();a(0,"div",73)(1,"div",99),v(),a(2,"svg",100),f(3,"path",80),l()(),E(),a(4,"p",76),u(5,"No hay usuarios asignados"),l(),a(6,"p",77),u(7,"Los usuarios asignados podr\xE1n visualizar esta encuesta"),l(),a(8,"button",101),w("click",function(){S(e);let i=g(2);return y(i.abrirFormAsignacion())}),v(),a(9,"svg",16),f(10,"path",50),l(),E(),a(11,"span"),u(12,"Asignar primer usuario"),l()()()}}function Dn(r,n){if(r&1){let e=C();a(0,"div",20)(1,"div",44)(2,"h2",45),v(),a(3,"svg",79),f(4,"path",80),l(),E(),a(5,"span"),u(6,"Usuarios Asignados "),a(7,"span",48),u(8),l()()(),a(9,"button",81),w("click",function(){S(e);let i=g();return y(i.abrirFormAsignacion())}),v(),a(10,"svg",16),f(11,"path",50),l(),E(),a(12,"span"),u(13,"Asignar usuario"),l()()(),k(14,Sn,15,3,"div",82)(15,xn,2,1,"div",83)(16,En,13,0,"div",53),l()}if(r&2){let e=g();d(8),P("(",e.usuariosAsignados.length,")"),d(6),m("ngIf",e.mostrarFormAsignacion),d(),m("ngIf",e.usuariosAsignados.length>0),d(),m("ngIf",e.usuariosAsignados.length===0&&!e.mostrarFormAsignacion)}}function In(r,n){if(r&1){let e=C();a(0,"div",44)(1,"h2",45),f(2,"img",102),a(3,"span"),u(4,"Preguntas "),a(5,"span",48),u(6),l()()(),a(7,"button",103),w("click",function(){S(e);let i=g();return y(i.preguntasService.abrirAbm("crear",null,i.encuesta))}),v(),a(8,"svg",16),f(9,"path",50),l(),E(),a(10,"span"),u(11,"Nueva pregunta"),l()()()}if(r&2){let e=g();d(6),P("(",e.encuesta==null?null:e.encuesta.Preguntas.length,")")}}function Cn(r,n){r&1&&(a(0,"span",119),v(),a(1,"svg",120),f(2,"path",121),l(),u(3," M\xFAltiples respuestas "),l())}function Tn(r,n){if(r&1){let e=C();a(0,"button",125),w("click",function(){S(e);let i=g(2).$implicit,s=g(2);return y(s.eliminarPregunta(i))}),v(),a(1,"svg",16),f(2,"path",98),l()()}}function Pn(r,n){if(r&1){let e=C();a(0,"button",126),w("click",function(){S(e);let i=g(2).$implicit,s=g(2);return y(s.activarPregunta(i))}),v(),a(1,"svg",16),f(2,"path",127),l()()}}function kn(r,n){if(r&1){let e=C();a(0,"div",113)(1,"button",122),w("click",function(){S(e);let i=g().$implicit,s=g(2);return y(s.preguntasService.abrirAbm("editar",i,s.encuesta))}),v(),a(2,"svg",16),f(3,"path",41),l()(),k(4,Tn,3,0,"button",123)(5,Pn,3,0,"button",124),l()}if(r&2){let e=g().$implicit;d(4),m("ngIf",e.activo),d(),m("ngIf",!e.activo)}}function Rn(r,n){if(r&1){let e=C();a(0,"button",136),w("click",function(){S(e);let i=g(2).$implicit,s=g(3);return y(s.cambiarEstadoRespuesta(i,!1))}),v(),a(1,"svg",137),f(2,"path",98),l()()}}function An(r,n){if(r&1){let e=C();a(0,"button",138),w("click",function(){S(e);let i=g(2).$implicit,s=g(3);return y(s.cambiarEstadoRespuesta(i,!0))}),v(),a(1,"svg",137),f(2,"path",127),l()()}}function Fn(r,n){if(r&1&&(a(0,"div",133),k(1,Rn,3,0,"button",134)(2,An,3,0,"button",135),l()),r&2){let e=g().$implicit;d(),m("ngIf",e.activo),d(),m("ngIf",!e.activo)}}function Mn(r,n){if(r&1&&(a(0,"div",118)(1,"div",107)(2,"div",108),v(),a(3,"svg",128),f(4,"path",110),l(),E(),a(5,"span",129),u(6),l()(),a(7,"p",130),u(8),l(),a(9,"span",131),u(10),l()(),k(11,Fn,3,2,"div",132),l()),r&2){let e=n.$implicit,t=g(3);m("ngClass",xe(6,hn,!e.activo)),d(6),P(" ",e.orden," "),d(2),he(e.descripcion),d(),m("ngClass",e.activo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),d(),P(" ",e.activo?"Activa":"Inactiva"," "),d(),m("ngIf",t.authService.isAdmin)}}function Ln(r,n){if(r&1){let e=C();a(0,"div",105)(1,"div",106)(2,"div",107)(3,"div",108),v(),a(4,"svg",109),f(5,"path",110),l(),E(),a(6,"span",111),u(7),l()(),a(8,"h3",112),u(9),l(),a(10,"div",113)(11,"span",114),u(12),l(),k(13,Cn,4,0,"span",115),l()(),k(14,kn,6,2,"div",116),l(),a(15,"div",117),w("cdkDropListDropped",function(i){let s=S(e).$implicit,o=g(2);return y(o.dropRespuesta(i,s))}),we(16,Mn,12,8,"div",118,gt),l()()}if(r&2){let e=n.$implicit,t=g(2);m("ngClass",xe(7,dn,!e.activo)),d(7),P(" ",e.orden," "),d(2),he(e.descripcion),d(2),m("ngClass",e.activo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),d(),P(" ",e.activo?"Activa":"Inactiva"," "),d(),m("ngIf",e.multiplesRespuestas),d(),m("ngIf",t.authService.isAdmin),d(2),Se(e.Respuestas)}}function On(r,n){if(r&1){let e=C();a(0,"div",104),w("cdkDropListDropped",function(i){S(e);let s=g();return y(s.dropPregunta(i))}),we(1,Ln,18,9,"div",105,gt),l()}if(r&2){let e=g();d(),Se(e.preguntasFiltradas)}}function Nn(r,n){if(r&1){let e=C();a(0,"button",143),w("click",function(){S(e);let i=g(2);return y(i.preguntasService.abrirAbm("crear",null,i.encuesta))}),v(),a(1,"svg",16),f(2,"path",50),l(),E(),a(3,"span"),u(4,"Agregar primera pregunta"),l()()}}function Vn(r,n){if(r&1&&(a(0,"div",139)(1,"div",140),f(2,"img",141),l(),a(3,"p",76),u(4,"No hay preguntas"),l(),a(5,"p",77),u(6,"Comienza agregando la primera pregunta a esta encuesta"),l(),k(7,Nn,5,0,"button",142),l()),r&2){let e=g();d(7),m("ngIf",e.authService.isAdmin)}}function jn(r,n){if(r&1&&(a(0,"div",139)(1,"div",140),v(),a(2,"svg",144),f(3,"path",145),l()(),E(),a(4,"p",76),u(5),l(),a(6,"p",146),u(7,"Prueba cambiando el filtro para ver otras preguntas"),l()()),r&2){let e=g();d(5),P("No hay preguntas ",e.filtroActivo==="true"?"activas":"inactivas","")}}var os=(()=>{class r{constructor(e,t,i,s,o,c,h,p,b){this.authService=e,this.activatedRoute=t,this.encuestasService=i,this.preguntasService=s,this.encuestasActivacionService=o,this.usuariosService=c,this.alertService=h,this.toastr=p,this.router=b,this.filtroActivo="all",this.programaciones=[],this.mostrarFormProgramacion=!1,this.programacionForm={fechaInicio:"",fechaFin:""},this.editandoProgramacion=null,this.usuariosAsignados=[],this.usuariosDisponibles=[],this.mostrarFormAsignacion=!1,this.usuarioSeleccionado=null}ngOnInit(){this.alertService.loading(),this.activatedRoute.params.subscribe({next:({id:e})=>{this.idEncuesta=e,this.obtenerEncuesta()},error:({error:e})=>{this.alertService.errorApi(e.message)}})}get preguntasFiltradas(){return this.encuesta?.Preguntas?this.filtroActivo==="all"?this.encuesta.Preguntas:this.filtroActivo==="true"?this.encuesta.Preguntas.filter(e=>!!e.activo):this.encuesta.Preguntas.filter(e=>!e.activo):[]}get cantidadPreguntasActivas(){return this.encuesta?.Preguntas?this.encuesta.Preguntas.filter(e=>!!e.activo).length:0}get cantidadPreguntasInactivas(){return this.encuesta?.Preguntas?this.encuesta.Preguntas.filter(e=>!e.activo).length:0}obtenerEncuesta(){this.encuestasService.obtenerEncuesta(this.idEncuesta).subscribe({next:({encuesta:e})=>{this.encuesta=e,this.ordenarPreguntas(),console.log(this.encuesta),this.cargarProgramaciones(),this.cargarUsuariosAsignados(),this.alertService.close()},error:({error:e})=>{this.alertService.errorApi(e.message)}})}ordenarPreguntas(){this.encuesta&&this.encuesta.Preguntas&&(this.encuesta.Preguntas.sort((e,t)=>e.orden-t.orden),this.encuesta.Preguntas.forEach(e=>{e.Respuestas&&e.Respuestas.sort((t,i)=>t.orden-i.orden)}))}cargarProgramaciones(){this.encuestasActivacionService.obtenerPorEncuesta(this.idEncuesta).subscribe({next:({programaciones:e})=>{this.programaciones=e},error:({error:e})=>{this.alertService.errorApi(e.message)}})}abrirFormProgramacion(){this.mostrarFormProgramacion=!0,this.programacionForm={fechaInicio:"",fechaFin:""},this.editandoProgramacion=null}cerrarFormProgramacion(){this.mostrarFormProgramacion=!1,this.programacionForm={fechaInicio:"",fechaFin:""},this.editandoProgramacion=null}guardarProgramacion(){if(!this.programacionForm.fechaInicio||!this.programacionForm.fechaFin){this.toastr.error("Completa todos los campos","Error");return}let e={encuestaId:Number(this.idEncuesta),fechaInicio:new Date(this.programacionForm.fechaInicio).toISOString(),fechaFin:new Date(this.programacionForm.fechaFin).toISOString(),creatorUserId:this.encuesta.creatorUserId};this.editandoProgramacion?this.encuestasActivacionService.actualizarProgramacion(this.editandoProgramacion.id.toString(),e).subscribe({next:()=>{this.toastr.success("Programaci\xF3n actualizada","\xC9xito"),this.cargarProgramaciones(),this.cerrarFormProgramacion()},error:({error:t})=>{this.alertService.errorApi(t.message)}}):this.encuestasActivacionService.nuevaProgramacion(e).subscribe({next:()=>{this.toastr.success("Programaci\xF3n creada","\xC9xito"),this.cargarProgramaciones(),this.cerrarFormProgramacion()},error:({error:t})=>{this.alertService.errorApi(t.message)}})}editarProgramacion(e){this.editandoProgramacion=e,this.programacionForm={fechaInicio:new Date(e.fechaInicio).toISOString().slice(0,16),fechaFin:new Date(e.fechaFin).toISOString().slice(0,16)},this.mostrarFormProgramacion=!0}eliminarProgramacion(e){this.alertService.question({msg:"Eliminando programaci\xF3n",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{t&&(this.alertService.loading(),this.encuestasActivacionService.eliminarProgramacion(e.id.toString()).subscribe({next:()=>{this.toastr.success("Programaci\xF3n eliminada","\xC9xito"),this.cargarProgramaciones(),this.alertService.close()},error:({error:i})=>{this.alertService.errorApi(i.message)}}))})}activarDesactivarEncuesta(){this.alertService.question({msg:`${this.encuesta.estado==="Activa"?"Desactivando":"Activando"} la encuesta`,buttonText:"Aceptar"}).then(({isConfirmed:e})=>{if(e){this.alertService.loading();let t=this.encuesta.estado==="Activa"?"Inactiva":"Activa";this.encuestasService.actualizarEncuesta(this.idEncuesta,{estado:t}).subscribe({next:()=>{this.alertService.close(),this.encuesta.estado=t,this.toastr.success("Actualizada correctamente","Encuesta")},error:({error:i})=>this.alertService.errorApi(i.message)})}})}actualizarEncuesta(e){this.encuesta=e,this.ordenarPreguntas()}agregarPregunta(e){this.encuesta.Preguntas.push(e),this.ordenarPreguntas()}actualizarPregunta(e){this.encuesta.Preguntas=this.encuesta.Preguntas.map(t=>t.id===e.id?e:t),this.ordenarPreguntas(),console.log(this.encuesta)}eliminarPregunta(e){let t=e.activo?"Dando de baja pregunta":"Pregunta ya est\xE1 inactiva";this.alertService.question({msg:t,buttonText:"Aceptar"}).then(({isConfirmed:i})=>{i&&e.activo&&(this.alertService.loading(),this.preguntasService.eliminarPregunta(e.id).subscribe({next:()=>{this.toastr.success("Dada de baja correctamente","Pregunta"),this.obtenerEncuesta()},error:({error:s})=>this.alertService.errorApi(s.message)}))})}activarPregunta(e){this.alertService.question({msg:"Activando pregunta",buttonText:"Aceptar"}).then(({isConfirmed:t})=>{t&&(this.alertService.loading(),this.preguntasService.activarPregunta(e.id).subscribe({next:()=>{this.toastr.success("Activada correctamente","Pregunta"),this.obtenerEncuesta()},error:({error:i})=>this.alertService.errorApi(i.message)}))})}cambiarEstadoRespuesta(e,t){let i=t?"Activando":"Desactivando";this.alertService.question({msg:`${i} respuesta`,buttonText:"Aceptar"}).then(({isConfirmed:s})=>{s&&(this.alertService.loading(),(t?this.preguntasService.activarRespuesta(e.id):this.preguntasService.desactivarRespuesta(e.id)).subscribe({next:()=>{this.toastr.success(`${i} correctamente`,"Respuesta"),this.obtenerEncuesta()},error:({error:c})=>this.alertService.errorApi(c.message)}))})}eliminarEncuesta(){this.alertService.question({msg:"Eliminando encuesta",buttonText:"Aceptar"}).then(({isConfirmed:e})=>{e&&(this.alertService.loading(),this.encuestasService.eliminarEncuesta(this.idEncuesta).subscribe({next:()=>{this.toastr.success("Eliminada correctamente","Encuesta"),this.alertService.close(),this.router.navigate(["/dashboard/encuestas"])},error:({error:t})=>this.alertService.errorApi(t.message)}))})}reordenarPregunta(e,t){this.alertService.loading(),this.preguntasService.reordenarPregunta(e.id,t).subscribe({next:()=>{this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Pregunta")},error:({error:i})=>this.alertService.errorApi(i.message)})}reordenarRespuesta(e,t){this.alertService.loading(),this.preguntasService.reordenarRespuesta(e.id,t).subscribe({next:()=>{this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Respuesta")},error:({error:i})=>this.alertService.errorApi(i.message)})}cargarUsuariosAsignados(){this.encuestasService.obtenerUsuariosAsignados(this.idEncuesta).subscribe({next:({usuarios:e})=>{this.usuariosAsignados=e},error:({error:e})=>{this.alertService.errorApi(e.message)}})}cargarUsuariosDisponibles(){this.usuariosService.listarUsuarios(1,"apellido").subscribe({next:({usuarios:e})=>{let t=this.usuariosAsignados.map(i=>i.usuario.id);this.usuariosDisponibles=e.filter(i=>!t.includes(i.id)&&i.activo)},error:({error:e})=>{this.alertService.errorApi(e.message)}})}abrirFormAsignacion(){this.cargarUsuariosDisponibles(),this.mostrarFormAsignacion=!0,this.usuarioSeleccionado=null}cerrarFormAsignacion(){this.mostrarFormAsignacion=!1,this.usuarioSeleccionado=null}asignarUsuario(){if(!this.usuarioSeleccionado){this.toastr.error("Selecciona un usuario","Error");return}this.alertService.loading(),this.encuestasService.asignarUsuario(this.idEncuesta,this.usuarioSeleccionado).subscribe({next:()=>{this.toastr.success("Usuario asignado correctamente","\xC9xito"),this.cargarUsuariosAsignados(),this.cerrarFormAsignacion(),this.alertService.close()},error:({error:e})=>{this.alertService.errorApi(e.message)}})}removerUsuario(e){this.alertService.question({msg:`\xBFRemover a ${e.usuario.apellido}, ${e.usuario.nombre} de esta encuesta?`,buttonText:"Aceptar"}).then(({isConfirmed:t})=>{t&&(this.alertService.loading(),this.encuestasService.removerUsuario(this.idEncuesta,e.usuario.id).subscribe({next:()=>{this.toastr.success("Usuario removido correctamente","\xC9xito"),this.cargarUsuariosAsignados(),this.alertService.close()},error:({error:i})=>{this.alertService.errorApi(i.message)}}))})}dropPregunta(e){if(e.previousIndex===e.currentIndex)return;let t=this.preguntasFiltradas[e.previousIndex],i=this.preguntasFiltradas[e.currentIndex],s=t.orden,o=i.orden,c=o<s?"arriba":"abajo",h=Math.abs(o-s);console.log("Moviendo pregunta:",{pregunta:t.descripcion,ordenOrigen:s,ordenDestino:o,direccion:c,steps:h,previousIndex:e.previousIndex,currentIndex:e.currentIndex}),this.alertService.loading(),this.ejecutarReordenamientoPreguntas(t.id,c,h,0)}ejecutarReordenamientoPreguntas(e,t,i,s){if(s>=i){this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Pregunta");return}this.preguntasService.reordenarPregunta(e,t).subscribe({next:()=>{this.ejecutarReordenamientoPreguntas(e,t,i,s+1)},error:({error:o})=>{this.alertService.errorApi(o.message)}})}dropRespuesta(e,t){if(e.previousIndex===e.currentIndex)return;let i=t.Respuestas[e.previousIndex],s=t.Respuestas[e.currentIndex],o=i.orden,c=s.orden,h=c<o?"arriba":"abajo",p=Math.abs(c-o);console.log("Moviendo respuesta:",{respuesta:i.descripcion,ordenOrigen:o,ordenDestino:c,direccion:h,steps:p,previousIndex:e.previousIndex,currentIndex:e.currentIndex}),this.alertService.loading(),this.ejecutarReordenamientoRespuestas(i.id,h,p,0)}ejecutarReordenamientoRespuestas(e,t,i,s){if(s>=i){this.obtenerEncuesta(),this.toastr.success("Orden actualizado","Respuesta");return}this.preguntasService.reordenarRespuesta(e,t).subscribe({next:()=>{this.ejecutarReordenamientoRespuestas(e,t,i,s+1)},error:({error:o})=>{this.alertService.errorApi(o.message)}})}static{this.\u0275fac=function(t){return new(t||r)(_(Re),_(Mt),_(Ht),_(Ve),_(Ci),_(Ut),_(Oe),_(Ne),_(Lt))}}static{this.\u0275cmp=Z({type:r,selectors:[["app-detalles-encuestas"]],standalone:!0,features:[Y],decls:61,vars:28,consts:[[3,"updateEvent"],[3,"insertEvent","updateEvent"],[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],["routerLink","/dashboard/encuestas",1,"flex","items-center","gap-2","px-4","py-2","bg-gray-100","hover:bg-gray-200","text-gray-700","rounded-lg","transition-colors","border","border-gray-300","duration-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"],[1,"font-medium"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200","p-8","mb-6"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-600","mb-4"],[1,"inline-flex","items-center","px-4","py-1.5","rounded-full","text-sm","font-semibold",3,"ngClass"],[1,"flex","flex-col","sm:flex-row","gap-3","pt-6","border-t","border-gray-200"],["class","flex items-center justify-center gap-2 px-5 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all duration-200 shadow hover:shadow-lg flex-1",3,"routerLink",4,"ngIf"],[1,"flex","items-center","justify-center","gap-2","px-5","py-3","bg-purple-500","hover:bg-purple-600","text-white","rounded-lg","transition-all","duration-200","shadow","hover:shadow-lg","flex-1",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"font-semibold"],["class","flex items-center justify-center gap-2 px-5 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-all duration-200 shadow hover:shadow-lg flex-1",3,"click",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200","p-6","mb-6"],[1,"flex","flex-col","md:flex-row","md:justify-between","md:items-center","gap-6"],[1,"space-y-3","text-sm"],[1,"flex","items-center","gap-3","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["class","flex items-center justify-center gap-2 px-6 py-2.5 text-white font-medium rounded-lg shadow-sm hover:shadow transition-all duration-200",3,"ngClass","click",4,"ngIf"],["class","bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","border","border-gray-200","p-6"],["class","flex items-center justify-between pb-5 mb-6 border-b border-gray-200",4,"ngIf"],[1,"flex","items-center","gap-3","mb-6","pb-5","border-b","border-gray-200"],[1,"text-sm","font-medium","text-gray-700"],[1,"flex","gap-2"],[1,"px-4","py-2","rounded-lg","font-medium","text-sm","transition-all","duration-200",3,"click","ngClass"],["cdkDropList","","class","space-y-4",3,"cdkDropListDropped",4,"ngIf"],["class","text-center py-16",4,"ngIf"],[1,"flex","items-center","justify-center","gap-2","px-5","py-3","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-all","duration-200","shadow","hover:shadow-lg","flex-1",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"flex","items-center","justify-center","gap-2","px-5","py-3","bg-orange-500","hover:bg-orange-600","text-white","rounded-lg","transition-all","duration-200","shadow","hover:shadow-lg","flex-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"flex","items-center","justify-center","gap-2","px-6","py-2.5","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click","ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"flex","items-center","justify-between","pb-5","mb-6","border-b","border-gray-200"],[1,"text-2xl","font-bold","text-gray-800","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-teal-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-500","font-normal"],[1,"flex","items-center","gap-2","px-5","py-2.5","bg-teal-500","hover:bg-teal-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","bg-teal-50 rounded-lg border border-teal-200 p-6 mb-6",4,"ngIf"],["class","space-y-4",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"bg-teal-50","rounded-lg","border","border-teal-200","p-6","mb-6"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","datetime-local",1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-teal-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","gap-3"],[1,"px-6","py-2.5","bg-teal-500","hover:bg-teal-600","text-white","rounded-lg","transition-colors","duration-200","font-medium",3,"click"],[1,"px-6","py-2.5","bg-gray-500","hover:bg-gray-600","text-white","rounded-lg","transition-colors","duration-200","font-medium",3,"click"],[1,"space-y-4"],[1,"bg-gradient-to-r","from-teal-50","to-white","rounded-lg","border","border-teal-200","p-5"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"flex-1"],[1,"flex","items-center","gap-2","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-teal-600"],[1,"font-semibold","text-gray-800"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2","text-sm","text-gray-700"],["title","Editar programaci\xF3n",1,"p-2","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["title","Eliminar programaci\xF3n",1,"p-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-center","py-12"],[1,"w-20","h-20","mx-auto","mb-4","bg-teal-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-teal-500"],[1,"text-gray-600","text-lg","font-semibold","mb-1"],[1,"text-gray-500","text-sm","mb-6"],[1,"inline-flex","items-center","gap-2","px-6","py-3","bg-teal-500","hover:bg-teal-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-indigo-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"flex","items-center","gap-2","px-5","py-2.5","bg-indigo-500","hover:bg-indigo-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click"],["class","bg-indigo-50 rounded-lg border border-indigo-200 p-6 mb-6",4,"ngIf"],["class","space-y-3",4,"ngIf"],[1,"bg-indigo-50","rounded-lg","border","border-indigo-200","p-6","mb-6"],[1,"mb-4"],[1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-transparent",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"px-6","py-2.5","bg-indigo-500","hover:bg-indigo-600","text-white","rounded-lg","transition-colors","duration-200","font-medium",3,"click"],[1,"space-y-3"],["class","bg-gradient-to-r from-indigo-50 to-white rounded-lg border border-indigo-200 p-4",4,"ngFor","ngForOf"],[1,"bg-gradient-to-r","from-indigo-50","to-white","rounded-lg","border","border-indigo-200","p-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-indigo-500","rounded-full","flex","items-center","justify-center","text-white","font-bold"],[1,"text-sm","text-gray-600"],["title","Remover usuario",1,"p-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"w-20","h-20","mx-auto","mb-4","bg-indigo-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-indigo-500"],[1,"inline-flex","items-center","gap-2","px-6","py-3","bg-indigo-500","hover:bg-indigo-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click"],["src","assets/svg/preguntas.svg","alt","Preguntas",1,"w-6","h-6"],[1,"flex","items-center","gap-2","px-5","py-2.5","bg-green-500","hover:bg-green-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click"],["cdkDropList","",1,"space-y-4",3,"cdkDropListDropped"],["cdkDrag","",1,"bg-gradient-to-br","from-gray-50","to-white","rounded-lg","border","border-gray-200","p-5","hover:shadow-md","transition-shadow","duration-200",3,"ngClass"],[1,"flex","items-start","justify-between","gap-3","mb-4"],[1,"flex","items-center","gap-3","flex-1"],["cdkDragHandle","",1,"flex","items-center","gap-2","cursor-move","flex-shrink-0"],["fill","currentColor","viewBox","0 0 20 20",1,"w-6","h-6","text-gray-400","hover:text-gray-600"],["d","M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"],[1,"flex","items-center","justify-center","w-8","h-8","bg-blue-500","text-white","text-sm","font-bold","rounded-full"],[1,"text-lg","font-semibold","text-gray-800"],[1,"flex","gap-2","flex-shrink-0"],[1,"px-3","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],["class","px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-700 flex items-center gap-1","title","Permite seleccionar m\xFAltiples respuestas",4,"ngIf"],["class","flex gap-2 flex-shrink-0",4,"ngIf"],["cdkDropList","",1,"ml-11","space-y-2",3,"cdkDropListDropped"],["cdkDrag","",1,"flex","items-center","justify-between","gap-3","p-3","bg-white","rounded-lg","border","border-gray-200",3,"ngClass"],["title","Permite seleccionar m\xFAltiples respuestas",1,"px-3","py-1","rounded-full","text-xs","font-semibold","bg-purple-100","text-purple-700","flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["title","Editar pregunta",1,"p-2","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["title","Desactivar pregunta","class","p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-200",3,"click",4,"ngIf"],["title","Activar pregunta","class","p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors duration-200",3,"click",4,"ngIf"],["title","Desactivar pregunta",1,"p-2","bg-red-500","hover:bg-red-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["title","Activar pregunta",1,"p-2","bg-green-500","hover:bg-green-600","text-white","rounded-lg","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-400","hover:text-gray-600"],[1,"flex","items-center","justify-center","w-6","h-6","bg-gray-200","text-gray-700","text-xs","font-semibold","rounded-full"],[1,"text-gray-700"],[1,"px-2","py-0.5","rounded-full","text-xs","font-semibold","flex-shrink-0",3,"ngClass"],["class","flex gap-1",4,"ngIf"],[1,"flex","gap-1"],["title","Desactivar respuesta","class","p-1 bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200",3,"click",4,"ngIf"],["title","Activar respuesta","class","p-1 bg-green-500 hover:bg-green-600 text-white rounded transition-colors duration-200",3,"click",4,"ngIf"],["title","Desactivar respuesta",1,"p-1","bg-red-500","hover:bg-red-600","text-white","rounded","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["title","Activar respuesta",1,"p-1","bg-green-500","hover:bg-green-600","text-white","rounded","transition-colors","duration-200",3,"click"],[1,"text-center","py-16"],[1,"w-20","h-20","mx-auto","mb-4","bg-gray-100","rounded-full","flex","items-center","justify-center"],["src","assets/svg/preguntas.svg","alt","Preguntas",1,"w-10","h-10","opacity-40"],["class","inline-flex items-center gap-2 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg shadow-sm hover:shadow transition-all duration-200",3,"click",4,"ngIf"],[1,"inline-flex","items-center","gap-2","px-6","py-3","bg-green-500","hover:bg-green-600","text-white","font-medium","rounded-lg","shadow-sm","hover:shadow","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"text-gray-500","text-sm"]],template:function(t,i){t&1&&(a(0,"app-abm-encuestas",0),w("updateEvent",function(o){return i.actualizarEncuesta(o)}),l(),a(1,"app-abm-preguntas",1),w("insertEvent",function(o){return i.agregarPregunta(o)})("updateEvent",function(o){return i.actualizarPregunta(o)}),l(),a(2,"div",2)(3,"div",3)(4,"button",4),v(),a(5,"svg",5),f(6,"path",6),l(),E(),a(7,"span",7),u(8,"Regresar"),l()()(),a(9,"div",8)(10,"div",9)(11,"h1",10),u(12),l(),a(13,"p",11),u(14),l(),a(15,"span",12),u(16),l()(),a(17,"div",13),k(18,un,6,2,"a",14),a(19,"a",15),v(),a(20,"svg",16),f(21,"path",17),l(),E(),a(22,"span",18),u(23,"Reportes"),l()(),k(24,pn,5,0,"button",19),l()(),a(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23),v(),a(29,"svg",24),f(30,"path",25),l(),E(),a(31,"span")(32,"span",18),u(33,"Creado por:"),l(),u(34),l()(),a(35,"div",23),v(),a(36,"svg",24),f(37,"path",26),l(),E(),a(38,"span")(39,"span",18),u(40,"Fecha:"),l(),u(41),Ee(42,"date"),l()()(),k(43,gn,4,3,"button",27),l()(),k(44,bn,17,4,"div",28)(45,Dn,17,4,"div",28),a(46,"div",29),k(47,In,12,1,"div",30),a(48,"div",31)(49,"span",32),u(50,"Filtrar preguntas:"),l(),a(51,"div",33)(52,"button",34),w("click",function(){return i.filtroActivo="all"}),u(53),l(),a(54,"button",34),w("click",function(){return i.filtroActivo="true"}),u(55),l(),a(56,"button",34),w("click",function(){return i.filtroActivo="false"}),u(57),l()()(),k(58,On,3,0,"div",35)(59,Vn,8,1,"div",36)(60,jn,8,1,"div",36),l()()),t&2&&(d(12),he(i.encuesta==null?null:i.encuesta.titulo),d(2),he(i.encuesta==null?null:i.encuesta.descripcion),d(),m("ngClass",(i.encuesta==null?null:i.encuesta.estado)==="Activa"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),d(),P(" ",i.encuesta==null?null:i.encuesta.estado," "),d(2),m("ngIf",i.authService.isAdmin),d(),m("routerLink",xe(26,ln,i.idEncuesta)),d(5),m("ngIf",i.authService.isAdmin),d(10),ye(" ",i.encuesta==null||i.encuesta.creatorUser==null?null:i.encuesta.creatorUser.apellido,", ",i.encuesta==null||i.encuesta.creatorUser==null?null:i.encuesta.creatorUser.nombre,""),d(7),P(" ",De(42,23,i.encuesta==null?null:i.encuesta.createdAt,"dd/MM/yyyy"),""),d(2),m("ngIf",i.authService.isAdmin),d(),m("ngIf",i.authService.isAdmin),d(),m("ngIf",i.authService.isAdmin),d(2),m("ngIf",i.authService.isAdmin),d(5),m("ngClass",i.filtroActivo==="all"?"bg-blue-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"),d(),P(" Todas (",(i.encuesta==null?null:i.encuesta.Preguntas.length)||0,") "),d(),m("ngClass",i.filtroActivo==="true"?"bg-green-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"),d(),P(" Activas (",i.cantidadPreguntasActivas,") "),d(),m("ngClass",i.filtroActivo==="false"?"bg-red-500 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"),d(),P(" Inactivas (",i.cantidadPreguntasInactivas,") "),d(),m("ngIf",i.preguntasFiltradas.length>0),d(),m("ngIf",(i.encuesta==null?null:i.encuesta.Preguntas.length)===0),d(),m("ngIf",(i.encuesta==null?null:i.encuesta.Preguntas.length)>0&&i.preguntasFiltradas.length===0))},dependencies:[Te,kt,Ce,Rt,At,Nt,Ot,Le,zt,Bt,Ae,jt,Fe,Me,Gt,Zt,Ii,Di,Ei,Si],styles:[".cdk-drop-list[_ngcontent-%COMP%]{display:block}.cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1);cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 5px 15px #0000004d;opacity:.9;border-radius:.5rem}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.4;background:#f3f4f6;border:2px dashed #9ca3af;border-radius:.5rem}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}}return r})();export{os as default};
