import{a as U}from"./chunk-UGQGUFR7.js";import{a as L,b as m,c as R,d as j,g as P,h as T,i as k,o as M,q as D}from"./chunk-FQOKV524.js";import{a as z}from"./chunk-VUVQYZVZ.js";import{a as N}from"./chunk-5QPYTDH3.js";import{a as q}from"./chunk-HZWOLOZV.js";import{e as C,g as I,h as F,k as A}from"./chunk-DJ4G2GYC.js";import{m as y,p as _}from"./chunk-AMUWJEPN.js";import{Ab as f,Kb as n,Mb as p,Nb as E,Tb as S,Ua as a,Va as d,ga as w,ib as c,kb as s,qb as o,rb as r,sa as v,sb as g,ta as b,zb as x}from"./chunk-DRQLPHCS.js";function V(t,u){t&1&&(o(0,"p",25),n(1," Campo obligatorio "),r())}function B(t,u){if(t&1&&(o(0,"p",25),n(1),r()),t&2){let i=f();a(),p(" M\xEDnimo ",i.password==null||i.password.errors==null?null:i.password.errors.minlength.requiredLength," caracteres ")}}function H(t,u){t&1&&(o(0,"p",25),n(1," Campo obligatorio "),r())}function J(t,u){if(t&1&&(o(0,"p",25),n(1),r()),t&2){let i=f();a(),p(" M\xEDnimo ",i.repetir==null||i.repetir.errors==null?null:i.repetir.errors.minlength.requiredLength," caracteres ")}}function K(t,u){t&1&&(o(0,"div",26)(1,"p",27),n(2,"A"),r()())}function Q(t,u){t&1&&(o(0,"div",28)(1,"p",27),n(2,"E"),r()())}function W(t,u){t&1&&(o(0,"div",29)(1,"p",27),n(2,"En"),r()())}var le=(()=>{class t{get password(){return this.passwordForm.get("password")}get repetir(){return this.passwordForm.get("repetir")}constructor(i,l,e,h,G,O){this.router=i,this.fb=l,this.activatedRoute=e,this.usuariosService=h,this.alertService=G,this.dataService=O,this.loading=!0,this.usuario={id:"",usuario:"",apellido:"",nombre:"",email:"",role:""},this.passwordForm=this.fb.group({password:["",[m.required,m.minLength(4)]],repetir:["",[m.required,m.minLength(4)]]})}ngOnInit(){N.from(".gsap-contenido",{y:100,opacity:0,duration:.2}),this.dataService.ubicacionActual="Dashboard - Actualizando password",this.alertService.loading(),this.activatedRoute.params.subscribe({next:({id:i})=>{this.id=i,this.usuariosService.getUsuario(i).subscribe(l=>{this.usuario=l,this.alertService.close()})},error:({error:i})=>this.alertService.errorApi(i.message)})}actualizarPassword(){let{password:i}=this.passwordForm.value;if(i!==this.repetir.value){this.alertService.errorApi("Las contrase\xF1as deben coincidir");return}this.passwordForm.valid?(this.alertService.loading(),this.usuario.password=i,this.usuario.activo="true",this.usuariosService.actualizarUsuario(this.id,this.usuario).subscribe({next:()=>{this.alertService.close(),this.router.navigateByUrl("/dashboard/usuarios")},error:({error:l})=>this.alertService.errorApi(l.message)})):this.passwordForm.markAllAsTouched()}static{this.\u0275fac=function(l){return new(l||t)(d(I),d(M),d(C),d(U),d(z),d(q))}}static{this.\u0275cmp=w({type:t,selectors:[["app-editar-password"]],standalone:!0,features:[S],decls:41,vars:12,consts:[[1,"lg:flex","p-4","max-w-5xl","mx-auto","gsap-contenido"],[1,"w-full","lg:w-1/2","bg-white","shadow-lg","rounded-lg","border","border-gray-200"],[1,"flex","items-center","p-3","bg-gradient-to-r","from-gray-800","to-gray-700","rounded-t-lg"],["title","Regresar","routerLink","/dashboard/usuarios",1,"bg-white/10","hover:bg-white/20","text-white","rounded-full","p-3","transition-all","duration-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"],[1,"ml-3","text-xl","font-semibold","text-white"],["autocomplete","off",1,"px-6","py-4",3,"formGroup"],[1,"grid","lg:grid-cols-2","gap-4"],[1,"block","font-medium","text-gray-700","mb-1"],[1,"text-red-500"],["type","password","placeholder","******","formControlName","password",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["type","password","placeholder","******","formControlName","repetir",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[1,"w-full","mt-6","px-4","py-2","bg-blue-500","text-white","font-medium","rounded-lg","hover:bg-blue-600","focus:ring-4","focus:ring-blue-200","transition-colors","duration-200",3,"click"],[1,"w-full","lg:w-1/2","mt-4","lg:mt-0","lg:ml-4"],[1,"bg-white","rounded-lg","shadow-lg","border","border-gray-200","p-6"],[1,"flex","items-start"],["class","bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center w-32 h-32 rounded-full shadow-lg",4,"ngIf"],["class","bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center w-32 h-32 rounded-full shadow-lg",4,"ngIf"],["class","bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center w-32 h-32 rounded-full shadow-lg",4,"ngIf"],[1,"ml-6","flex-1"],[1,"text-2xl","lg:text-3xl","font-semibold","text-gray-900"],[1,"text-xl","lg:text-2xl","mt-2","text-gray-700","capitalize"],[1,"text-lg","mt-1","text-gray-500"],[1,"mt-1","text-sm","text-red-600"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","flex","items-center","justify-center","w-32","h-32","rounded-full","shadow-lg"],[1,"text-6xl","font-bold","text-white"],[1,"bg-gradient-to-br","from-orange-500","to-orange-600","flex","items-center","justify-center","w-32","h-32","rounded-full","shadow-lg"],[1,"bg-gradient-to-br","from-green-500","to-green-600","flex","items-center","justify-center","w-32","h-32","rounded-full","shadow-lg"]],template:function(l,e){l&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v(),o(4,"svg",4),g(5,"path",5),r()(),b(),o(6,"h1",6),n(7,"Actualizaci\xF3n de contrase\xF1a"),r()(),o(8,"form",7)(9,"div",8)(10,"div")(11,"label",9)(12,"span",10),n(13,"*"),r(),n(14," Contrase\xF1a "),r(),g(15,"input",11),c(16,V,2,0,"p",12)(17,B,2,1,"p",12),r(),o(18,"div")(19,"label",9)(20,"span",10),n(21,"*"),r(),n(22," Repetir contrase\xF1a "),r(),g(23,"input",13),c(24,H,2,0,"p",12)(25,J,2,1,"p",12),r()(),o(26,"button",14),x("click",function(){return e.actualizarPassword()}),n(27," Actualizar contrase\xF1a "),r()()(),o(28,"div",15)(29,"div",16)(30,"div",17),c(31,K,3,0,"div",18)(32,Q,3,0,"div",19)(33,W,3,0,"div",20),o(34,"div",21)(35,"div",22),n(36),r(),o(37,"div",23),n(38),r(),o(39,"div",24),n(40),r()()()()()()),l&2&&(a(8),s("formGroup",e.passwordForm),a(8),s("ngIf",(e.password==null?null:e.password.touched)&&(e.password==null||e.password.errors==null?null:e.password.errors.required)),a(),s("ngIf",(e.password==null?null:e.password.touched)&&(e.password==null||e.password.errors==null?null:e.password.errors.minlength)),a(7),s("ngIf",(e.repetir==null?null:e.repetir.touched)&&(e.repetir==null||e.repetir.errors==null?null:e.repetir.errors.required)),a(),s("ngIf",(e.repetir==null?null:e.repetir.touched)&&(e.repetir==null||e.repetir.errors==null?null:e.repetir.errors.minlength)),a(6),s("ngIf",e.usuario.role==="ADMIN_ROLE"),a(),s("ngIf",e.usuario.role==="USER_ROLE"),a(),s("ngIf",e.usuario.role==="ENCUESTADOR_ROLE"),a(3),p(" ",e.usuario.usuario.toLowerCase()," "),a(2),E(" ",e.usuario.nombre.toLowerCase()," ",e.usuario.apellido.toLowerCase()," "),a(2),p(" ",e.usuario.email.toLowerCase()," "))},dependencies:[D,P,L,R,j,T,k,_,y,A,F],encapsulation:2})}}return t})();export{le as default};
